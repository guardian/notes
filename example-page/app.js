function s_doPlugins(e){e.prop61=e.eVar9="D=g",e.campaign||(e.campaign=e.getParamValue("CMP")),e.campaign=e.getValOnce(e.campaign,"s_campaign",0),e.campaign&&(e.eVar38=e.eVar39="D=v0");var t=new Date;now=Math.floor(t.getTime()/864e5);var n=now-6,i=e.c_r("s_daily_habit")+"";i=i.split(","),newDiary=[],vC=1;for(var a=0,o=i.length;o>a;++a){var s=i[a];s>=n&&now>s&&(vC+=1)&&newDiary.push(s)}newDiary.push(now),newDiary=newDiary.join(","),t.setFullYear(t.getFullYear()+5),e.c_w("s_daily_habit",newDiary,t),1==e.getVisitStart()&&(e.events=e.apl(e.events,"event89="+vC,",")),e.eVar64=vC,e.eVar10=e.getDaysSinceLastVisit("s_lv"),e.prop16=e.getNewRepeat(30),e.prop71=e.getPreviousValue(e.channel,"s_prev_ch")}function E(){return function(){}}function AppMeasurement_Module_Media(e){var t=this;t.s=e;var n=window;n.s_c_in||(n.s_c_il=[],n.s_c_in=0),t._il=n.s_c_il,t._in=n.s_c_in,t._il[t._in]=t,n.s_c_in++,t._c="s_m",t.list=[],t.open=function(e,n,i,a){var o,s={},r=new Date,c="";if(n||(n=-1),e&&i){if(t.list||(t.list={}),t.list[e]&&t.close(e),a&&a.id&&(c=a.id),c)for(o in t.list)!Object.prototype[o]&&t.list[o]&&t.list[o].Rf==c&&t.close(t.list[o].name);s.name=e,s.length=n,s.xc=0,s.U=0,s.playerName=t.playerName?t.playerName:i,s.Rf=c,s.ce=0,s.aa=0,s.timestamp=Math.floor(r.getTime()/1e3),s.za=0,s.wc=s.timestamp,s.T=-1,s.Dc="",s.ha=-1,s.Ic=0,s.Qd={},s.Mc=0,s.Ja=0,s.V="",s.Ob=0,s.Yd=0,s.Cc=0,s.Kc=0,s.xa=!1,s.Jb="",s.yc="",s.zc=0,s.sc=!1,s.na="",s.complete=0,s.Af=0,s.Hb=0,s.Ib=0,t.list[e]=s,s.Ud=!1}},t.openAd=function(e,n,i,a,o,s,r,c){var l={};t.open(e,n,i,c),(l=t.list[e])&&(l.xa=!0,l.Jb=a,l.yc=o,l.zc=s,l.na=r)},t.Oe=function(e){var n=t.list[e];t.list[e]=0,n&&n.monitor&&clearTimeout(n.monitor.O)},t.close=function(e){t.ja(e,0,-1)},t.play=function(e,n,i,a){var o=t.ja(e,1,n,i,a);o&&!o.monitor&&(o.monitor={},o.monitor.update=function(){1==o.za&&t.ja(o.name,3,-1),o.monitor.O=setTimeout(o.monitor.update,1e3)},o.monitor.update())},t.click=function(e,n){t.ja(e,7,n)},t.complete=function(e,n){t.ja(e,5,n)},t.stop=function(e,n){t.ja(e,2,n)},t.track=function(e){t.ja(e,4,-1)},t.yf=function(e,n){var i,a,o="a.media.",s=e.linkTrackVars,r=e.linkTrackEvents,c="m_i",l=e.contextData;if(n.xa&&(o+="ad.",n.Jb&&(l["a.media.name"]=n.Jb,l[o+"pod"]=n.yc,l[o+"podPosition"]=n.zc),n.Mc||(l[o+"CPM"]=n.na)),n.sc&&(l[o+"clicked"]=!0,n.sc=!1),l["a.contentType"]="video"+(n.xa?"Ad":""),l["a.media.channel"]=t.channel,l[o+"name"]=n.name,l[o+"playerName"]=n.playerName,n.length>0&&(l[o+"length"]=n.length),l[o+"timePlayed"]=Math.floor(n.aa),Math.floor(n.aa)>0&&(l[o+"timePlayed"]=Math.floor(n.aa)),n.Mc||(l[o+"view"]=!0,c="m_s",t.Heartbeat&&t.Heartbeat.enabled&&(c=n.xa?t.__primetime?"mspa_s":"msa_s":t.__primetime?"msp_s":"ms_s"),n.Mc=1),n.V&&(l[o+"segmentNum"]=n.Ja,l[o+"segment"]=n.V,n.Ob>0&&(l[o+"segmentLength"]=n.Ob),n.Cc&&n.aa>0&&(l[o+"segmentView"]=!0)),!n.Af&&n.complete&&(l[o+"complete"]=!0,n.gg=1),n.Hb>0&&(l[o+"milestone"]=n.Hb),n.Ib>0&&(l[o+"offsetMilestone"]=n.Ib),s)for(a in l)Object.prototype[a]||(s+=",contextData."+a);i=l["a.contentType"],e.pe=c,e.pev3=i;var u,d;if(t.contextDataMapping){e.events2||(e.events2=""),s&&(s+=",events");for(a in t.contextDataMapping)if(!Object.prototype[a]){if(c=a.length>o.length&&a.substring(0,o.length)==o?a.substring(o.length):"",i=t.contextDataMapping[a],"string"==typeof i)for(u=i.split(","),d=0;d<u.length;d++)i=u[d],"a.contentType"==a?(s&&(s+=","+i),e[i]=l[a]):"view"==c||"segmentView"==c||"clicked"==c||"complete"==c||"timePlayed"==c||"CPM"==c?(r&&(r+=","+i),"timePlayed"==c||"CPM"==c?l[a]&&(e.events2+=(e.events2?",":"")+i+"="+l[a]):l[a]&&(e.events2+=(e.events2?",":"")+i)):"segment"==c&&l[a+"Num"]?(s&&(s+=","+i),e[i]=l[a+"Num"]+":"+l[a]):(s&&(s+=","+i),e[i]=l[a]);else("milestones"==c||"offsetMilestones"==c)&&(a=a.substring(0,a.length-1),l[a]&&t.contextDataMapping[a+"s"][l[a]]&&(r&&(r+=","+t.contextDataMapping[a+"s"][l[a]]),e.events2+=(e.events2?",":"")+t.contextDataMapping[a+"s"][l[a]]));l[a]&&(l[a]=0),"segment"==c&&l[a+"Num"]&&(l[a+"Num"]=0)}}e.linkTrackVars=s,e.linkTrackEvents=r},t.ja=function(e,n,i,a,o){var s,r,c,l,u,d={},h=(new Date).getTime()/1e3,p=t.trackVars,m=t.trackEvents,f=t.trackSeconds,g=t.trackMilestones,v=t.trackOffsetMilestones,b=t.segmentByMilestones,k=t.segmentByOffsetMilestones,y=1,w={};if(t.channel||(t.channel=t.s.w.location.hostname),(d=e&&t.list&&t.list[e]?t.list[e]:0)&&(d.xa&&(f=t.adTrackSeconds,g=t.adTrackMilestones,v=t.adTrackOffsetMilestones,b=t.adSegmentByMilestones,k=t.adSegmentByOffsetMilestones),0>i&&(i=1==d.za&&d.wc>0?h-d.wc+d.T:d.T),d.length>0&&(i=i<d.length?i:d.length),0>i&&(i=0),d.xc=i,d.length>0&&(d.U=d.xc/d.length*100,d.U=d.U>100?100:d.U),d.T<0&&(d.T=i),u=d.Ic,w.name=e,w.ad=d.xa,w.length=d.length,w.openTime=new Date,w.openTime.setTime(1e3*d.timestamp),w.offset=d.xc,w.percent=d.U,w.playerName=d.playerName,w.mediaEvent=d.ha<0?"OPEN":1==n?"PLAY":2==n?"STOP":3==n?"MONITOR":4==n?"TRACK":5==n?"COMPLETE":7==n?"CLICK":"CLOSE",n>2||n!=d.za&&(2!=n||1==d.za))){if(o||(a=d.Ja,o=d.V),n){if(1==n&&(d.T=i),(3>=n||n>=5)&&d.ha>=0&&(y=!1,p=m="None",d.ha!=i)){if(r=d.ha,r>i&&(r=d.T,r>i&&(r=i)),c=g?g.split(","):0,d.length>0&&c&&i>=r)for(l=0;l<c.length;l++)(s=c[l]?parseFloat(""+c[l]):0)&&r/d.length*100<s&&d.U>=s&&(y=!0,l=c.length,w.mediaEvent="MILESTONE",d.Hb=w.milestone=s);if((c=v?v.split(","):0)&&i>=r)for(l=0;l<c.length;l++)(s=c[l]?parseFloat(""+c[l]):0)&&s>r&&i>=s&&(y=!0,l=c.length,w.mediaEvent="OFFSET_MILESTONE",d.Ib=w.offsetMilestone=s)}if(d.Yd||!o){if(b&&g&&d.length>0){if(c=g.split(","))for(c.push("100"),l=r=0;l<c.length;l++)(s=c[l]?parseFloat(""+c[l]):0)&&(d.U<s&&(a=l+1,o="M:"+r+"-"+s,l=c.length),r=s)}else if(k&&v&&(c=v.split(",")))for(c.push(""+(d.length>0?d.length:"E")),l=r=0;l<c.length;l++)((s=c[l]?parseFloat(""+c[l]):0)||"E"==c[l])&&((s>i||"E"==c[l])&&(a=l+1,o="O:"+r+"-"+s,l=c.length),r=s);o&&(d.Yd=!0)}(o||d.V)&&o!=d.V&&(d.Kc=!0,d.V||(d.Ja=a,d.V=o),d.ha>=0&&(y=!0)),(n>=2||d.U>=100)&&d.T<i&&(d.ce+=i-d.T,d.aa+=i-d.T),(2>=n||3==n&&!d.za)&&(d.Dc+=(1==n||3==n?"S":"E")+Math.floor(i),d.za=3==n?1:n),!y&&d.ha>=0&&3>=n&&(f=f?f:0)&&d.aa>=f&&(y=!0,w.mediaEvent="SECONDS"),d.wc=h,d.T=i}(!n||3>=n&&d.U>=100)&&(2!=d.za&&(d.Dc+="E"+Math.floor(i)),n=0,p=m="None",w.mediaEvent="CLOSE"),7==n&&(y=w.clicked=d.sc=!0),(5==n||t.completeByCloseOffset&&(!n||d.U>=100)&&d.length>0&&i>=d.length-t.completeCloseOffsetThreshold)&&(y=w.complete=d.complete=!0),h=w.mediaEvent,"MILESTONE"==h?h+="_"+w.milestone:"OFFSET_MILESTONE"==h&&(h+="_"+w.offsetMilestone),d.Qd[h]?w.eventFirstTime=!1:(w.eventFirstTime=!0,d.Qd[h]=1),w.event=w.mediaEvent,w.timePlayed=d.ce,w.segmentNum=d.Ja,w.segment=d.V,w.segmentLength=d.Ob,t.monitor&&4!=n&&t.monitor(t.s,w),t.Heartbeat&&t.Heartbeat.enabled&&(w=[],w.push(d.name),d.Ud||(d.Ud=!0,w.push(d.length),w.push(d.playerName),d.xa?(w.push(d.Jb),w.push(d.yc),w.push(d.zc),w.push(d.na),t.Heartbeat.callMethodWhenReady("openAd",w)):t.Heartbeat.callMethodWhenReady("open",w),w=[],w.push(d.name)),0==n?t.Heartbeat.callMethodWhenReady("close",w):(w.push(i),1==n?(w.push(d.Ja),w.push(d.V),w.push(d.Ob),t.Heartbeat.callMethodWhenReady("play",w)):2==n?t.Heartbeat.callMethodWhenReady("stop",w):3==n?t.Heartbeat.callMethodWhenReady("monitor",w):5==n?t.Heartbeat.callMethodWhenReady("complete",w):7==n&&t.Heartbeat.callMethodWhenReady("click",w)),d.ha>=0&&(y=!1)),0==n&&t.Oe(e),y&&d.Ic==u&&(e={},e.contextData={},e.linkTrackVars=p,e.linkTrackEvents=m,e.linkTrackVars||(e.linkTrackVars=""),e.linkTrackEvents||(e.linkTrackEvents=""),t.yf(e,d),e.linkTrackVars||(e["!linkTrackVars"]=1),e.linkTrackEvents||(e["!linkTrackEvents"]=1),t.s.track(e),d.Kc?(d.Ja=a,d.V=o,d.Cc=!0,d.Kc=!1):d.aa>0&&(d.Cc=!1),d.Dc="",d.Hb=d.Ib=0,d.aa-=Math.floor(d.aa),d.ha=i,d.Ic++)}return d},t.vf=function(e,n,i,a,o){var s=0;e&&(!t.autoTrackMediaLengthRequired||n&&n>0)&&(t.list&&t.list[e]?s=1:(1==i||3==i)&&(t.open(e,n,"HTML5 Video",o),s=1),s&&t.ja(e,i,a,-1,0))},t.attach=function(e){var n,i,a;e&&e.tagName&&"VIDEO"==e.tagName.toUpperCase()&&(t.hb||(t.hb=function(e,n,i){var a,o;t.autoTrack&&(a=e.currentSrc,(o=e.duration)||(o=-1),0>i&&(i=e.currentTime),t.vf(a,o,n,i,e))}),n=function(){t.hb(e,1,-1)},i=function(){t.hb(e,1,-1)},t.ra(e,"play",n),t.ra(e,"pause",i),t.ra(e,"seeking",i),t.ra(e,"seeked",n),t.ra(e,"ended",function(){t.hb(e,0,-1)}),t.ra(e,"timeupdate",n),(a=function(){!e.paused&&!e.ended&&!e.seeking&&t.hb(e,3,-1),setTimeout(a,1e3)})())},t.ra=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,!1)},void 0==t.completeByCloseOffset&&(t.completeByCloseOffset=1),void 0==t.completeCloseOffsetThreshold&&(t.completeCloseOffsetThreshold=1);var i=new function(e){this.Je=function(e){this.s=e,this.enabled=!1,this.v=new this.Ka.Of.ne(e)},this.open=function(e,t,n){this.v.open(e,t,n)},this.openAd=function(e,t,n,i,a,o,s){this.v.openAd(e,t,n,i,a,o,s)},this.close=function(e){this.v.close(e)},this.play=function(e,t,n,i,a){this.v.play(e,t,n,i,a)},this.monitor=function(e,t){this.v.monitor(e,t)},this.stop=function(e,t){this.v.stop(e,t)},this.click=function(e,t){this.v.click(e,t)},this.complete=function(e,t){this.v.complete(e,t)},this.setup=function(e){this.v.Wf(e)},this.bufferStart=function(){this.v.xf()},this.bitrateChange=function(e){this.v.wf(e)},this.updateQoSInfo=function(e,t,n){this.v.bg(e,t,n)},this.adBreakStart=function(e){this.v.sf(e)},this.adBreakEnd=function(){this.v.rf()},this.trackError=function(e,t,n){this.v.$f(e,t,n)},this.sessionComplete=function(){this.v.Uf()},this.__setPsdkVersion=function(e){this.v.Ke(e)},function(e){if("undefined"==typeof t)var t={};if("undefined"==typeof n)var n={};n.event||(n.event={}),n.a||(n.a={}),n.H||(n.H={}),n.bb||(n.bb={}),n.M||(n.M={}),function(e){e.extend=function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.r=t.prototype,e}}(t),function(e){e.Q=function(e,t){var n,i=[];for(n in t)t.hasOwnProperty(n)&&"function"==typeof t[n]&&i.push(n);for(n=0;n<i.length;n++){var a=i[n];e.prototype[a]=t[a]}}}(t),function(e){e.Md={Pd:function(){this.ea&&this.ea.apply(this,arguments),this.ea=j}}}(t),function(e){e.Oa=!1,e.P={N:function(e){this.Ua=!0,this.Ab=e},jg:function(){this.Ua=!1},log:function(t){e.Oa&&this.Ua&&window.console&&window.console.log&&window.console.log(this.Ab+t)},info:function(t){e.Oa&&this.Ua&&window.console&&window.console.info&&window.console.info(this.Ab+t)},warn:function(t){e.Oa&&this.Ua&&window.console&&window.console.warn&&window.console.warn(this.Ab+t)},error:function(t){if(e.Oa&&this.Ua&&window.console&&window.console.error)throw t=this.Ab+t,window.console.error(t),Error(t)}}}(t),function(e){function t(e,t){this.type=e,this.data=t}t.wb="success",t.Xb="error",e.S=t}(t),function(e){function t(){this.F={}}t.prototype.addEventListener=function(e,t,n){e&&t&&(this.F[e]=this.F[e]||[],this.F[e].push({zf:t,Ld:n||window}))},t.prototype.dispatchEvent=function(e){if(e.type)for(var t in this.F)if(this.F.hasOwnProperty(t)&&e.type===t){var n=this.F[t];for(t=0;t<n.length;t++)n[t].zf.call(n[t].Ld,e);break}},t.prototype.eb=function(e){if(e){var t,n;for(n in this.F)if(this.F.hasOwnProperty(n)){for(t=this.F[n].length-1;t>=0;t--)this.F[n][t].Ld===e&&this.F[n].splice(t,1);this.F[n].length||delete this.F[n]}}else this.F={}},e.kd=t}(t),function(e){function t(){return t.prototype.Ta||(t.prototype.Ta=new n),t.prototype.Ta}var n=e.kd;e.ca=t}(t),function(e){function t(){}function n(){n.r.constructor.call(this)}var i=e.S,a=e.kd;t.ld="GET",e.extend(n,a),n.prototype.Cf=function(t){if(t.I=new window.XMLHttpRequest,!("withCredentials"in t.I)&&(t.I="undefined"!=typeof window.XDomainRequest?new window.XDomainRequest:j,t.I)){var a=this;t.I.onreadystatechange=function(){if(4===t.I.readyState){var o={};o[n.pd]=t.I.status,t.I.status>=200&&t.I.status<400?(o[n.od]=t.I.responseText,o[n.qb]=a,a.dispatchEvent(new e.S(i.wb,o))):a.dispatchEvent(new e.S(i.Xb,o))}}}},n.Eb=j,n.prototype.Mf=function(t){n.Eb||(n.Eb=new Image,n.Eb.alt=""),n.Eb.src=t.url,t={},t[n.pd]=200,t[n.od]="",t[n.qb]=this,this.dispatchEvent(new e.S(i.wb,t))},n.prototype.close=function(){this.eb()},n.prototype.load=function(e){e&&e.method&&e.url&&(this.Cf(e),e.I?(e.I.open(e.method,e.url,!0),e.I.send()):this.Mf(e))},n.pd="status",n.od="response",n.qb="instance",e.Ie=t,e.He=function(e,t){this.url=e||j,this.method=t,this.I=j},e.Ge=n}(t),function(e,t){function n(){}n.Fa="report",n.qa="what",n.Ga="reset",n.Sb="account",n.cc="sc_tracking_server",n.xb="tracking_server",n.lb="check_status_server",n.rb="job_id",n.Pa="publisher",n.fc="stream_type",n.$b="ovp",n.ec="sdk",n.bd="channel",n.nb="debug_tracking",n.yb="track_local",n.Ha="visitor_id",n.Aa="analytics_visitor_id",n.Da="marketing_cloud_visitor_id",n.i="name",n.Ca="length",n.Ea="player_name",n.X="timer_interval",n.rd="tracking_interval",n.cd="check_status_interval",n.gc="track_external_errors",n.ac="parent_name",n.nd="parent_pod",n.bc="parent_pod_position",n.ub="parent_pod_offset",n.na="parent_pod_cpm",n.B="offset",n.vb="source",n.Yb="error_id",n.kb="bitrate",n.Zb="fps",n.Vb="dropped_frames",t.event.ba=n}(t,n),function(e,t){function n(e,t){n.r.constructor.call(this,e,t)}e.extend(n,e.S),n.La="api_destroy",n.Tb="api_config",n.Uc="api_open_main",n.Tc="api_open_ad",n.Qc="api_close",n.Vc="api_play",n.Sc="api_monitor",n.Yc="api_stop",n.Pc="api_click",n.Rc="api_complete",n.Zc="api_track_error",n.Wc="api_qos_info",n.Nc="api_bitrate_change",n.Oc="api_buffer_start",n.Ub="api_pod_offset",n.Xc="api_session_complete",t.event.Ma=n}(t,n),function(e,t){function n(e,t){n.r.constructor.call(this,e,t)}e.extend(n,e.S),n.Ba="context_data_available",t.event.dd=n}(t,n),function(e,t){function n(e,t){n.r.constructor.call(this,e,t)}e.extend(n,e.S),n.oa="data_request",n.mb="data_response",n.ya={Qa:"tracking_timer_interval",md:"main_video_publisher"},t.event.Wb=n}(t,n),function(e,t){function n(e,t){n.r.constructor.call(this,e,t)}e.extend(n,e.S),n.sb="network_check_status_complete",t.event.tb=n}(t,n),function(e,t){function n(e,t){n.r.constructor.call(this,e,t)}e.extend(n,e.S),n.CLOCK_TRACKING_TICK="CLOCK_TRACKING_TICK",n.CLOCK_TRACKING_ENABLE="CLOCK_TRACKING_ENABLE",n.CLOCK_TRACKING_DISABLE="CLOCK_TRACKING_DISABLE",n.CLOCK_CHECK_STATUS_TICK="CLOCK_CHECK_STATUS_TICK",n.CLOCK_CHECK_STATUS_ENABLE="CLOCK_CHECK_STATUS_ENABLE",n.CLOCK_CHECK_STATUS_DISABLE="CLOCK_CHECK_STATUS_DISABLE",t.event.Na=n}(t,n),function(e,t){function n(e,t){this.value=e,this.hint=t}function i(e){this.Bc=e,this.data={}}n.pa="short",i.prototype.c=function(e,t,n){var i=this;return function(){return arguments.length&&(i[e]=arguments[0],i.Pb(t,arguments[0],n)),i[e]}},i.prototype.Pb=function(e,t,i){this.data[e]=new n(t,i)},t.a.R=i,t.a.ed=n}(t,n),function(e,t){function n(e,t){n.r.constructor.call(this,e),this.cg=this.c("_year","year",i.pa),this.Qf=this.c("_month","month",i.pa),this.Df=this.c("_day","day",i.pa),this.Kf=this.c("_hour","hour",i.pa),this.Pf=this.c("_minute","minute",i.pa),this.Sf=this.c("_second","second",i.pa),this.cg(t.getUTCFullYear()),this.Qf(t.getUTCMonth()+1),this.Df(t.getUTCDate()),this.Kf(t.getUTCHours()),this.Pf(t.getUTCMinutes()),this.Sf(t.getUTCSeconds())}var i=t.a.ed;e.extend(n,t.a.R),t.a.he=n}(t,n),function(e,t){function n(){if(n.r.constructor.call(this,"asset"),this.Fb=this.c("_cpm","cpm",j),this.L=this.c("_adId","ad_id",j),this.Nb=this.c("_resolver","resolver",j),this.Kb=this.c("_podId","pod_id",j),this.Lb=this.c("_podPosition","pod_position",j),this.Mb=this.c("_podSecond","pod_second",j),this.length=this.c("_length","length",j),this.Fb(""),this.L(""),this.Nb(""),this.Kb(""),this.Lb(""),this.Mb(0),this.length(0),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.Fb(e.Fb()),this.L(e.L()),this.Nb(e.Nb()),this.Kb(e.Kb()),this.Lb(e.Lb()),this.Mb(e.Mb()),this.length(e.length())}}e.extend(n,t.a.R),t.a.$c=n}(t,n),function(e,t){function n(){if(n.r.constructor.call(this,"asset"),this.type=this.c("_type","type",j),this.k=this.c("_videoId","video_id",j),this.K=this.c("_publisher","publisher",j),this.q=this.c("_adData","ad_data",j),this.duration=this.c("_duration","duration",j),this.type(""),this.k(""),this.K(""),this.q(j),this.duration(0),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.type(e.type()),this.k(e.k()),this.K(e.K()),this.duration(e.duration()),(e=e.q())&&this.q(new i(e))}}var i=t.a.$c;e.extend(n,t.a.R),n.sd="vod",n.Ce="live",n.Be="linear",n.Ra="ad",t.a.jb=n}(t,n),function(e,t){function n(e){n.r.constructor.call(this,"event"),this.pf=e,this.type=this.c("_type","type",j),this.count=this.c("_count","count",j),this.Gc=this.c("_totalCount","total_count",j),this.duration=this.c("_duration","duration",j),this.Hc=this.c("_totalDuration","total_duration",j),this.ka=this.c("_playhead","playhead",j),this.id=this.c("_id","id",j),this.source=this.c("_source","source",j),this.Ac=this.c("_prevTs","prev_ts",j),this.qf=function(){var e=1e3*this.pf;this.pc=new Date(Math.floor(this.oc/e)*e),this.Pb("ts_as_date",new i(this.Bc,this.pc),j)},this.Rb=function(){return arguments.length&&(this.oc=arguments[0],this.Pb("ts",this.oc,j),this.qf()),this.oc},this.ag=function(){arguments.length&&(this.pc=arguments[0],this.Pb("ts_as_date",new i(this.Bc,this.pc),j))},this.type(""),this.count(0),this.Gc(0),this.duration(0),this.Hc(0),this.ka(0),this.id(""),this.source(""),this.Ac(-1),this.Rb((new Date).getTime())}var i=t.a.he;e.extend(n,t.a.R),n.le="load",n.me="unload",n.ob="start",n.jd="play",n.hd="pause",n.je="buffer",n.ie="bitrate_change",n.ke="error",n.fd="active",n.gd="complete",t.a.pb=n}(t,n),function(e,t){function n(){n.r.constructor.call(this,"stream"),this.qc=this.c("_bitrate","bitrate",j),this.Rd=this.c("_fps","fps",j),this.Od=this.c("_droppedFrames","dropped_frames",j),this.qc(0),this.Rd(0),this.Od(0)}e.extend(n,t.a.R),t.a.re=n}(t,n),function(e,t){function n(){n.r.constructor.call(this,"sc"),this.Xd=this.c("_reportSuiteId","rsid",j),this.trackingServer=this.c("_trackingServer","tracking_server",j),this.Xd(""),this.trackingServer("")}e.extend(n,t.a.R),t.a.Ae=n}(t,n),function(e,t){function n(){n.r.constructor.call(this,"sp"),this.ia=this.c("_ovp","ovp",j),this.la=this.c("_sdk","sdk",j),this.channel=this.c("_channel","channel",j),this.playerName=this.c("_playerName","player_name",j),this.ia("unknown"),this.la("unknown"),this.channel("unknown"),this.playerName("")}e.extend(n,t.a.R),t.a.xe=n}(t,n),function(e,t){function n(){n.r.constructor.call(this,"event"),this.Ec=this.c("_sessionId","sid",j),this.Ec("")}e.extend(n,t.a.R),t.a.ye=n}(t,n),function(e,t){function n(){if(n.r.constructor.call(this,"stream"),this.rc=this.c("_cdn","cdn",j),this.name=this.c("_name","name",j),this.rc(""),this.name(""),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.rc(e.rc()),this.name(e.name())}}e.extend(n,t.a.R),t.a.qd=n}(t,n),function(e,t){function n(){if(n.r.constructor.call(this,"user"),this.uc=this.c("_device","device",j),this.country=this.c("_country","country",j),this.city=this.c("_city","city",j),this.latitude=this.c("_latitude","latitude",j),this.longitude=this.c("_longitude","longitude",j),this.ib=this.c("_visitorId","id",j),this.$a=this.c("_analyticsVisitorId","aid",j),this.ab=this.c("_marketingCloudVisitorId","mid",j),this.uc(""),this.country(""),this.city(""),this.latitude(""),this.longitude(""),this.ib(""),this.$a(""),this.ab(""),arguments.length&&arguments[0]instanceof n){var e=arguments[0];this.uc(e.uc()),this.country(e.country()),this.city(e.city()),this.latitude(e.latitude()),this.longitude(e.longitude()),this.ib(e.ib()),this.$a(e.$a()),this.ab(e.ab())}}e.extend(n,t.a.R),t.a.vd=n}(t,n),function(e,t){t.a.ue=function(e,t,n,i,a){this.ga=e,this.g=t,this.Lc=n,this.Fc=i,this.cb=a}}(t,n),function(e,t){var n=t.a.pb;t.a.te=function(e,t,i){this.Xf=e,this.Tf=t,this.Vf=i,this.G=[],this.Za=function(e){this.G.push(e)},this.lg=function(){return this.G},this.Gf=function(){if(this.G.length)for(var e=this.G.length-1;e>=0;e--)this.G[e].ga.type()===n.hd&&this.G.splice(e,1)}}}(t,n),function(e,t){function n(){}n.prototype.$d=E(),n.prototype.ae=E(),n.prototype.W=E(),n.prototype.Zd=E(),n.prototype.be=E(),t.a.we=n}(t,n),function(e,t){function n(){this.N("[media-fork::QuerystringSerializer] > "),this.da=function(e){return e?e+"&":""},this.Gd=function(e){return e&&e.length>0&&(e=e.substring(0,e.length-1)),e},this.mf=function(e){var t,n=[];for(t in e.data)if(e.data.hasOwnProperty(t)){var i=e.data[t],a=i.value;i=i.hint;var s=j,r=e.Bc;a===j||"undefined"==typeof a||("number"==typeof a?s=this.Zd(t,a,r,i):"string"==typeof a?s=this.be(t,a,r,i):a instanceof o?s=this.W(a):this.warn("#_processDao() > Unable to serialize DAO. Field: "+t+". Value: "+a+"."),s&&n.push(s))}return n}}var i=e.Q,a=e.P,o=t.a.R,s=t.a.ed;e.extend(n,t.a.we),i(n,a),n.prototype.$d=function(e){for(var t=[],n=e.G,i=0;i<n.length;i++){var a=this.ae(n[i])+"&";a+=this.da(this.W(e.Xf)),a+=this.da(this.W(e.Tf)),a+=this.da(this.W(e.Vf)),a=this.Gd(a),t.push(a)}return t},n.prototype.ae=function(e){var t=this.da(this.W(e.ga));return t+=this.da(this.W(e.g)),t+=this.da(this.W(e.Lc)),t+=this.da(this.W(e.Fc)),t+=this.da(this.W(e.cb)),t=this.Gd(t)},n.prototype.W=function(e){e=this.mf(e);for(var t="",n=0;n<e.length;n++)t+=n==e.length-1?e[n]:e[n]+"&";return t},n.prototype.Zd=function(e,t,n,i){var a="l";return t==j||void 0===t||isNaN(t)?j:(i&&"string"==typeof i&&i===s.pa&&(a="h"),a+":"+n+":"+e+"="+t)},n.prototype.be=function(e,t,n){return t?"s:"+n+":"+e+"="+window.encodeURIComponent(t):j},t.a.se=n}(t,n),function(e,t){function n(e){this.Qb=0,this.O=e,this.Gb=!1}function i(){if(i.prototype.Ta)return i.prototype.Ta;var e=this;this.N("[media-fork::TimerManager] > "),this.Ad=0,this.fa={},this.ua=function(){this.log("#_onApiDestroy()"),clearInterval(this.yd),c().eb(this)},this.jf=function(){this.log("#_onTick() > ------------------- ("+this.Ad+")"),this.Ad++;for(var e in this.fa)if(this.fa.hasOwnProperty(e)){var t=this.fa[e];if(t.Gb&&(t.Qb++,t.Qb%t.O===0)){var n={};n[r.X]=t.O,c().dispatchEvent(new s(s[e],n))}}},c().addEventListener(o.La,this.ua,this),this.yd=setInterval(function(){e.jf()},1e3*l),this.Lf=function(e){return(e=this.fa[e])&&e.Gb},this.Kd=function(e,t){this.fa[e]=new n(t)},this.Ef=function(e){delete this.fa[e]},this.Yf=function(e,t){this.log("#startTimer(name="+e+", reset="+t+")");var n=this.fa[e];n&&(n.Gb=!0,t)&&(this.log("Resseting timer: "+e),n.Qb=0)},this.Zf=function(e,t){this.log("#startTimer(name="+e+", reset="+t+")");var n=this.fa[e];n&&(n.Gb=!1,t)&&(this.log("Resseting timer: "+e),n.Qb=0)},i.prototype.Ta=this}var a=e.Q,o=t.event.Ma,s=t.event.Na,r=t.event.ba,c=e.ca,l=1;a(i,e.P),new i,t.M.Ee=i}(t,n),function(e,t){function n(e,t,n,i){this.N("[media-fork::Timer] > "),this.O=i,this.ma=e,this.Hf=t,this.Ff=n,s().Kd(this.ma,this.O),this.ua=function(){this.Nd()},this.lf=function(e){e=e.data;var t=!1;e&&e.hasOwnProperty(r.Ga)&&(t=e[r.Ga]),this.start(t)},this.kf=function(e){e=e.data;var t=!1;e&&e.hasOwnProperty(r.Ga)&&(t=e[r.Ga]),this.stop(t)},a().addEventListener(o.La,this.ua,this),a().addEventListener(this.Hf,this.lf,this),a().addEventListener(this.Ff,this.kf,this)}var i=e.Q,a=e.ca,o=t.event.Ma,s=t.M.Ee,r=t.event.ba;i(n,e.P),n.prototype.start=function(e){this.log("#start("+this.ma+")"),s().Yf(this.ma,e)},n.prototype.stop=function(e){this.log("#stop("+this.ma+")"),s().Zf(this.ma,e)},n.prototype.Nd=function(){a().eb(this),s().Ef(this.ma)},n.prototype.setInterval=function(e){var t=s().Lf(this.ma);this.stop(!0),this.O=e,s().Kd(this.ma,this.O),t&&this.start(!0)},t.M.ud=n}(t,n),function(e,t){function n(){this.N("[media-fork::TrackingTimer] > "),n.r.constructor.call(this,c.CLOCK_TRACKING_TICK,c.CLOCK_TRACKING_ENABLE,c.CLOCK_TRACKING_DISABLE,u),this.kc=function(e){e=e.data[l.rd],this.log("#_onCheckStatusComplete(interval="+e+")"),e?e===this.O?this.log("#_onCheckStatusComplete() > Interval value not changed."):(this.log("#_onCheckStatusComplete() > Interval changed to: "+e),this.setInterval(e)):(this.warn("#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(u))},this.lc=function(e){switch(e=e.data[l.qa],this.log("#_onDataRequest(what="+e+")"),e){case s.ya.Qa:e={},e[l.X]=this.O,o().dispatchEvent(new s(s.mb,e))}},o().addEventListener(r.sb,this.kc,this),o().addEventListener(s.oa,this.lc,this)}var i=e.Q,a=e.P,o=e.ca,s=t.event.Wb,r=t.event.tb,c=t.event.Na,l=t.event.ba,u=10;e.extend(n,t.M.ud),i(n,a),t.M.Fe=n}(t,n),function(e,t){function n(){this.N("[media-fork::CheckStatusTimer] > "),n.r.constructor.call(this,u.CLOCK_CHECK_STATUS_TICK,u.CLOCK_CHECK_STATUS_ENABLE,u.CLOCK_CHECK_STATUS_DISABLE,a);var e=this;setTimeout(function(){e.Qe()},200),this.Qe=function(){this.log("#_initialCheck()");var e={};e[l.X]=this.O,r().dispatchEvent(new u(u.CLOCK_CHECK_STATUS_TICK,e))},this.kc=function(e){e=e.data[l.cd],this.log("#_onCheckStatusComplete(interval="+e+")"),e?e===this.O?this.log("#_onCheckStatusComplete() > Interval value not changed."):e>i?(this.warn("#_onCheckStatusComplete() > Interval value too large: "+e),this.setInterval(i)):(this.log("#_onCheckStatusComplete() > Interval changed to: "+e),this.setInterval(e)):(this.warn("#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(a))},r().addEventListener(c.sb,this.kc,this)}var i=600,a=60,o=e.Q,s=e.P,r=e.ca,c=t.event.tb,l=t.event.ba,u=t.event.Na;e.extend(n,t.M.ud),o(n,s),t.M.de=n}(t,n),function(e,t){var n=t.M.de,i=t.M.Fe;t.M.ee=function(){this.dg=new n,this.fg=new i}}(t,n),function(e,t){function n(e){this.N("[media-fork::SettingsParser] > "),this.Bd=e,this.log("#SettingsParser(data="+e+")")}var i=e.Q,a=e.ca,o=t.event.ba,s=t.event.tb;i(n,e.P),n.prototype.parse=function(){var e,t,n,i;if(this.Bd){window.DOMParser?i=(new window.DOMParser).parseFromString(this.Bd,"text/xml"):(i=new window.ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(this.data));var r;(r=parseInt(i.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(e=r),(r=parseInt(i.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(t=r),(r=parseInt(i.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10))&&(n=1===r),i={},i[o.rd]=e,i[o.cd]=t,i[o.gc]=n,this.log("#parse() > Obtained configuration settings: "+JSON.stringify(i)),a().dispatchEvent(new s(s.sb,i))}else this.warn("#SettingsParser() > No data available for parsing.")},t.bb.ze=n}(t,n),function(e,t){function n(e){this.N("[media-fork::Network] > "),this.ta=this.Hd=this.Cd=!1,this.of=e,this.Ed=this.xd=this.Id=j,this.jc=function(e){e=e.data,this.log("#_onApiConfig(sb_server="+e[d.xb]+", check_status_server="+e[d.lb]+", job_id="+e[d.rb]+", debug_tracking="+e[d.nb]+", track_local="+e[d.yb]+")"),this.Id=e[d.xb],this.xd=e[d.lb],this.Ed=e[d.rb],this.Cd=e[d.nb],this.Hd=e[d.yb],this.ta=!0},this.ua=function(){this.log("#_onApiDestroy()"),s().eb(this)},this.gf=function(e){if(this.ta){if(e=this.of.$d(e.data[d.Fa]),!this.Hd)for(var t=0;t<e.length;t++){var n=new l(this.Id+"/?__job_id="+this.Ed+"&"+e[t],c.ld);this.Cd&&window.console&&window.console.info&&window.console.info(n.method+" : "+n.url),function(e,t){e.addEventListener(o.wb,function(){e.close()},this),e.addEventListener(o.Xb,function(n){t.warn("#_onContextDataAvailable() > Failed to send heartbeat report: "+JSON.stringify(n)),e.close()},this),e.load(n)}(new u,this)}}else this.warn("#_onContextDataAvailable() > Unable to send request: not configured.")},this.ef=function(){function e(e){e.data&&new f(e.data.response).parse(),e.data[u.qb].close()}function t(e){n.warn("_onClockCheckStatusTick() > Failed to obtain the config. settings: "+JSON.stringify(e)),e.data[u.qb].close()}if(this.ta){var n=this;this.ea=function(n){if(n=n[d.Pa]){n=n.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),n=this.xd+n+".xml?r="+(new Date).getTime();var i=new l(n,c.ld),a=new u;a.addEventListener(o.wb,e,this),a.addEventListener(o.Xb,t,this),this.log("#_onClockCheckStatusTick() > Get new settings from: "+n),a.load(i)}else this.warn("#_onClockCheckStatusTick() > Publisher is NULL.")};var i={};i[d.qa]=h.ya.md,s().dispatchEvent(new h(h.oa,i))}else this.warn("#_onClockCheckStatusTick() > Unable to send request: not configured.")},this.mc=function(e){this.Pd(e.data)},s().addEventListener(h.mb,this.mc,this),s().addEventListener(r.Tb,this.jc,this),s().addEventListener(r.La,this.ua,this),s().addEventListener(m.Ba,this.gf,this),s().addEventListener(p.CLOCK_CHECK_STATUS_TICK,this.ef,this)}var i=e.Q,a=e.P,o=e.S,s=e.ca,r=t.event.Ma,c=e.Ie,l=e.He,u=e.Ge,d=t.event.ba,h=t.event.Wb,p=t.event.Na,m=t.event.dd,f=t.bb.ze;i(n,e.Md),i(n,a),t.bb.qe=n}(t,n),function(e,t){function n(){this.N("[media-fork::Counters] > "),this.va={},this.wa={},this.Sd=function(e,t,n){return e=t+"."+n+"."+e,this.va[e]||(this.va[e]=0),this.log("#getTotalCount(key="+e+")"),this.va[e]},this.mg=function(e,t,n){e=t+"."+n+"."+e,this.log("#resetTotalCount(key="+e+")"),this.va[e]=0},this.Wd=function(e,t,n){e=t+"."+n+"."+e,this.va[e]||(this.va[e]=0),this.log("#incrementTotalCount(key="+e+")"),this.va[e]++},this.Td=function(e,t,n){return e=t+"."+n+"."+e,this.wa[e]||(this.wa[e]=0),this.log("#getTotalDuration(key="+e+")"),this.wa[e]},this.ng=function(e,t,n){e=t+"."+n+"."+e,this.log("#resetTotalDuration(key="+e+")"),this.wa[e]=0},this.Vd=function(e,t,n,i){e=t+"."+n+"."+e,this.wa[e]||(this.wa[e]=0),this.log("#increaseTotalDuration(key="+e+", amount="+i+")"),this.wa[e]+=i}}var i=e.Q;i(n,e.P),t.H.ge=n}(t,n),function(e,t){function n(){this.N("[media-fork::History] > "),this.Dd={},this.zd=function(e){var t=e.g;return(t.q()?t.q().L():t.k())+"."+t.type()+"."+e.$},this.gb=function(e){var t=this.zd(e);this.log("#updateWith(key="+t+")"),this.Dd[t]=e},this.J=function(e){return e=this.zd(e),this.log("#getPreviousItemOfSameTypeWith(key="+e+")"),this.Dd[e]}}var i=e.Q;i(n,e.P),t.H.oe=n}(t,n),function(e,t){var n=t.a.pb,i=t.a.jb,a=t.a.vd,o=t.a.qd;t.H.td=function(e,t,s,r,c,l){this.timestamp=new Date,this.g=new i(e),this.Lc=new a(t),this.Fc=new o(s),this.$=c,this.cb=r,this.ka=l,this.A=void 0,this.If=function(){return this.$===n.fd?this.g.k():this.g.type()===i.Ra?this.g.q().L():this.g.k()},this.kg=function(){return 1}}}(t,n),function(e,t){t.H.De=function(){this.Z=[],this.Jf=function(){return this.Z.slice()},this.tf=function(e){for(var t=-1,n=this.Z.length-1;n>=0&&!(e.timestamp>=this.Z[n].timestamp);n--)t=n;t>0?this.Z.splice(n,0,e):this.Z.push(e)}}}(t,n),function(e,t){function n(e){this.N("[media-fork::ReporterHelper] > "),this.j=e,this.Fd=j,this.Ne=function(e,t,n){return n*=1e3,e=0===e.getTime()?t.getTime()-n/2:e.getTime()/2+t.getTime()/2,e=Math.floor(e/n)*n,this.Fd==e&&(e+=n),this.Fd=e,new Date(e)},this.Sa=function(e,t,n){var i=this.j.ic,a=e.$,s=e.If(),c=e.g.type(),l=a===o.ob?0:e.ka;return i.Wd(a,s,c),i.Vd(a,s,c,t),n=new o(n),n.type(a),n.count(1),n.duration(t),n.Gc(i.Sd(a,s,c)),n.Hc(i.Td(a,s,c)),n.ka(l),n.Rb(e.timestamp.getTime()),n.Ac(e.A?e.A.timestamp.getTime():-1),new r(n,e.g,e.Lc,e.Fc,e.cb)},this.wd=function(e,t,n){if(e.G.length){var i=new s(this.j.e);if(i.type(this.j.Bb),i.q(j),i=new c(i,this.j.n,this.j.C,this.j.u,o.fd,this.j.p[this.j.e.k()]),i.A=this.j.o.J(i),this.j.o.gb(i),e.Za(this.Sa(i,1e3*t,t)),n!=j)for(t=0;t<e.G.length;t++)e.G[t].ga.ag(n)}},this.Xa=function(e,t){return t.getTime()-e.getTime()},this.tc=function(e,t,n){var i=new a(this.j.Db,this.j.Ia,this.j.Wa);return i.Za(this.Sa(e,0,t)),n&&this.wd(i,t,j),i},this.Jd=function(e,t,n){var i,r,c=new a(this.j.Db,this.j.Ia,this.j.Wa),l=this.j.Z.Jf(),u=[];r=j;var d=0;for(d=i=0;d<l.length;d++)i=l[d],i.timestamp>e&&i.timestamp<=t&&u.push(i),i.timestamp<=e&&(r=i);for(this.log("#createReportForQuantum() > -------------TRACK REPORT----------------"),this.log("#createReportForQuantum() > Interval: ["+e.getTime()+" , "+t.getTime()+"]. Tracking interval: "+n),this.log("#createReportForQuantum() > -----------------------------------------"),d=0;d<l.length;d++)this.log("#createReportForQuantum() > ["+l[d].timestamp.getTime()+"] :"+l[d].$+" | "+l[d].g.type());for(this.log("#createReportForQuantum() > -----------------------------------------"),d=0;d<u.length;d++)this.log("#createReportForQuantum() > ["+u[d].timestamp.getTime()+"] :"+u[d].$+" | "+u[d].g.type());if(this.log("#createReportForQuantum() > -----------------------------------------"),r&&(r.A&&(r.A.timestamp=r.timestamp),r.timestamp=new Date(e.getTime()+1),i=r.g.q()?r.g.q().L():r.g.k(),r.ka=this.j.p[i]),u.length)for(l=0,r&&(l=r.$===o.ob&&r.g.type()!==s.Ra?this.Xa(r.timestamp,u[0].timestamp):this.Xa(e,u[0].timestamp),c.Za(this.Sa(r,l,n))),d=0;d<u.length;d++){var h=u[d];
l=d==u.length-1?this.Xa(h.timestamp,t):this.Xa(h.timestamp,u[d+1].timestamp);var p=!1,m=c.G;for(i=0;i<m.length;i++)if(r=m[i],h.g.type()===r.g.type()&&h.$===r.ga.type()&&(p=h.g.type()===s.Ra?r.g.q().L()===h.g.q().L():r.g.k()===h.g.k()),p){m=r.ga;var f=r.g.type();i=r.g.q()?r.g.q().L():r.g.k();var g=this.j.ic;g.Wd(m.type(),i,f),g.Vd(m.type(),i,f,l),r.cb=h.cb,m.ka(this.j.p[i]),m.duration(m.duration()+l),m.Gc(g.Sd(m.type(),i,f)),m.Hc(g.Td(m.type(),i,f)),m.Rb(h.timestamp.getTime());break}p||(this.log("#createReportForQuantum() > Adding event to report: "+h.$),i=h.g.q()?h.g.q().L():h.g.k(),h.ka=this.j.p[i],c.Za(this.Sa(h,l,n)))}else r&&c.Za(this.Sa(r,this.Xa(e,t),n));for(c.Gf(),d=this.Ne(e,t,n),this.wd(c,n,d),this.log("#createReportForQuantum() > Final report ----- START -----"),d=0;d<c.G.length;d++)r=c.G[d],n=r.ga,i=r.g.q()?r.g.q().L():r.g.k(),this.log("#createReportForQuantum() > Final report ["+n.Rb()+"/"+n.Ac()+"] :"+n.type()+" | type="+r.g.type()+", name="+i+", duration="+n.duration()+", playhead="+n.ka());return this.log("#createReportForQuantum() > Final report ----- END -----"),c}}var i=e.Q,a=t.a.te,o=t.a.pb,s=t.a.jb,r=t.a.ue,c=t.H.td;i(n,e.P),t.H.ve=n}(t,n),function(e,t){function n(){this.N("[media-fork::Context] > "),this.zb=this.z=!1,this.Bb=j,this.hc=!1,this.l=this.Cb=j,this.f={fb:j,K:j},this.Ya=this.ea=j,this.p={},this.Va=new s(this),this.Z=new r,this.o=new l,this.Wa=new u,this.Db=new d,this.Ia=new p,this.e=new h,this.n=new m,this.C=new f,this.u=new g,this.ic=new v,this.jc=function(e){e=e.data,this.log("#_onApiConfig(account="+e[T.Sb]+", sc_server="+e[T.cc]+", sb_server="+e[T.xb]+", check_status_server="+e[T.lb]+", job_id="+e[T.rb]+", publisher="+e[T.Pa]+", ovp="+e[T.$b]+", sdk="+e[T.ec]+", debug_tracking="+e[T.nb]+", track_local="+e[T.yb]+")"),this.Db.Xd(e[T.Sb]),this.Db.trackingServer(e[T.cc]),this.f.K=e[T.Pa],this.Ia.ia(e[T.$b]),this.Ia.la(e[T.ec]),this.Ia.channel(e[T.bd]),o().dispatchEvent(new b(b.CLOCK_CHECK_STATUS_ENABLE))},this.ua=function(){this.log("#_onApiDestroy()"),o().eb(this)},this.Ye=function(e){e=e.data,this.log("#_onApiOpenMain(name="+e[T.i]+", length="+e[T.Ca]+", type="+e[T.fc]+", player_name="+e[T.Ea]+", vid="+e[T.Ha]+", aid="+e[T.Aa]+", mid="+e[T.Da]+")"),this.nf(),this.l=e[T.i],this.p[this.l]=0,this.Ia.playerName(e[T.Ea]),this.n.ib(e[T.Ha]),this.n.$a(e[T.Aa]),this.n.ab(e[T.Da]),this.e.k(this.l),this.e.duration(e[T.Ca]),this.e.type(e[T.fc]),this.Bb=this.e.type(),this.C.name(this.l),this.Pe(),e={},e[T.Ga]=!0,o().dispatchEvent(new b(b.CLOCK_TRACKING_ENABLE,e)),this.ea=function(e){e=e[T.X];var t=new c(this.e,this.n,this.C,this.u,C.le,0);t.A=this.o.J(t),this.o.gb(t),e=this.Va.tc(t,e,!0),t={},t[T.Fa]=e,o().dispatchEvent(new _(_.Ba,t))},e={},e[T.qa]=y.ya.Qa,o().dispatchEvent(new y(y.oa,e)),e=new c(this.e,this.n,this.C,this.u,C.ob,0),e.A=this.o.J(e),this.Y(e),this.z=!0},this.Xe=function(e){if(this.z){this.info("Call detected: onApiOpenAd()."),e=e.data,this.log(this,"#_onApiOpenAd(name="+e[T.i]+", length="+e[T.Ca]+", player_name="+e[T.Ea]+", parent_name="+e[T.ac]+", pod_pos="+e[T.bc]+", pod_offset="+e[T.ub]+", cpm="+e[T.na]+")"),this.e.k()||this.e.k(e[T.ac]),this.l=e[T.i],this.p[this.l]=0;var t=new E;t.L(this.l),t.length(e[T.Ca]),t.Nb(e[T.Ea]),t.Fb(e[T.na]),t.Kb(e[T.nd]),t.Mb(this.Cb),t.Lb(e[T.bc]+""),this.e.q(t),this.e.type(h.Ra),e=new c(this.e,this.n,this.C,this.u,C.ob,0),e.A=this.o.J(e),this.Y(e),e=new c(this.e,this.n,this.C,this.u,C.jd,this.p[this.l]),e.A=this.o.J(e),this.Y(e)}else this.warn("#_onApiOpenAd() > No active viewing session.")},this.Ue=function(e){this.z?(e=e.data[T.i],this.log("#_onApiClose(name="+e+")"),e===this.e.k()?this.Me():this.Le()):this.warn("#_onApiClose() > No active viewing session.")},this.Ze=function(e){this.z?(e=e.data,this.log("#_onApiPlay(name="+e[T.i]+", offset="+e[T.B]+", vid="+e[T.Ha]+", aid="+e[T.Aa]+", mid="+e[T.Da]+")"),e[T.i]==this.e.k&&this.zb||(this.n.ib(e[T.Ha]),this.n.$a(e[T.Aa]),this.n.ab(e[T.Da]),this.l=e[T.i],this.p[this.l]=Math.floor(e[T.B]),o().dispatchEvent(new b(b.CLOCK_TRACKING_ENABLE)),e=new c(this.e,this.n,this.C,this.u,C.jd,this.p[this.l]),e.A=this.o.J(e),this.Y(e))):this.warn("#_onApiPlay() > No active viewing session.")},this.cf=function(e){this.z?(e=e.data,this.log("#_onApiStop(name="+e[T.i]+", offset="+e[T.B]+")"),this.l=e[T.i],this.p[this.l]=Math.floor(e[T.B]),e=new c(this.e,this.n,this.C,this.u,C.hd,this.p[this.l]),e.A=this.o.J(e),this.Y(e),o().dispatchEvent(new b(b.CLOCK_TRACKING_DISABLE))):this.warn("#_onApiStop() > No active viewing session.")},this.Te=function(e){this.z?(e=e.data,this.log("#_onApiClick(name="+e[T.i]+", offset="+e[T.B]+")")):this.warn("#_onApiClick() > No active viewing session.")},this.Ve=function(e){this.z?(e=e.data,this.log("#_onApiComplete(name="+e[T.i]+", offset="+e[T.B]+")")):this.warn("#_onApiComplete() > No active viewing session.")},this.af=function(e){this.z?(e=e.data,this.log("#_onApiQoSInfo(bitrate="+e[T.i]+", fps="+e[T.Zb]+", dropped_frames="+e[T.Vb]+")"),this.u.qc(e[T.kb]),this.u.Rd(e[T.Zb]),this.u.Od(e[T.Vb])):this.warn("#_onApiQoSInfo() > No active viewing session.")},this.Re=function(e){if(this.z){e=e.data,this.log("#_onApiBitrateChange(bitrate="+e[T.i]+")"),this.u.qc(e[T.kb]);var t=new c(this.e,this.n,this.C,this.u,C.ie,this.p[this.l]);t.A=this.o.J(t),this.o.gb(t),this.ea=function(e){e=this.Va.tc(t,e[T.X],!1);var n={};n[T.Fa]=e,o().dispatchEvent(new _(_.Ba,n))},e={},e[T.qa]=y.ya.Qa,o().dispatchEvent(new y(y.oa,e))}else this.warn("#_onApiBitrateChange() > No active viewing session.")},this.Se=function(){if(this.z){this.log("#_onApiBufferStart()");var e=new c(this.e,this.n,this.C,this.u,C.je,this.p[this.l]);e.A=this.o.J(e),this.Y(e)}else this.warn("#_onApiBufferStart() > No active viewing session.")},this.df=function(e){if(this.z){var t=e.data;if(this.log("#_onApiTrackError(source="+t[T.vb]+", err_id="+t[T.Yb]+", offset="+t[T.B]+")"),!this.hc||t[T.vb]===S){var n=new c(this.e,this.n,this.C,this.u,C.ke,Math.floor(t[T.B]));n.A=this.o.J(n),this.o.gb(n),this.ea=function(e){e=this.Va.tc(n,e[T.X],!1);var i=e.G[0];i.ga.id(t[T.Yb]),i.ga.source(t[T.vb]),i={},i[T.Fa]=e,o().dispatchEvent(new _(_.Ba,i))},e={},e[T.qa]=y.ya.Qa,o().dispatchEvent(new y(y.oa,e))}}else this.warn("#_onApiTrackError() > No active viewing session.")},this.$e=function(e){this.z?(this.Cb=Math.floor(e.data[T.ub]),this.log("#_onApiPodOffset(podOffset="+this.Cb+")")):this.warn("#_onApiPodOffset() > No active viewing session.")},this.bf=function(){if(this.z){this.log("#_onApiSessionComplete()");var e=new c(this.e,this.n,this.C,this.u,C.me,0);e.A=this.o.J(e),this.Y(e),this.ea=function(e){var t=new Date;e=this.Va.Jd(this.Ya||new Date(0),t,e[T.X]);var n={};n[T.Fa]=e,o().dispatchEvent(new _(_.Ba,n)),this.Ya=t},e={},e[T.qa]=y.ya.Qa,o().dispatchEvent(new y(y.oa,e)),e={},e[T.Ga]=!0,o().dispatchEvent(new b(b.CLOCK_TRACKING_DISABLE,e)),this.z=!1}else this.warn("#_onApiSessionComplete() > No active viewing session.")},this.We=function(e){if(this.z){var t=e.data;this.log("#_onApiMonitor(name="+t[T.i]+", offset="+t[T.B]+")"),this.l=t[T.i],this.p[this.l]=Math.floor(e.data[T.B])}else this.warn("#_onApiMonitor() > No active viewing session.")},this.ff=function(e){if(this.z){this.log("#_onClockTrackingTick(interval="+e.data[T.X]+")");var t=new Date;e=this.Va.Jd(this.Ya||new Date(0),t,e.data[T.X]);var n={};n[T.Fa]=e,o().dispatchEvent(new _(_.Ba,n)),this.Ya=t}else this.warn("#_onClockTrackingTick() > No active viewing session.")},this.hf=function(e){this.log("#_onNetworkCheckStatusComplete(track_ext_err="+e.data[T.gc]+")"),e=e.data[T.gc],e!==j&&(this.hc=e)},this.lc=function(e){switch(e=e.data[T.qa],this.log("#_onDataRequest(what="+e+")"),e){case y.ya.md:e={},e[T.Pa]=this.f.K,o().dispatchEvent(new y(y.mb,e))}},this.mc=function(e){this.log("#_onDataResponse()"),this.Pd(e.data)},this.nf=function(){this.log("#_resetInternalState()"),this.zb=this.z=!1,this.Bb=j,this.hc=!1,this.p={},this.Ya=this.Cb=j,this.ic=new v,this.o=new l,this.Z=new r,this.n=new m,this.C=new f,this.u=new g,this.Wa=new u,this.e=new h,this.e.K(this.f.K),this.e.type(this.f.fb)},this.Pe=function(){this.Wa.Ec(""+(new Date).getTime()+Math.floor(1e9*Math.random())),this.log("#_generateSessionId() > New session id: "+this.Wa.Ec)},this.Y=function(e){this.log("#_placeItemOnTimeline(type="+e.$+")"),this.Z.tf(e),this.o.gb(e)},this.Me=function(){if(this.zb)this.warn("#_closeMainVideo() > The main video content was already closed.");else{-1==this.p[this.e.k()]&&(this.p[this.e.k()]=this.e.duration());var e=new c(this.e,this.n,this.C,this.u,C.gd,this.p[this.e.k()]);e.A=this.o.J(e),this.Y(e),this.zb=!0}},this.Le=function(){var e=new c(this.e,this.n,this.C,this.u,C.gd,this.p[this.l]);e.A=this.o.J(e),this.Y(e),this.e.type(this.Bb),this.l=this.e.k(),this.e.q(j)},o().addEventListener(w.Tb,this.jc,this),o().addEventListener(w.La,this.ua,this),o().addEventListener(w.Uc,this.Ye,this),o().addEventListener(w.Tc,this.Xe,this),o().addEventListener(w.Qc,this.Ue,this),o().addEventListener(w.Vc,this.Ze,this),o().addEventListener(w.Yc,this.cf,this),o().addEventListener(w.Pc,this.Te,this),o().addEventListener(w.Rc,this.Ve,this),o().addEventListener(w.Wc,this.af,this),o().addEventListener(w.Nc,this.Re,this),o().addEventListener(w.Oc,this.Se,this),o().addEventListener(w.Zc,this.df,this),o().addEventListener(w.Ub,this.$e,this),o().addEventListener(w.Xc,this.bf,this),o().addEventListener(w.Sc,this.We,this),o().addEventListener(b.CLOCK_TRACKING_TICK,this.ff,this),o().addEventListener(k.sb,this.hf,this),o().addEventListener(y.oa,this.lc,this),o().addEventListener(y.mb,this.mc,this)}var i=e.Q,a=e.P,o=e.ca,s=t.H.ve,r=t.H.De,c=t.H.td,l=t.H.oe,u=t.a.ye,d=t.a.Ae,h=t.a.jb,p=t.a.xe,m=t.a.vd,f=t.a.qd,g=t.a.re,v=t.H.ge,b=t.event.Na,k=t.event.tb,y=t.event.Wb,w=t.event.Ma,_=t.event.dd,T=t.event.ba,C=t.a.pb,E=t.a.$c,S="player";i(n,e.Md),i(n,a),t.H.fe=n}(t,n),function(e){function n(e){this.N("[media-fork::HeartbeatMediaFork] > "),this.m=e,this.D=function(){var e=this.ta&&(this.m.analyticsVisitorID||this.m.marketingCloudVisitorID||this.m.visitorID);return e||this.warn("Unable to track! Is configured: "+this.ta+" analyticsVisitorID: "+this.m.analyticsVisitorID+" marketingCloudVisitorID: "+this.m.marketingCloudVisitorID+" visitorID: "+this.m.visitorID),e},this.ta=!1,this.j=new l,this.eg=new c(new d),this.yd=new r,this.nc=j,this.f={trackingServer:j,vc:j,K:j,fb:j,ia:j,la:j,channel:j,debugTracking:!1,Jc:!1}}var i=t.Q,a=t.ca,o=e.event.ba,s=e.event.Ma,r=e.M.ee,c=e.bb.qe,l=e.H.fe,u=e.a.jb,d=e.a.se;i(n,t.P),n.prototype.Wf=function(e){e&&e.hasOwnProperty("debugLogging")&&(t.Oa=e.debugLogging),this.log("#setup(configData={trackingServer: "+e.trackingServer+", jobId: "+e.vc+", streamType: "+e.fb+", publisher: "+e.K+", ovp: "+e.ia+", sdk: "+e.la+", debugLogging: "+e.ig+"})"),this.f.debugTracking=this.m.debugTracking,this.f.Jc=this.m.trackLocal,this.f.channel=this.m.Media.channel,e&&(e.hasOwnProperty("trackingServer")&&(this.f.trackingServer=e.trackingServer),e.hasOwnProperty("jobId")&&(this.f.vc=e.jobId),e.hasOwnProperty("publisher")&&(this.f.K=e.publisher),e.hasOwnProperty("ovp")&&(this.f.ia=e.ovp),e.hasOwnProperty("sdk")&&(this.f.la=e.sdk),e.hasOwnProperty("streamType")&&(this.f.fb=e.streamType===u.sd||e.streamType===u.Ce||e.streamType===u.Be||e.streamType===u.Ra?e.streamType:u.sd),this.m.Media.__primetime&&(this.f.ia="primetime"),this.nc!=j&&(this.f.la=this.nc),this.log("#setup() > Applying configuration: {account: "+this.m.account+", scTrackingServer: "+this.m.trackingServer+", sbTrackingServer: "+this.f.trackingServer+", jobId: "+this.f.trackingServer+", publisher: "+this.f.K+", ovp: "+this.f.ia+", sdk: "+this.f.la+", channel: "+this.f.channel+", debugTracking: "+this.f.debugTracking+", trackLocal: "+this.f.Jc+"}"),e={},e[o.Sb]=this.m.account,e[o.cc]=this.m.trackingServer,e[o.xb]=this.f.trackingServer,e[o.lb]=this.f.trackingServer+"/settings/",e[o.rb]=this.f.vc,e[o.Pa]=this.f.K,e[o.$b]=this.f.ia,e[o.ec]=this.f.la,e[o.bd]=this.f.channel,e[o.nb]=this.f.debugTracking,e[o.yb]=this.f.Jc,a().dispatchEvent(new s(s.Tb,e)),this.ta=!0)},n.prototype.open=function(e,t,n){if(this.log("#open(name="+e+", length="+t+", playerName="+n+")"),this.D()){var i={};i[o.Ha]=this.m.visitorID,i[o.Aa]=this.m.analyticsVisitorID,i[o.Da]=this.m.Nf,i[o.i]=e,i[o.Ca]=t,i[o.fc]=this.f.fb,i[o.Ea]=n,a().dispatchEvent(new s(s.Uc,i))}},n.prototype.openAd=function(e,t,n,i,r,c,l){if(this.log("#openAd(name="+e+", length="+t+", playerName="+n+", parentName="+i+", parentPod="+r+", parentPodPosition="+c+", cpm="+l+", )"),this.D()){var u={};u[o.i]=e,u[o.Ca]=t,u[o.Ea]=n,u[o.ac]=i,u[o.nd]=r,u[o.bc]=c,u[o.na]=l,a().dispatchEvent(new s(s.Tc,u))}},n.prototype.close=function(e){if(this.log("#close(name="+e+")"),this.D()){var t={};t[o.i]=e,a().dispatchEvent(new s(s.Qc,t))}},n.prototype.play=function(e,t,n,i,r){this.log("#play(name="+e+", offset="+t+", segmentNum="+n+", segment="+i+", segmentLength="+r+")"),this.D()&&(n={},n[o.Ha]=this.m.visitorID,n[o.Aa]=this.m.analyticsVisitorID,n[o.Da]=this.m.Nf,n[o.i]=e,n[o.B]=t,a().dispatchEvent(new s(s.Vc,n)))},n.prototype.monitor=function(e,t){this.log("#monitor(name="+e+", offset="+t+")");var n={};n[o.i]=e,n[o.B]=t,a().dispatchEvent(new s(s.Sc,n))},n.prototype.stop=function(e,t){if(this.log("#stop(name="+e+", offset="+t+")"),this.D()){var n={};n[o.i]=e,n[o.B]=t,a().dispatchEvent(new s(s.Yc,n))}},n.prototype.click=function(e,t){if(this.log("#click(name="+e+", offset="+t+")"),this.D()){var n={};n[o.i]=e,n[o.B]=t,a().dispatchEvent(new s(s.Pc,n))}},n.prototype.complete=function(e,t){if(this.log("#complete(name="+e+", offset="+t+")"),this.D()){var n={};n[o.i]=e,n[o.B]=t,a().dispatchEvent(new s(s.Rc,n))}},n.prototype.Nd=function(){Logger.hg(this,"#destroy()"),a().dispatchEvent(new s(s.La))},n.prototype.$f=function(e,t,n){if(this.log("#trackError(source="+e+", errorId="+t+", offset="+n+")"),this.D()){var i={};i[o.vb]=e,i[o.Yb]=t,i[o.B]=n,a().dispatchEvent(new s(s.Zc,i))}},n.prototype.bg=function(e,t,n){if(this.log("#updateQoSInfo(bitrate="+e+", fps="+t+", droppedFrames="+n+")"),this.D()){var i={};i[o.kb]=e,i[o.Zb]=t,i[o.Vb]=n,a().dispatchEvent(new s(s.Wc,i))}},n.prototype.wf=function(e){if(this.log("#bitrateChange(bitrate="+e+")"),this.D()){var t={};t[o.kb]=e,a().dispatchEvent(new s(s.Nc,t))}},n.prototype.xf=function(){this.log("#bufferStart()"),this.D()&&a().dispatchEvent(new s(s.Oc))},n.prototype.sf=function(e){if(this.log("#adBreakStart(offset="+e+")"),this.D()){var t={};t[o.ub]=e,a().dispatchEvent(new s(s.Ub,t))}},n.prototype.rf=function(){if(this.log("#adBreakEnd()"),this.D()){var e={};e[o.ub]=j,a().dispatchEvent(new s(s.Ub,e))}},n.prototype.Uf=function(){this.log("#sessionComplete()"),this.D()&&a().dispatchEvent(new s(s.Xc))},n.prototype.Ke=function(e){this.log("#__setPsdkVersion(version="+e+")"),this.nc=e},e.ne=n}(n),e.Ka||(e.Ka={}),e.Ka.Bf||(e.Ka.Bf=t),e.Ka.Of=n}(this),this.Je(e)}(t.s);i.callMethodWhenReady=function(t,n){e.visitor!=j&&(e.isReadyToTrack()?i[t].apply(this,n):e.callbackWhenReadyToTrack(i,i[t],n))},t.Heartbeat=i,t.uf=function(){var e,n;if(t.autoTrack&&(e=t.s.d.getElementsByTagName("VIDEO")))for(n=0;n<e.length;n++)t.attach(e[n])},t.ra(n,"load",t.uf)}function AppMeasurement(){var e=this;e.version="1.4.1";var t=window;t.s_c_in||(t.s_c_il=[],t.s_c_in=0),e._il=t.s_c_il,e._in=t.s_c_in,e._il[e._in]=e,t.s_c_in++,e._c="s_c";var n=t.sb;n||(n=null);var i,a,o=t;try{for(i=o.parent,a=o.location;i&&i.location&&a&&""+i.location!=""+a&&o.location&&""+i.location!=""+o.location&&i.location.host==a.host;)o=i,i=o.parent}catch(s){}e.eb=function(e){try{console.log(e)}catch(t){}},e.ta=function(e){return""+parseInt(e)==""+e},e.replace=function(e,t,n){return!e||e.indexOf(t)<0?e:e.split(t).join(n)},e.escape=function(t){var n,i;if(!t)return t;for(t=encodeURIComponent(t),n=0;7>n;n++)i="+~!*()'".substring(n,n+1),t.indexOf(i)>=0&&(t=e.replace(t,i,"%"+i.charCodeAt(0).toString(16).toUpperCase()));return t},e.unescape=function(t){if(!t)return t;t=t.indexOf("+")>=0?e.replace(t,"+"," "):t;try{return decodeURIComponent(t)}catch(n){}return unescape(t)},e.Va=function(){var n,i=t.location.hostname,a=e.fpCookieDomainPeriods;if(a||(a=e.cookieDomainPeriods),i&&!e.cookieDomain&&!/^[0-9.]+$/.test(i)&&(a=a?parseInt(a):2,a=a>2?a:2,n=i.lastIndexOf("."),n>=0)){for(;n>=0&&a>1;)n=i.lastIndexOf(".",n-1),a--;e.cookieDomain=n>0?i.substring(n):i}return e.cookieDomain},e.c_r=e.cookieRead=function(t){t=e.escape(t);var n=" "+e.d.cookie,i=n.indexOf(" "+t+"="),a=0>i?i:n.indexOf(";",i);return t=0>i?"":e.unescape(n.substring(i+2+t.length,0>a?n.length:a)),"[[B]]"!=t?t:""},e.c_w=e.cookieWrite=function(t,n,i){var a,o=e.Va(),s=e.cookieLifetime;return n=""+n,s=s?(""+s).toUpperCase():"",i&&"SESSION"!=s&&"NONE"!=s&&((a=""!=n?parseInt(s?s:0):-60)?(i=new Date,i.setTime(i.getTime()+1e3*a)):1==i&&(i=new Date,a=i.getYear(),i.setYear(a+5+(1900>a?1900:0)))),t&&"NONE"!=s?(e.d.cookie=t+"="+e.escape(""!=n?n:"[[B]]")+"; path=/;"+(i&&"SESSION"!=s?" expires="+i.toGMTString()+";":"")+(o?" domain="+o+";":""),e.cookieRead(t)==n):0},e.C=[],e.B=function(t,n,i){if(e.ma)return 0;e.maxDelay||(e.maxDelay=250);var a=0,o=(new Date).getTime()+e.maxDelay,s=e.d.qb,r=["webkitvisibilitychange","visibilitychange"];if(s||(s=e.d.rb),s&&"prerender"==s){if(!e.X)for(e.X=1,i=0;i<r.length;i++)e.d.addEventListener(r[i],function(){var t=e.d.qb;t||(t=e.d.rb),"visible"==t&&(e.X=0,e.delayReady())});a=1,o=0}else i||e.q("_d")&&(a=1);return a&&(e.C.push({m:t,a:n,t:o}),e.X||setTimeout(e.delayReady,e.maxDelay)),a},e.delayReady=function(){var t,n=(new Date).getTime(),i=0;for(e.q("_d")&&(i=1);e.C.length>0;){if(t=e.C.shift(),i&&!t.t&&t.t>n){e.C.unshift(t),setTimeout(e.delayReady,parseInt(e.maxDelay/2));break}e.ma=1,e[t.m].apply(e,t.a),e.ma=0}},e.setAccount=e.sa=function(t){var n,i;if(!e.B("setAccount",arguments))if(e.account=t,e.allAccounts)for(n=e.allAccounts.concat(t.split(",")),e.allAccounts=[],n.sort(),i=0;i<n.length;i++)(0==i||n[i-1]!=n[i])&&e.allAccounts.push(n[i]);else e.allAccounts=t.split(",")},e.foreachVar=function(t,n){var i,a,o,s,r="";for(o=a="",e.lightProfileID?(i=e.H,(r=e.lightTrackVars)&&(r=","+r+","+e.ba.join(",")+",")):(i=e.c,(e.pe||e.linkType)&&(r=e.linkTrackVars,a=e.linkTrackEvents,e.pe&&(o=e.pe.substring(0,1).toUpperCase()+e.pe.substring(1),e[o])&&(r=e[o].pb,a=e[o].ob)),r&&(r=","+r+","+e.z.join(",")+","),a&&r&&(r+=",events,")),n&&(n=","+n+","),a=0;a<i.length;a++)o=i[a],(s=e[o])&&(!r||r.indexOf(","+o+",")>=0)&&(!n||n.indexOf(","+o+",")>=0)&&t(o,s)},e.J=function(t,n,i,a,o){var s,r,c,l,u="",d=0;if("contextData"==t&&(t="c"),n){for(s in n)if(!Object.prototype[s]&&(!o||s.substring(0,o.length)==o)&&n[s]&&(!i||i.indexOf(","+(a?a+".":"")+s+",")>=0)){if(c=!1,d)for(r=0;r<d.length;r++)s.substring(0,d[r].length)==d[r]&&(c=!0);if(!c&&(""==u&&(u+="&"+t+"."),r=n[s],o&&(s=s.substring(o.length)),s.length>0))if(c=s.indexOf("."),c>0)r=s.substring(0,c),c=(o?o:"")+r+".",d||(d=[]),d.push(c),u+=e.J(r,n,i,a,c);else if("boolean"==typeof r&&(r=r?"true":"false"),r){if("retrieveLightData"==a&&o.indexOf(".contextData.")<0)switch(c=s.substring(0,4),l=s.substring(4),s){case"transactionID":s="xact";break;case"channel":s="ch";break;case"campaign":s="v0";break;default:e.ta(l)&&("prop"==c?s="c"+l:"eVar"==c?s="v"+l:"list"==c?s="l"+l:"hier"==c&&(s="h"+l,r=r.substring(0,255)))}u+="&"+e.escape(s)+"="+e.escape(r)}}""!=u&&(u+="&."+t)}return u},e.Xa=function(){var t,n,i,a,o,s,r,c,l="",u="",d="",h=n="";for(e.lightProfileID?(t=e.H,(u=e.lightTrackVars)&&(u=","+u+","+e.ba.join(",")+",")):(t=e.c,(e.pe||e.linkType)&&(u=e.linkTrackVars,d=e.linkTrackEvents,e.pe&&(n=e.pe.substring(0,1).toUpperCase()+e.pe.substring(1),e[n])&&(u=e[n].pb,d=e[n].ob)),u&&(u=","+u+","+e.z.join(",")+","),d&&(d=","+d+",",u&&(u+=",events,")),e.events2&&(h+=(""!=h?",":"")+e.events2)),e.AudienceManagement&&e.AudienceManagement.isReady()&&(l+=e.J("d",e.AudienceManagement.getEventCallConfigParams())),n=0;n<t.length;n++){if(a=t[n],o=e[a],i=a.substring(0,4),s=a.substring(4),!o&&"events"==a&&h&&(o=h,h=""),o&&(!u||u.indexOf(","+a+",")>=0)){switch(a){case"supplementalDataID":a="sdid";break;case"timestamp":a="ts";break;case"dynamicVariablePrefix":a="D";break;case"visitorID":a="vid";break;case"marketingCloudVisitorID":a="mid";break;case"analyticsVisitorID":a="aid";break;case"audienceManagerLocationHint":a="aamlh";break;case"audienceManagerBlob":a="aamb";break;case"authState":a="as";break;case"pageURL":a="g",o.length>255&&(e.pageURLRest=o.substring(255),o=o.substring(0,255));break;case"pageURLRest":a="-g";break;case"referrer":a="r";break;case"vmk":case"visitorMigrationKey":a="vmt";break;case"visitorMigrationServer":a="vmf",e.ssl&&e.visitorMigrationServerSecure&&(o="");break;case"visitorMigrationServerSecure":a="vmf",!e.ssl&&e.visitorMigrationServer&&(o="");break;case"charSet":a="ce";break;case"visitorNamespace":a="ns";break;case"cookieDomainPeriods":a="cdp";break;case"cookieLifetime":a="cl";break;case"variableProvider":a="vvp";break;case"currencyCode":a="cc";break;case"channel":a="ch";break;case"transactionID":a="xact";break;case"campaign":a="v0";break;case"latitude":a="lat";break;case"longitude":a="lon";break;case"resolution":a="s";break;case"colorDepth":a="c";break;case"javascriptVersion":a="j";break;case"javaEnabled":a="v";break;case"cookiesEnabled":a="k";break;case"browserWidth":a="bw";break;case"browserHeight":a="bh";break;case"connectionType":a="ct";break;case"homepage":a="hp";break;case"events":if(h&&(o+=(""!=o?",":"")+h),d)for(s=o.split(","),o="",i=0;i<s.length;i++)r=s[i],c=r.indexOf("="),c>=0&&(r=r.substring(0,c)),c=r.indexOf(":"),c>=0&&(r=r.substring(0,c)),d.indexOf(","+r+",")>=0&&(o+=(o?",":"")+s[i]);break;case"events2":o="";break;case"contextData":l+=e.J("c",e[a],u,a),o="";break;case"lightProfileID":a="mtp";break;case"lightStoreForSeconds":a="mtss",e.lightProfileID||(o="");break;case"lightIncrementBy":a="mti",e.lightProfileID||(o="");break;case"retrieveLightProfiles":a="mtsr";break;case"deleteLightProfiles":a="mtsd";break;case"retrieveLightData":e.retrieveLightProfiles&&(l+=e.J("mts",e[a],u,a)),o="";break;default:e.ta(s)&&("prop"==i?a="c"+s:"eVar"==i?a="v"+s:"list"==i?a="l"+s:"hier"==i&&(a="h"+s,o=o.substring(0,255)))}o&&(l+="&"+a+"="+("pev"!=a.substring(0,3)?e.escape(o):o))}"pev3"==a&&e.g&&(l+=e.g)}return l},e.u=function(e){var t=e.tagName;return""+e.wb!="undefined"||""+e.ib!="undefined"&&"HTML"!=(""+e.ib).toUpperCase()?"":(t=t&&t.toUpperCase?t.toUpperCase():"","SHAPE"==t&&(t=""),t&&(("INPUT"==t||"BUTTON"==t)&&e.type&&e.type.toUpperCase?t=e.type.toUpperCase():!t&&e.href&&(t="A")),t)},e.oa=function(e){var t,n,i,a=e.href?e.href:"";return t=a.indexOf(":"),n=a.indexOf("?"),i=a.indexOf("/"),a&&(0>t||n>=0&&t>n||i>=0&&t>i)&&(n=e.protocol&&e.protocol.length>1?e.protocol:l.protocol?l.protocol:"",t=l.pathname.lastIndexOf("/"),a=(n?n+"//":"")+(e.host?e.host:l.host?l.host:"")+("/"!=h.substring(0,1)?l.pathname.substring(0,0>t?0:t)+"/":"")+a),a},e.D=function(t){var n,i,a=e.u(t),o="",s=0;return a&&(n=t.protocol,i=t.onclick,!t.href||"A"!=a&&"AREA"!=a||i&&n&&!(n.toLowerCase().indexOf("javascript")<0)?i?(o=e.replace(e.replace(e.replace(e.replace(""+i,"\r",""),"\n",""),"	","")," ",""),s=2):"INPUT"==a||"SUBMIT"==a?(t.value?o=t.value:t.innerText?o=t.innerText:t.textContent&&(o=t.textContent),s=3):t.src&&"IMAGE"==a&&(o=t.src):o=e.oa(t),o)?{id:o.substring(0,100),type:s}:0},e.tb=function(t){for(var n=e.u(t),i=e.D(t);t&&!i&&"BODY"!=n;)(t=t.parentElement?t.parentElement:t.parentNode)&&(n=e.u(t),i=e.D(t));return i&&"BODY"!=n||(t=0),t&&(n=t.onclick?""+t.onclick:"",n.indexOf(".tl(")>=0||n.indexOf(".trackLink(")>=0)&&(t=0),t},e.hb=function(){var n,i,a,o,s=e.linkObject,r=e.linkType,c=e.linkURL;if(e.ca=1,s||(e.ca=0,s=e.clickObject),s){for(n=e.u(s),i=e.D(s);s&&!i&&"BODY"!=n;)(s=s.parentElement?s.parentElement:s.parentNode)&&(n=e.u(s),i=e.D(s));if(i&&"BODY"!=n||(s=0),s){var l=s.onclick?""+s.onclick:"";(l.indexOf(".tl(")>=0||l.indexOf(".trackLink(")>=0)&&(s=0)}}else e.ca=1;if(!c&&s&&(c=e.oa(s)),c&&!e.linkLeaveQueryString&&(a=c.indexOf("?"),a>=0&&(c=c.substring(0,a))),!r&&c){var u,d=0,h=0;if(e.trackDownloadLinks&&e.linkDownloadFileTypes)for(l=c.toLowerCase(),a=l.indexOf("?"),o=l.indexOf("#"),a>=0?o>=0&&a>o&&(a=o):a=o,a>=0&&(l=l.substring(0,a)),a=e.linkDownloadFileTypes.toLowerCase().split(","),o=0;o<a.length;o++)(u=a[o])&&l.substring(l.length-(u.length+1))=="."+u&&(r="d");if(e.trackExternalLinks&&!r&&(l=c.toLowerCase(),e.ra(l))&&(e.linkInternalFilters||(e.linkInternalFilters=t.location.hostname),a=0,e.linkExternalFilters?(a=e.linkExternalFilters.toLowerCase().split(","),d=1):e.linkInternalFilters&&(a=e.linkInternalFilters.toLowerCase().split(",")),a)){for(o=0;o<a.length;o++)u=a[o],l.indexOf(u)>=0&&(h=1);h?d&&(r="e"):d||(r="e")}}e.linkObject=s,e.linkURL=c,e.linkType=r,(e.trackClickMap||e.trackInlineStats)&&(e.g="",s&&(r=e.pageName,c=1,s=s.sourceIndex,r||(r=e.pageURL,c=0),t.s_objectID&&(i.id=t.s_objectID,s=i.type=1),r&&i&&i.id&&n&&(e.g="&pid="+e.escape(r.substring(0,255))+(c?"&pidt="+c:"")+"&oid="+e.escape(i.id.substring(0,100))+(i.type?"&oidt="+i.type:"")+"&ot="+n+(s?"&oi="+s:""))))},e.Ya=function(){var t=e.ca,n=e.linkType,i=e.linkURL,a=e.linkName;if(n&&(i||a)&&(n=n.toLowerCase(),"d"!=n&&"e"!=n&&(n="o"),e.pe="lnk_"+n,e.pev1=i?e.escape(i):"",e.pev2=a?e.escape(a):"",t=1),e.abort&&(t=0),e.trackClickMap||e.trackInlineStats){n={},i=0;var o,s,r,c=e.cookieRead("s_sq"),l=c?c.split("&"):0;if(c=0,l)for(o=0;o<l.length;o++)s=l[o].split("="),a=e.unescape(s[0]).split(","),s=e.unescape(s[1]),n[s]=a;if(a=e.account.split(","),t||e.g){t&&!e.g&&(c=1);for(s in n)if(!Object.prototype[s])for(o=0;o<a.length;o++)for(c&&(r=n[s].join(","),r==e.account&&(e.g+=("&"!=s.charAt(0)?"&":"")+s,n[s]=[],i=1)),l=0;l<n[s].length;l++)r=n[s][l],r==a[o]&&(c&&(e.g+="&u="+e.escape(r)+("&"!=s.charAt(0)?"&":"")+s+"&u=0"),n[s].splice(l,1),i=1);if(t||(i=1),i){c="",o=2,!t&&e.g&&(c=e.escape(a.join(","))+"="+e.escape(e.g),o=1);for(s in n)!Object.prototype[s]&&o>0&&n[s].length>0&&(c+=(c?"&":"")+e.escape(n[s].join(","))+"="+e.escape(s),o--);e.cookieWrite("s_sq",c)}}}return t},e.Za=function(){if(!e.nb){var t,n,i=new Date,a=o.location,s=n=t="",r="",c="",l="1.2",u=e.cookieWrite("s_cc","true",0)?"Y":"N",d="",h="";if(i.setUTCDate&&(l="1.3",0..toPrecision&&(l="1.5",i=[],i.forEach))){l="1.6",n=0,t={};try{n=new Iterator(t),n.next&&(l="1.7",i.reduce&&(l="1.8",l.trim&&(l="1.8.1",Date.parse&&(l="1.8.2",Object.create&&(l="1.8.5")))))}catch(p){}}t=screen.width+"x"+screen.height,s=navigator.javaEnabled()?"Y":"N",n=screen.pixelDepth?screen.pixelDepth:screen.colorDepth,r=e.w.innerWidth?e.w.innerWidth:e.d.documentElement.offsetWidth,c=e.w.innerHeight?e.w.innerHeight:e.d.documentElement.offsetHeight;try{e.b.addBehavior("#default#homePage"),d=e.b.ub(a)?"Y":"N"}catch(m){}try{e.b.addBehavior("#default#clientCaps"),h=e.b.connectionType}catch(f){}e.resolution=t,e.colorDepth=n,e.javascriptVersion=l,e.javaEnabled=s,e.cookiesEnabled=u,e.browserWidth=r,e.browserHeight=c,e.connectionType=h,e.homepage=d,e.nb=1}},e.I={},e.loadModule=function(n,i){var a=e.I[n];if(!a){a=t["AppMeasurement_Module_"+n]?new t["AppMeasurement_Module_"+n](e):{},e.I[n]=e[n]=a,a.Fa=function(){return a.Ja},a.Ka=function(t){(a.Ja=t)&&(e[n+"_onLoad"]=t,e.B(n+"_onLoad",[e,a],1)||t(e,a))};try{Object.defineProperty?Object.defineProperty(a,"onLoad",{get:a.Fa,set:a.Ka}):a._olc=1}catch(o){a._olc=1}}i&&(e[n+"_onLoad"]=i,e.B(n+"_onLoad",[e,a],1)||i(e,a))},e.q=function(t){var n,i;for(n in e.I)if(!Object.prototype[n]&&(i=e.I[n])&&(i._olc&&i.onLoad&&(i._olc=0,i.onLoad(e,i)),i[t]&&i[t]()))return 1;return 0},e.bb=function(){var t=Math.floor(1e13*Math.random()),n=e.visitorSampling,i=e.visitorSamplingGroup;i="s_vsn_"+(e.visitorNamespace?e.visitorNamespace:e.account)+(i?"_"+i:"");var a=e.cookieRead(i);if(n){if(a&&(a=parseInt(a)),!a){if(!e.cookieWrite(i,t))return 0;a=t}if(a%1e4>v)return 0}return 1},e.K=function(t,n){var i,a,o,s,r,c;for(i=0;2>i;i++)for(a=i>0?e.ia:e.c,o=0;o<a.length;o++)if(s=a[o],(r=t[s])||t["!"+s]){if(!n&&("contextData"==s||"retrieveLightData"==s)&&e[s])for(c in e[s])r[c]||(r[c]=e[s][c]);e[s]=r}},e.Aa=function(t,n){var i,a,o,s;for(i=0;2>i;i++)for(a=i>0?e.ia:e.c,o=0;o<a.length;o++)s=a[o],t[s]=e[s],!n&&!t[s]&&(t["!"+s]=1)},e.Ua=function(e){var t,n,i,a,o,s,r=0,c="",l="";if(e&&e.length>255&&(t=""+e,n=t.indexOf("?"),n>0&&(s=t.substring(n+1),t=t.substring(0,n),a=t.toLowerCase(),i=0,"http://"==a.substring(0,7)?i+=7:"https://"==a.substring(0,8)&&(i+=8),n=a.indexOf("/",i),n>0&&(a=a.substring(i,n),o=t.substring(n),t=t.substring(0,n),a.indexOf("google")>=0?r=",q,ie,start,search_key,word,kw,cd,":a.indexOf("yahoo.co")>=0&&(r=",p,ei,"),r&&s)))){if((e=s.split("&"))&&e.length>1){for(i=0;i<e.length;i++)a=e[i],n=a.indexOf("="),n>0&&r.indexOf(","+a.substring(0,n)+",")>=0?c+=(c?"&":"")+a:l+=(l?"&":"")+a;c&&l?s=c+"&"+l:l=""}n=253-(s.length-l.length)-t.length,e=t+(n>0?o.substring(0,n):"")+"?"+s}return e},e.U=!1,e.O=!1,e.Ia=function(t){e.marketingCloudVisitorID=t,e.O=!0,e.k()},e.R=!1,e.L=!1,e.Ca=function(t){e.analyticsVisitorID=t,e.L=!0,e.k()},e.T=!1,e.N=!1,e.Ea=function(t){e.audienceManagerLocationHint=t,e.N=!0,e.k()},e.S=!1,e.M=!1,e.Da=function(t){e.audienceManagerBlob=t,e.M=!0,e.k()},e.isReadyToTrack=function(){var t=!0,n=e.visitor;return n&&n.isAllowed()&&(!e.U&&!e.marketingCloudVisitorID&&n.getMarketingCloudVisitorID&&(e.U=!0,e.marketingCloudVisitorID=n.getMarketingCloudVisitorID([e,e.Ia]),e.marketingCloudVisitorID)&&(e.O=!0),!e.R&&!e.analyticsVisitorID&&n.getAnalyticsVisitorID&&(e.R=!0,e.analyticsVisitorID=n.getAnalyticsVisitorID([e,e.Ca]),e.analyticsVisitorID)&&(e.L=!0),!e.T&&!e.audienceManagerLocationHint&&n.getAudienceManagerLocationHint&&(e.T=!0,e.audienceManagerLocationHint=n.getAudienceManagerLocationHint([e,e.Ea]),e.audienceManagerLocationHint)&&(e.N=!0),!e.S&&!e.audienceManagerBlob&&n.getAudienceManagerBlob&&(e.S=!0,e.audienceManagerBlob=n.getAudienceManagerBlob([e,e.Da]),e.audienceManagerBlob)&&(e.M=!0),(e.U&&!e.O&&!e.marketingCloudVisitorID||e.R&&!e.L&&!e.analyticsVisitorID||e.T&&!e.N&&!e.audienceManagerLocationHint||e.S&&!e.M&&!e.audienceManagerBlob)&&(t=!1)),t},e.j=n,e.l=0,e.callbackWhenReadyToTrack=function(t,i,a){var o;o={},o.Oa=t,o.Na=i,o.La=a,e.j==n&&(e.j=[]),e.j.push(o),0==e.l&&(e.l=setInterval(e.k,100))},e.k=function(){var t;if(e.isReadyToTrack()&&(e.l&&(clearInterval(e.l),e.l=0),e.j!=n))for(;e.j.length>0;)t=e.j.shift(),t.Na.apply(t.Oa,t.La)},e.Ga=function(t){var i,a,o=n,s=n;if(!e.isReadyToTrack()){if(i=[],t!=n)for(a in o={},t)o[a]=t[a];return s={},e.Aa(s,!0),i.push(o),i.push(s),e.callbackWhenReadyToTrack(e,e.track,i),!0}return!1},e.Wa=function(){var t,n=e.cookieRead("s_fid"),i="",a="";t=8;var o=4;if(!n||n.indexOf("-")<0){for(n=0;16>n;n++)t=Math.floor(Math.random()*t),i+="0123456789ABCDEF".substring(t,t+1),t=Math.floor(Math.random()*o),a+="0123456789ABCDEF".substring(t,t+1),t=o=16;n=i+"-"+a}return e.cookieWrite("s_fid",n,1)||(n=0),n},e.t=e.track=function(n,i){var a,s=new Date,r="s"+Math.floor(s.getTime()/108e5)%10+Math.floor(1e13*Math.random()),c=s.getYear();c="t="+e.escape(s.getDate()+"/"+s.getMonth()+"/"+(1900>c?c+1900:c)+" "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds()+" "+s.getDay()+" "+s.getTimezoneOffset()),e.visitor&&(e.visitor.getAuthState&&(e.authState=e.visitor.getAuthState()),!e.supplementalDataID&&e.visitor.getSupplementalDataID&&(e.supplementalDataID=e.visitor.getSupplementalDataID("AppMeasurement:"+e._in,e.expectSupplementalData?!1:!0))),e.q("_s"),e.B("track",arguments)||(e.Ga(n)||(i&&e.K(i),n&&(a={},e.Aa(a,0),e.K(n)),e.bb()&&(e.analyticsVisitorID||e.marketingCloudVisitorID||(e.fid=e.Wa()),e.hb(),e.usePlugins&&e.doPlugins&&e.doPlugins(e),e.account&&(e.abort||(e.trackOffline&&!e.timestamp&&(e.timestamp=Math.floor(s.getTime()/1e3)),s=t.location,e.pageURL||(e.pageURL=s.href?s.href:s),e.referrer||e.Ba||(e.referrer=o.document.referrer,e.Ba=1),e.referrer=e.Ua(e.referrer),e.q("_g")),e.Ya()&&!e.abort&&(e.Za(),c+=e.Xa(),e.gb(r,c),e.q("_t"),e.referrer=""))),n&&e.K(a,1)),e.abort=e.supplementalDataID=e.timestamp=e.pageURLRest=e.linkObject=e.clickObject=e.linkURL=e.linkName=e.linkType=t.vb=e.pe=e.pev1=e.pev2=e.pev3=e.g=0)},e.tl=e.trackLink=function(t,n,i,a,o){return e.linkObject=t,e.linkType=n,e.linkName=i,o&&(e.i=t,e.p=o),e.track(a)
},e.trackLight=function(t,n,i,a){return e.lightProfileID=t,e.lightStoreForSeconds=n,e.lightIncrementBy=i,e.track(a)},e.clearVars=function(){var t,n;for(t=0;t<e.c.length;t++)n=e.c[t],("prop"==n.substring(0,4)||"eVar"==n.substring(0,4)||"hier"==n.substring(0,4)||"list"==n.substring(0,4)||"channel"==n||"events"==n||"eventList"==n||"products"==n||"productList"==n||"purchaseID"==n||"transactionID"==n||"state"==n||"zip"==n||"campaign"==n)&&(e[n]=void 0)},e.tagContainerMarker="",e.gb=function(t,n){var i,a=e.trackingServer;i="";var o=e.dc,s="sc.",r=e.visitorNamespace;a?e.trackingServerSecure&&e.ssl&&(a=e.trackingServerSecure):(r||(r=e.account,a=r.indexOf(","),a>=0&&(r=r.substring(0,a)),r=r.replace(/[^A-Za-z0-9]/g,"")),i||(i="2o7.net"),o=o?(""+o).toLowerCase():"d1","2o7.net"==i&&("d1"==o?o="112":"d2"==o&&(o="122"),s=""),a=r+"."+o+"."+s+i),i=e.ssl?"https://":"http://",o=e.AudienceManagement&&e.AudienceManagement.isReady(),i+=a+"/b/ss/"+e.account+"/"+(e.mobile?"5.":"")+(o?"10":"1")+"/JS-"+e.version+(e.mb?"T":"")+(e.tagContainerMarker?"-"+e.tagContainerMarker:"")+"/"+t+"?AQB=1&ndh=1&pf=1&"+(o?"callback=s_c_il["+e._in+"].AudienceManagement.passData&":"")+n+"&AQE=1",e.Sa(i),e.Y()},e.Sa=function(t){e.e||e.$a(),e.e.push(t),e.aa=e.r(),e.za()},e.$a=function(){e.e=e.cb(),e.e||(e.e=[])},e.cb=function(){var n,i;if(e.fa()){try{(i=t.localStorage.getItem(e.da()))&&(n=t.JSON.parse(i))}catch(a){}return n}},e.fa=function(){var n=!0;return e.trackOffline&&e.offlineFilename&&t.localStorage&&t.JSON||(n=!1),n},e.pa=function(){var t=0;return e.e&&(t=e.e.length),e.v&&t++,t},e.Y=function(){if(!e.v)if(e.qa=n,e.ea)e.aa>e.G&&e.xa(e.e),e.ha(500);else{var t=e.Ma();t>0?e.ha(t):(t=e.na())&&(e.v=1,e.fb(t),e.jb(t))}},e.ha=function(t){e.qa||(t||(t=0),e.qa=setTimeout(e.Y,t))},e.Ma=function(){var t;return!e.trackOffline||e.offlineThrottleDelay<=0?0:(t=e.r()-e.wa,e.offlineThrottleDelay<t?0:e.offlineThrottleDelay-t)},e.na=function(){return e.e.length>0?e.e.shift():void 0},e.fb=function(t){if(e.debugTracking){var n="AppMeasurement Debug: "+t;t=t.split("&");var i;for(i=0;i<t.length;i++)n+="\n	"+e.unescape(t[i]);e.eb(n)}},e.Ha=function(){return e.marketingCloudVisitorID||e.analyticsVisitorID},e.Q=!1;var r;try{r=JSON.parse('{"x":"y"}')}catch(c){r=null}r&&"y"==r.x?(e.Q=!0,e.P=function(e){return JSON.parse(e)}):t.$&&t.$.parseJSON?(e.P=function(e){return t.$.parseJSON(e)},e.Q=!0):e.P=function(){return null},e.jb=function(n){var i,a,o;if(e.Ha()&&n.length>2047&&("undefined"!=typeof XMLHttpRequest&&(i=new XMLHttpRequest,"withCredentials"in i?a=1:i=0),!i&&"undefined"!=typeof XDomainRequest&&(i=new XDomainRequest,a=2),i&&e.AudienceManagement&&e.AudienceManagement.isReady())&&(e.Q?i.ja=!0:i=0),!i&&e.ab&&(n=n.substring(0,2047)),!i&&e.d.createElement&&e.AudienceManagement&&e.AudienceManagement.isReady()&&(i=e.d.createElement("SCRIPT"))&&"async"in i&&((o=(o=e.d.getElementsByTagName("HEAD"))&&o[0]?o[0]:e.d.body)?(i.type="text/javascript",i.setAttribute("async","async"),a=3):i=0),i||(i=new Image,i.alt=""),i.la=function(){try{e.ga&&(clearTimeout(e.ga),e.ga=0),i.timeout&&(clearTimeout(i.timeout),i.timeout=0)}catch(t){}},i.onload=i.lb=function(){if(i.la(),e.Ra(),e.V(),e.v=0,e.Y(),i.ja){i.ja=!1;try{var t=e.P(i.responseText);AudienceManagement.passData(t)}catch(n){}}},i.onabort=i.onerror=i.Ta=function(){i.la(),(e.trackOffline||e.ea)&&e.v&&e.e.unshift(e.Qa),e.v=0,e.aa>e.G&&e.xa(e.e),e.V(),e.ha(500)},i.onreadystatechange=function(){4==i.readyState&&(200==i.status?i.lb():i.Ta())},e.wa=e.r(),1==a||2==a){var s=n.indexOf("?");o=n.substring(0,s),s=n.substring(s+1),s=s.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),1==a?(i.open("POST",o,!0),i.send(s)):2==a&&(i.open("POST",o),i.send(s))}else if(i.src=n,3==a){if(e.ua)try{o.removeChild(e.ua)}catch(r){}o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),e.ua=e.Pa}i.abort&&(e.ga=setTimeout(i.abort,5e3)),e.Qa=n,e.Pa=t["s_i_"+e.replace(e.account,",","_")]=i,(e.useForcedLinkTracking&&e.A||e.p)&&(e.forcedLinkTrackingTimeout||(e.forcedLinkTrackingTimeout=250),e.W=setTimeout(e.V,e.forcedLinkTrackingTimeout))},e.Ra=function(){if(e.fa()&&!(e.va>e.G))try{t.localStorage.removeItem(e.da()),e.va=e.r()}catch(n){}},e.xa=function(n){if(e.fa()){e.za();try{t.localStorage.setItem(e.da(),t.JSON.stringify(n)),e.G=e.r()}catch(i){}}},e.za=function(){if(e.trackOffline)for((!e.offlineLimit||e.offlineLimit<=0)&&(e.offlineLimit=10);e.e.length>e.offlineLimit;)e.na()},e.forceOffline=function(){e.ea=!0},e.forceOnline=function(){e.ea=!1},e.da=function(){return e.offlineFilename+"-"+e.visitorNamespace+e.account},e.r=function(){return(new Date).getTime()},e.ra=function(e){return e=e.toLowerCase(),0!=e.indexOf("#")&&0!=e.indexOf("about:")&&0!=e.indexOf("opera:")&&0!=e.indexOf("javascript:")?!0:!1},e.setTagContainer=function(t){var n,i,a;for(e.mb=t,n=0;n<e._il.length;n++)if((i=e._il[n])&&"s_l"==i._c&&i.tagContainerName==t){if(e.K(i),i.lmq)for(n=0;n<i.lmq.length;n++)a=i.lmq[n],e.loadModule(a.n);if(i.ml)for(a in i.ml)if(e[a])for(n in t=e[a],a=i.ml[a])!Object.prototype[n]&&("function"!=typeof a[n]||(""+a[n]).indexOf("s_c_il")<0)&&(t[n]=a[n]);if(i.mmq)for(n=0;n<i.mmq.length;n++)a=i.mmq[n],e[a.m]&&(t=e[a.m],t[a.f]&&"function"==typeof t[a.f]&&(a.a?t[a.f].apply(t,a.a):t[a.f].apply(t)));if(i.tq)for(n=0;n<i.tq.length;n++)e.track(i.tq[n]);i.s=e;break}},e.Util={urlEncode:e.escape,urlDecode:e.unescape,cookieRead:e.cookieRead,cookieWrite:e.cookieWrite,getQueryParam:function(n,i,a){var o;return i||(i=e.pageURL?e.pageURL:t.location),a||(a="&"),n&&i&&(i=""+i,o=i.indexOf("?"),o>=0&&(i=a+i.substring(o+1)+a,o=i.indexOf(a+n+"="),o>=0&&(i=i.substring(o+a.length+n.length+1),o=i.indexOf(a),o>=0&&(i=i.substring(0,o)),i.length>0)))?e.unescape(i):""}},e.z=["supplementalDataID","timestamp","dynamicVariablePrefix","visitorID","marketingCloudVisitorID","analyticsVisitorID","audienceManagerLocationHint","authState","fid","vmk","visitorMigrationKey","visitorMigrationServer","visitorMigrationServerSecure","charSet","visitorNamespace","cookieDomainPeriods","fpCookieDomainPeriods","cookieLifetime","pageName","pageURL","referrer","contextData","currencyCode","lightProfileID","lightStoreForSeconds","lightIncrementBy","retrieveLightProfiles","deleteLightProfiles","retrieveLightData","pe","pev1","pev2","pev3","pageURLRest"],e.c=e.z.concat(["purchaseID","variableProvider","channel","server","pageType","transactionID","campaign","state","zip","events","events2","products","audienceManagerBlob","tnt"]),e.ba=["timestamp","charSet","visitorNamespace","cookieDomainPeriods","cookieLifetime","contextData","lightProfileID","lightStoreForSeconds","lightIncrementBy"],e.H=e.ba.slice(0),e.ia=["account","allAccounts","debugTracking","visitor","trackOffline","offlineLimit","offlineThrottleDelay","offlineFilename","usePlugins","doPlugins","configURL","visitorSampling","visitorSamplingGroup","linkObject","clickObject","linkURL","linkName","linkType","trackDownloadLinks","trackExternalLinks","trackClickMap","trackInlineStats","linkLeaveQueryString","linkTrackVars","linkTrackEvents","linkDownloadFileTypes","linkExternalFilters","linkInternalFilters","useForcedLinkTracking","forcedLinkTrackingTimeout","trackingServer","trackingServerSecure","ssl","abort","mobile","dc","lightTrackVars","maxDelay","expectSupplementalData","AudienceManagement"];for(i=0;250>=i;i++)76>i&&(e.c.push("prop"+i),e.H.push("prop"+i)),e.c.push("eVar"+i),e.H.push("eVar"+i),6>i&&e.c.push("hier"+i),4>i&&e.c.push("list"+i);i=["latitude","longitude","resolution","colorDepth","javascriptVersion","javaEnabled","cookiesEnabled","browserWidth","browserHeight","connectionType","homepage"],e.c=e.c.concat(i),e.z=e.z.concat(i),e.ssl=t.location.protocol.toLowerCase().indexOf("https")>=0,e.charSet="UTF-8",e.contextData={},e.offlineThrottleDelay=0,e.offlineFilename="AppMeasurement.offline",e.wa=0,e.aa=0,e.G=0,e.va=0,e.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",e.w=t,e.d=t.document;try{e.ab="Microsoft Internet Explorer"==navigator.appName}catch(u){}e.V=function(){e.W&&(t.clearTimeout(e.W),e.W=n),e.i&&e.A&&e.i.dispatchEvent(e.A),e.p&&("function"==typeof e.p?e.p():e.i&&e.i.href&&(e.d.location=e.i.href)),e.i=e.A=e.p=0},e.ya=function(){e.b=e.d.body,e.b?(e.o=function(n){var i,a,o,s,r;if(!(e.d&&e.d.getElementById("cppXYctnr")||n&&n["s_fe_"+e._in])){if(e.ka){if(!e.useForcedLinkTracking)return e.b.removeEventListener("click",e.o,!0),void(e.ka=e.useForcedLinkTracking=0);e.b.removeEventListener("click",e.o,!1)}else e.useForcedLinkTracking=0;e.clickObject=n.srcElement?n.srcElement:n.target;try{if(!e.clickObject||e.F&&e.F==e.clickObject||!(e.clickObject.tagName||e.clickObject.parentElement||e.clickObject.parentNode))e.clickObject=0;else{var c=e.F=e.clickObject;if(e.Z&&(clearTimeout(e.Z),e.Z=0),e.Z=setTimeout(function(){e.F==c&&(e.F=0)},1e4),o=e.pa(),e.track(),o<e.pa()&&e.useForcedLinkTracking&&n.target){for(s=n.target;s&&s!=e.b&&"A"!=s.tagName.toUpperCase()&&"AREA"!=s.tagName.toUpperCase();)s=s.parentNode;if(s&&(r=s.href,e.ra(r)||(r=0),a=s.target,n.target.dispatchEvent&&r&&(!a||"_self"==a||"_top"==a||"_parent"==a||t.name&&a==t.name))){try{i=e.d.createEvent("MouseEvents")}catch(l){i=new t.MouseEvent}if(i){try{i.initMouseEvent("click",n.bubbles,n.cancelable,n.view,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget)}catch(u){i=0}i&&(i["s_fe_"+e._in]=i.s_fe=1,n.stopPropagation(),n.kb&&n.kb(),n.preventDefault(),e.i=n.target,e.A=i)}}}}}catch(d){e.clickObject=0}}},e.b&&e.b.attachEvent?e.b.attachEvent("onclick",e.o):e.b&&e.b.addEventListener&&(navigator&&(navigator.userAgent.indexOf("WebKit")>=0&&e.d.createEvent||navigator.userAgent.indexOf("Firefox/2")>=0&&t.MouseEvent)&&(e.ka=1,e.useForcedLinkTracking=1,e.b.addEventListener("click",e.o,!0)),e.b.addEventListener("click",e.o,!1))):setTimeout(e.ya,30)},e.ya()}function s_gi(e){var t,n,i,a,o,s=window.s_c_il,r=e.split(","),c=0;if(s)for(n=0;!c&&n<s.length;){if(t=s[n],"s_c"==t._c&&(t.account||t.oun))if(t.account&&t.account==e)c=1;else for(i=t.account?t.account:t.oun,i=t.allAccounts?t.allAccounts:i.split(","),a=0;a<r.length;a++)for(o=0;o<i.length;o++)r[a]==i[o]&&(c=1);n++}return c||(t=new AppMeasurement),t.setAccount?t.setAccount(e):t.sa&&t.sa(e),t}function s_pgicq(){var e,t,n,i=window,a=i.s_giq;if(a)for(e=0;e<a.length;e++)t=a[e],n=s_gi(t.oun),n.setAccount(t.un),n.setTagContainer(t.tagContainerName);i.s_giq=0}!function(){function e(t,i){function a(e,t){return function(){return e.apply(t,arguments)}}var o;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],r=this,c=0,l=s.length;l>c;c++)r[s[c]]=a(r[s[c]],r);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var a=Node.prototype.removeEventListener;"click"===e?a.call(t,e,n.hijacked||n,i):a.call(t,e,n,i)},t.addEventListener=function(e,n,i){var a=Node.prototype.addEventListener;"click"===e?a.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):a.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,a=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=i&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,o;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!a){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,s,r,c,l,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(l=e.changedTouches[0],u=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=u.tagName.toLowerCase(),"label"===r){if(t=this.findControl(u)){if(this.focus(u),n)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-s>100||i&&window.top!==window&&"input"===r?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),i&&"select"===r||(this.targetElement=null,e.preventDefault()),!1);return i&&!a&&(c=u.fastClickScrollParent,c&&c.fastClickLastScrollTop!==c.scrollTop)?!0:(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,a,o;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(a=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),a[1]>=10&&a[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction?!0:!1)},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("fastclick",[],function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),define("common/utils/robusts",["common/utils/_","common/utils/robust"],function(e,t){return function(n){e.forEach(n,function(e){t(e[0],e[1])})}}),define("common/modules/analytics/foresee-survey",["common/utils/config","common/utils/cookies","common/utils/detect"],function(e,t,n){function i(){require(["js!foresee.js"])}function a(){var a="Network Front"===e.page.contentType,o=n.isBreakpoint({max:"mobile"})?.008:.006,s=Math.random()<=o,r=/forceForesee/.test(location.hash);t.get("GU_TEST")||a||!(window.openForeseeWhenReady||s||r)||i(),window.guardian&&(window.guardian.openForesee=i)}return{load:a}}),define("common/modules/analytics/livestats",["common/utils/cookies","common/utils/storage","common/modules/analytics/beacon","common/modules/experiments/ab"],function(e,t,n,i){function a(){var e="gu.session";return"undefined"!=typeof s?s:(t.session.get(e)?s=!1:(t.session.set(e,"true"),s=!0),s)}function o(e,t){var n,i=[];for(n in e)i.push(n+"="+encodeURIComponent(e[n]));return t+"?"+i.join("&")}var s;return{log:function(){var e=i.getAbLoggableObject();e.type=a()?"session":"view",n.fire(o(e,"/ab.gif"))}}}),define("common/modules/analytics/media-listener",["bean","common/utils/mediator"],function(e,t){return function(){if(window.matchMedia){var e=window.matchMedia("print");e.addListener(function(){e.matches&&t.emit("module:clickstream:interaction","print")})}}});var s=s_gi(s_account);s.charSet="UTF-8",s.currencyCode="GBP",s.trackDownloadLinks=!0,s.trackExternalLinks=!1,s.trackInlineStats=!0,s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",s.linkInternalFilters="javascript:,adinfo-guardian.co.uk,dating.guardian.co.uk,guardian.co.uk,guardian.greatgetaways.co.uk,guardian.lcplc-online.co.uk,guardian.oddschecker.com,guardian.pickthescore.co.uk,guardian.sportinglife.com,guardian.touch-line.com,guardian.unbiased.co.uk,guardianapis.com,guardianapps.co.uk,guardianbooks.co.uk,guardianbookshop.co.uk,guardiancottages.co.uk,guardiandigitalcomparison.co.uk,guardiandirectsubs.co.uk,guardianeatright.co.uk,guardianecostore.co.uk,guardianenergycomparison.co.uk,guardianenergycomparison.com,guardianfashionstore.co.uk,guardiangardencentre.co.uk,guardiangiftexperiences.co.uk,guardianholidayoffers.co.uk,guardianhomeexchange.co.uk,guardianhomeexchange.com,guardianinvesting.co.uk,guardianjobs.co.uk,guardianjobs.com,guardianjobs.mobi,guardianjobsrecruiter.co.uk,guardiannews.com,guardian-newspaper.com,guardianoffers.co.uk,guardianprofessional.co.uk,guardianpublic.co.uk,guardiansubscriptions.co.uk,guardiantickets.co.uk,guardianvouchercodes.co.uk,guardianweekly.co.uk,guardianweekly.com,id.guardian.co.uk,ivebeenthere.co.uk,jobs.guardian.co.uk,kable.co.uk,money-deals.co.uk,mps-expenses.guardian.co.uk,ogenterprises.co.uk,ogtravelinsurance.co.uk,sixsongsof.me,sixwordmemoirs.co.uk,smarthealthcare.com,sofacinema.co.uk,static.guim.co.uk,theguardian.co.uk,theguardian.com,traffic.outbrain.com,tvlistings.guardian.co.uk",s.linkLeaveQueryString=!1,s.linkTrackVars="None",s.linkTrackEvents="None",s._tpDST={2012:"3/25,10/28",2013:"3/31,10/27",2014:"3/30,10/26",2015:"3/29,10/25",2016:"3/27,10/30",2017:"3/26,10/29",2018:"3/25,10/28",2019:"3/31,10/27"},s.usePlugins=!0,s.doPlugins=s_doPlugins;var s_sv_dynamic_root="survey.112.2o7.net/survey/dynamic",s_sv_gather_root="survey.112.2o7.net/survey/gather";s.loadMediaModule=function(e,t){var n=this;n.loadModule("Media"),n.Media.autoTrack=!1,n.Media.trackWhilePlaying=!0,n.Media.trackSeconds=15,n.Media.trackVars="events,eVar7,eVar43,eVar44,prop44,eVar47,eVar48,eVar56,eVar61",n.Media.trackEvents="event17,event18,event21,event22,event23,event57,event63",n.Media.trackMilestones="25,50,75",n.Media.segmentByMilestones=!0,n.Media.trackUsingContextData=!0,n.Media.contextDataMapping={"a.media.name":"eVar44,prop44","a.media.segment":"eVar48","a.contentType":"eVar43","a.media.timePlayed":"event57","a.media.view":"event17","a.media.segmentView":"event63","a.media.complete":"event18","a.media.milestones":{25:"event21",50:"event22",75:"event23"}},n.Media.monitor=function(e,t){"OPEN"==t.event&&(e.eVar7=e.pageName,e.eVar61=e._GUVideo.restricted?"restricted":"not restricted",e._GUVideo.ad?e.eVar47="video ad":(e.eVar47="video content",e.eVar56=e._GUVideo.provider),e.Media.track(t.name))},n._GUVideo={},n._GUVideo.provider=e,n._GUVideo.restricted=t},s.trackVideoContent=function(e,t){var n=this;n.Media.autoTrack=!1,n.Media.trackVars="events,eVar7,eVar11,eVar43,eVar44,prop44,eVar47,eVar48,eVar56,eVar61",n.Media.trackEvents="event17,event18,event21,event22,event23,event57,event63",n.Media.trackMilestones="25,50,75",n.Media.segmentByMilestones=!0,n.Media.trackUsingContextData=!0,n.Media.contextDataMapping={"a.media.name":"eVar44,prop44","a.media.segment":"eVar48","a.contentType":"eVar43","a.media.timePlayed":"event57","a.media.view":"event17","a.media.segmentView":"event63","a.media.complete":"event18","a.media.milestones":{25:"event21",50:"event22",75:"event23"}},n._GUVideo.ad=!1,n._GUVideo.provider=e,n._GUVideo.restricted=t},s.trackVideoAd=function(){var e=this;e.Media.autoTrack=!1,e.Media.trackVars="events,eVar7,eVar11,eVar43,prop44,eVar44,eVar47,eVar56,eVar61",e.Media.trackEvents="event57,event59,event64",e.Media.segmentByMilestones=!1,e.Media.trackUsingContextData=!0,e.Media.contextDataMapping={"a.media.name":"eVar44,prop44","a.contentType":"eVar43","a.media.timePlayed":"event57","a.media.view":"event59","a.media.complete":"event64"},e._GUVideo.ad=!0,e._GUVideo.restricted=!1},s.trackingServer="hits.guardian.co.uk",s.trackingServerSecure="hits-secure.guardian.co.uk",s.visitorNamespace="guardian",s.getValOnce=new Function("v","c","e","t","var s=this,a=new Date,v=v?v:'',c=c?c:'s_gvo',e=e?e:0,i=t=='m'?60000:86400000;k=s.c_r(c);if(v){a.setTime(a.getTime()+e*i);s.c_w(c,v,e==0?0:a);}return v==k?'':v"),s.getDaysSinceLastVisit=new Function("c","var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getTime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.setTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f5='Less than 1 day';cval=s.c_r(c);if(cval && cval.length==0){s.c_w(c,ct,e);s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d>30*60*1000){if(d>30*day){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d<30*day+1 && d>7*day){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d<7*day+1 && d>day){s.c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d<day+1){s.c_w(c,ct,e);s.c_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) return f0;else if(cval_s!=f1&&cval_s!=f2&&cval_s!=f3&&cval_s!=f4&&cval_s!=f5) return '';else return cval_s;"),s.crossVisitParticipation=new Function("v","cn","ex","ct","dl","ev","dv","var s=this,ce;if(typeof(dv)==='undefined')dv=0;if(s.events&&ev){var ay=s.split(ev,',');var ea=s.split(s.events,',');for(var u=0;u<ay.length;u++){for(var x=0;x<ea.length;x++){if(ay[u]==ea[x]){ce=1;}}}}if(!v||v==''){if(ce){s.c_w(cn,'');return'';}else return'';}v=escape(v);var arry=new Array(),a=new Array(),c=s.c_r(cn),g=0,h=new Array();if(c&&c!=''){arry=s.split(c,'],[');for(q=0;q<arry.length;q++){z=arry[q];z=s.repl(z,'[','');z=s.repl(z,']','');z=s.repl(z,\"'\",'');arry[q]=s.split(z,',')}}var e=new Date();e.setFullYear(e.getFullYear()+5);if(dv==0&&arry.length>0&&arry[arry.length-1][0]==v)arry[arry.length-1]=[v,new Date().getTime()];else arry[arry.length]=[v,new Date().getTime()];var start=arry.length-ct<0?0:arry.length-ct;var td=new Date();for(var x=start;x<arry.length;x++){var diff=Math.round((td.getTime()-arry[x][1])/86400000);if(diff<ex){h[g]=unescape(arry[x][0]);a[g]=[arry[x][0],arry[x][1]];g++;}}var data=s.join(a,{delim:',',front:'[',back:']',wrap:\"'\"});s.c_w(cn,data,e);var r=s.join(h,{delim:dl});if(ce)s.c_w(cn,'');return r;"),s.getNewRepeat=new Function("d","cn","var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length==0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'New';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}"),s.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),s.getLoadTimeDim=new Function("","var t='';if(typeof performance!=='undefined'){t=(new Date()).getTime()-performance.timing.requestStart;t=t/1000;t=(t>=0&&t<500)?t.toFixed(1):'';}return t;"),s.inList=new Function("v","l","d","var s=this,ar=Array(),i=0,d=(d)?d:',';if(typeof(l)=='string'){if(s.split)ar=s.split(l,d);else if(l.split)ar=l.split(d);else return-1}else ar=l;while(i<ar.length){if(v==ar[i])return true;i++}return false;"),s.apl=new Function("l","v","d","u","var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)l=l?l+d+v:v;return l"),s.getVisitStart=new Function("c","var s=this,n,t=new Date;if(typeof s.callType=='function'&&s.callType()=='+')return 0;if(!c)c='s_visit';t.setTime(t.getTime()+18e5);n=s.c_r(c)?0:1;if(!s.c_w(c,1,t))s.c_w(c,1,0);if(!s.c_r(c))n=0;return n"),s.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),s.getTimeParting=new Function("h","z","var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMonth()!=0){return'Data Not Available';}else{var H,M,D,W,U,ds,de,tm,tt,da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d=new Date(),a=[];z=z?z:0;z=parseFloat(z);if(s._tpDST && s._tpDST[d.getFullYear()]){var dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&&d>ds&&d<de){z=z+1;}else if(h=='s'&&(d>de||d<ds)){z=z+1;}}d=d.getTime()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getHours();M=d.getMinutes();M=(M<10)?'0'+M:M;D=d.getDay();U='AM';W='Weekday';if(H>=12){U='PM';H=H-12;}if(H==0){H=12;}if(D==6||D==0){W='Weekend';}D=da[D];tm=H+':'+M+U;tt=H+':'+((M>30)?'30':'00')+U;a=[tm,tt,D,W];return a;}"),s.getParamValue=function(e){var t,n=window.location.search,i="&";return e&&n&&(t=n.indexOf("?"),t>=0&&(n=i+n.substring(t+1)+i,t=n.indexOf(i+e+"="),t>=0&&(n=n.substring(t+i.length+e.length+1),t=n.indexOf(i),t>=0&&(n=n.substring(0,t)),n.length>0)))?s.unescape(n):""};var j=null;AppMeasurement.getInstance=s_gi,window.s_objectID||(window.s_objectID=0),s_pgicq(),define("omniture",function(e){return function(){var t;return t||e.s}}(this)),define("common/utils/date-formats",[],function(){function e(e){return new Date(e).toISOString().substr(0,10).replace(/-/g,"/")}return{utcDateString:e}}),define("text!common/views/history/tag.html",[],function(){return'<li class="inline-list__item">\n    <a href="/<%=id%>" class="button button--small button--tag button--secondary" data-link-name="<%=index%> | <%=name%>"><%=name%></a>\n</li>\n'}),define("text!common/views/history/mega-nav.html",[],function(){return'<li class="global-navigation__section js-global-navigation__section--history" data-link-name="shortcuts">\n    <span class="global-navigation__title global-navigation__title--history">recently visited</span>\n    <ul class="global-navigation__children global-navigation__children--history">\n        <%=tags%>\n        <a class="button button--small button--tag button--tertiary" href="/preferences" data-link-name="edit">edit these</a>\n    </ul>\n</li>\n'}),define("common/modules/onward/history",["fastdom","common/utils/$","common/utils/_","common/utils/config","common/utils/template","common/utils/storage","common/utils/url","common/modules/experiments/ab","text!common/views/history/tag.html","text!common/views/history/mega-nav.html"],function(e,t,n,i,a,o,s,r,c,l){function u(e){return x=e,o.local.set(q,e)}function d(e){return N=e,o.local.set($,e)}function h(){return x=x||o.local.get(q)||[]}function p(){return N||(N=o.local.get($),n.isObject(N)&&n.isObject(N.tags)&&n.isNumber(N.periodEnd)||(N={periodEnd:K,tags:{},showInMegaNav:!0})),N}function m(e){var t=p();delete t.tags[e],d(t)}function f(e){return(n.find(h(),function(t){return t[0]===e})||[])[1]>1}function g(e,t){var i=t||K,a=i-e.periodEnd;return 0!==a&&(e.periodEnd=i,n.each(e.tags,function(t,i){var o=n.chain(R).map(function(e){var i=n.chain(t[e.indexInRecord]).map(function(e){var t=e[0]+a;return B>t&&t>=0?[t,e[1]]:!1}).compact().value();return i.length>1||1===i.length&&i[0][0]<U?i:[]}).value();n.some(o,function(e){return e.length})?e.tags[i]=[t[0]].concat(o):delete e.tags[i]})),e}function v(e){var t=p().tags,i=n.keys(t),a=n.extend({number:100,weights:{},thresholds:{}},e);return i=a.whitelist?i.filter(function(e){return a.whitelist.indexOf(e)>-1}):i,i=a.blacklist?i.filter(function(e){return-1===a.blacklist.indexOf(e)}):i,n.chain(i).map(function(e){var i=t[e],o=n.reduce(R,function(e,t){return e+k(i[t.indexInRecord],a.weights[t.type],a.thresholds[t.type])},0);return{idAndName:[e,i[0]],rank:o}}).compact().sortBy("rank").last(a.number).reverse().pluck("idAndName").value()}function b(e){var t=e&&e.flush;return A=!t&&A||v({blacklist:E(),number:10,weights:{content:1,front:5},thresholds:{content:5,front:1}})}function k(e,t,i){var a,o=0;return t=t||1,i=i||1,a=n.reduce(e,function(e,n){var i=n[0],a=n[1];return o+=a,e+t*(9+a)*(B-i)},0),i>o?0:a}function y(e){return(e||"").split(",")[0]}function w(e){return e?(e=e.replace(/^\/|\/$/g,""),e.match(G)&&(e=e.replace(Y,"")),e=e.split("/"),e=2===e.length&&e[0]===e[1]?[e[0]]:e,e.join("/")):""}function _(){x=void 0,N=void 0,o.local.remove(q),o.local.remove($)
}function T(e){var t,i=e.pageId,a=0;e.isFront||(t=h().filter(function(e){var t=n.isArray(e),o=t&&e[0]===i;return a=o?e[1]:a,t&&!o}),t.unshift([i,a+1]),u(t.slice(0,H)))}function C(e,t){var i=g(p(),t),a=w(e.pageId),o=!1;n.chain(F).reduceRight(function(t,n){var i=w(y(e[n.tid])),s=i&&y(e[n.tname]);return i&&s&&(t[i]=s),o=o||i===a,t},{}).each(function(e,t){var a,s,r=i.tags[t]||[];n.forEach(R,function(e){r[e.indexInRecord]=r[e.indexInRecord]||[]}),r[0]=e,a=r[o?2:1],s=n.find(a,function(e){return 0===e[0]}),s?s[1]=s[1]+1:a.unshift([0,1]),i.tags[t]=r}),d(i)}function E(){return O=O||t(".js-navigation-header .js-top-navigation a").map(function(e){return w(s.getPath(t(e).attr("href")))})}function S(){return t(".js-global-navigation")}function D(){var t,n;p().showInMegaNav!==!1&&(z&&I(),t=b(),t.length&&(n=a(l,{tags:t.map(j).join("")}),e.write(function(){S().prepend(n)}),z=!0))}function I(){S().each(function(n){e.write(function(){t(".js-global-navigation__section--history",n).remove()})}),z=!1}function M(){return p().showInMegaNav!==!1}function L(e){var t=p();t.showInMegaNav=!!e,t.showInMegaNav?D():I(),d(t)}function j(e,t){return a(c,{id:e[0],name:e[1],index:t+1})}var x,N,A,O,P=["uk","us","au"],V=["business","commentisfree","culture","environment","media","money","sport","technology"],F=[{tid:"section",tname:"sectionName"},{tid:"keywordIds",tname:"keywords"},{tid:"seriesId",tname:"series"},{tid:"authorIds",tname:"author"}],R=[{type:"content",indexInRecord:1},{type:"front",indexInRecord:2}],B=30,U=10,H=50,q="gu.history",$="gu.history.summary",K=Math.floor(Date.now()/864e5),z=!1,G=new RegExp("^("+P.join("|")+")/("+V.join("|")+")$"),Y=new RegExp("^("+P.join("|")+")/");return{logHistory:T,logSummary:C,showInMegaNav:D,showInMegaNavEnable:L,showInMegaNavEnabled:M,getPopular:v,getPopularFiltered:b,deleteFromSummary:m,isRevisit:f,reset:_,test:{getSummary:p,getHistory:h,pruneSummary:g}}}),define("common/modules/analytics/omniture",["omniture","common/utils/$","common/utils/_","common/utils/config","common/utils/cookies","common/utils/date-formats","common/utils/detect","common/utils/mediator","common/utils/pad","common/utils/storage","common/modules/analytics/beacon","common/modules/analytics/mvt-cookie","common/modules/experiments/ab","common/modules/onward/history","common/modules/identity/api"],function(e,t,n,i,a,o,s,r,c,l,u,d,h,p,m){function f(){this.isEmbed=!!guardian.isEmbed,this.s=window.s,this.pageviewSent=!1,this.addHandlers()}var g="s_ni",v="gu.analytics.referrerVars";return f.prototype.addHandlers=function(){r.on("module:clickstream:interaction",this.trackLinkImmediate.bind(this)),r.on("module:clickstream:click",this.logTag.bind(this)),r.on("module:analytics:omniture:pageview:sent",function(){this.isEmbed||u.fire("/count/pva.gif")}.bind(this))},f.prototype.logView=function(){this.s.t(),this.confirmPageView()},f.prototype.generateTrackingImageString=function(){return"s_i_"+window.s_account.split(",").join("_")},f.prototype.getChannel=function(){return"Network Front"===i.page.contentType?"Network Front":this.isEmbed?"Embedded":i.page.section||""},f.prototype.logTag=function(e){var t,n;if(e.validTarget)if(e.sameHost&&!e.samePage){t={pageName:this.s.pageName,tag:e.tag||"untracked",time:(new Date).getTime()};try{sessionStorage.setItem(g,t.tag)}catch(i){}l.session.set(v,t)}else n=e.samePage?!0:e.target,this.trackLink(n,e.tag,{customEventProperties:e.customEventProperties})},f.prototype.populateEventProperties=function(t){this.s.linkTrackVars="channel,prop2,prop3,prop4,prop8,prop9,prop10,prop13,prop25,prop31,prop37,prop47,prop51,prop61,prop64,prop65,prop74,eVar7,eVar37,eVar38,eVar39,eVar50,events",this.s.linkTrackEvents="event37",this.s.events=this.s.apl(this.s.events,"event37",","),this.s.eVar37=i.page.contentType?i.page.contentType+":"+t:t,this.s.eVar7="D=pageName",this.s.prop37="D=v37",/social/.test(t)&&(e.linkTrackVars+=",eVar12",e.linkTrackEvents+=",event16",e.events+=",event16",e.eVar12=t)},f.prototype.trackLinkImmediate=function(e){this.trackLink(!0,e)},f.prototype.trackLink=function(e,t,i){i=i||{},this.populateEventProperties(t),n.assign(this.s,i.customEventProperties),this.s.tl(e,"o",t),n.forEach(i.customEventProperties,function(e,t){delete this.s[t]})},f.prototype.populatePageProperties=function(){var e,a=new Date,r=this.s.getTimeParting("n","+0"),u=l.session.get(v),f="frontend",b=h.makeOmnitureTag(document),k=d.getMvtFullId(),y=i.page.webPublicationDate;this.s.cookieDomainPeriods="2",this.s.linkInternalFilters+=",localhost,gucode.co.uk,gucode.com,guardiannews.com,int.gnl,proxylocal.com,theguardian.com",this.s.trackingServer="hits.theguardian.com",this.s.trackingServerSecure="hits-secure.theguardian.com",this.s.ce="UTF-8",this.s.pageName=i.page.analyticsName,this.s.prop1=i.page.headline||"",this.s.eVar1=a.getFullYear()+"/"+c(a.getMonth()+1,2)+"/"+c(a.getDate(),2),m.getUserFromCookie()&&(this.s.prop2="GUID:"+m.getUserFromCookie().id,this.s.eVar2="GUID:"+m.getUserFromCookie().id),this.s.prop3=i.page.publication||"",this.s.channel=this.getChannel(),this.s.prop4=i.page.keywords||"",this.s.prop6=i.page.author||"",this.s.prop7=y?o.utcDateString(y):"",this.s.prop8=i.page.pageCode||"",this.s.prop9=i.page.contentType||"",this.s.prop10=i.page.tones||"",this.s.prop13=i.page.series||"",this.s.eVar18=s.getBreakpoint(),this.s.eVar21=(window.innerWidth||document.documentElement.clientWidth)+"x"+(window.innerHeight||document.documentElement.clientHeight),this.s.eVar32=s.getOrientation(),this.s.prop20=r[2]+":"+r[1],this.s.eVar20="D=c20",this.s.prop25=i.page.blogs||"",this.s.prop60=s.isFireFoxOSApp()?"firefoxosapp":null,this.s.prop19=f,this.s.prop31=m.getUserFromCookie()?"registered user":"guest user",this.s.eVar31=m.getUserFromCookie()?"registered user":"guest user",this.s.prop40=s.adblockInUse,this.s.prop47=i.page.edition||"",this.s.prop51=i.page.allowUserGeneratedContent?"witness-contribution-cta-shown":null,this.s.eVar51=b,this.s.list1=b,this.s.list2=n.uniq(t("[data-component]").map(function(e){return t(e).attr("data-component")})).toString(),this.s.list3=n.map(p.getPopularFiltered(),function(e){return e[1]}).join(","),this.s.eVar51&&(this.s.events=this.s.apl(this.s.events,"event58",",")),k&&(this.s.eVar60=k),i.page.commentable&&(this.s.events=this.s.apl(this.s.events,"event46",",")),"identity"===i.page.section&&(this.s.prop11="Users",this.s.prop9="userid",this.s.eVar27=i.page.omnitureErrorMessage||"",this.s.eVar42=i.page.returnUrl||"",this.s.hier2="GU/Users/Registration",this.s.events=this.s.apl(this.s.events,i.page.omnitureEvent,",")),this.s.prop56="Javascript",i.page.productionOffice&&(this.s.prop64=i.page.productionOffice),this.s.prop62="Guardian JS-1.4.1 20140914",this.s.prop63=s.getPageSpeed(),this.s.prop65=i.page.headline||"",this.s.prop67="nextgen-served",this.s.prop30=y?"content":"non-content",""!==this.s.getParamValue("INTCMP")&&(this.s.eVar50=this.s.getParamValue("INTCMP")),this.s.eVar50=this.s.getValOnce(this.s.eVar50,"s_intcampaign",0),this.s.eVar58=navigator.platform||"unknown",i.page.inBodyInternalLinkCount&&(this.s.prop58=i.page.inBodyInternalLinkCount),i.page.inBodyExternalLinkCount&&(this.s.prop69=i.page.inBodyExternalLinkCount),u&&(e=(new Date).getTime(),e-u.time<6e4&&(this.s.eVar24=u.pageName,this.s.eVar37=u.tag,this.s.events="event37",this.s.eVar7=u.pageName,this.s.prop37=u.tag),l.session.remove(g),l.session.remove(v)),this.s.prop73=s.isFacebookApp()?"facebook app":s.isTwitterApp()?"twitter app":null,this.s.prop75=i.page.wordCount||0,this.s.eVar75=i.page.wordCount||0,this.isEmbed&&(this.s.eVar11=this.s.prop11="Embedded",window.parent&&window.parent!==window&&(this.s.referrer=document.referrer))},f.prototype.go=function(){this.populatePageProperties(),this.logView(),this.s.events=n.filter((this.s.events||"").split(","),function(e){return"event46"!==e}).join(","),r.emit("analytics:ready")},f.prototype.confirmPageView=function(){var e=setInterval(function(){var t=window[this.generateTrackingImageString()];"undefined"!=typeof t&&(t.complete===!0||t.width+t.height>0)&&(clearInterval(e),this.pageviewSent=!0,r.emit("module:analytics:omniture:pageview:sent"))}.bind(this),250);setTimeout(function(){clearInterval(e)},1e4)},new f}),define("common/modules/analytics/register",["common/utils/mediator","common/modules/experiments/ab","common/utils/_"],function(e,t,n){function i(e){c.push({name:e,status:"unfinished"})}function a(e){n.where(c,{name:e}).forEach(function(e){e.status="completed",e.endTime=Date.now()-l+"ms"})}function o(e){n.where(c,{name:e}).forEach(function(e){e.status="failed",e.endTime=Date.now()-l+"ms"})}function s(){require(["ophan/ng"],function(e){e.record({register:c,abTestRegister:t.getAbLoggableObject()})})}function r(){e.on("register:begin",i),e.on("register:end",a),e.on("register:error",o),window.setTimeout(s.bind(),5e3)}var c=[],l=Date.now();return{initialise:r,begin:i,end:a,error:o}}),define("common/modules/analytics/scrollDepth",["common/utils/_","common/utils/mediator"],function(e,t){function n(t){this.opts=e.assign(this.opts,t),this.opts.isContent&&(this.opts.contentEl=this.contentEl||document.getElementById("article")||document.getElementById("live-blog")),this.init()}return n.prototype.opts={changeThreshold:10,isContent:!1,pageEl:document.body},n.prototype.data={page:{start:(new Date).getTime(),depth:0,duration:0},content:{depth:0}},n.prototype.timeSince=function(e){return(new Date).getTime()-e},n.prototype.getPercentageInViewPort=function(e){var t=e.getBoundingClientRect(),n=window.innerHeight||document.body.clientHeight;return t.bottom<0||t.bottom<n?100:t.top>n?0:t.top>0?100/(t.height||1)*(n-t.top):100/(t.height||1)*(Math.abs(t.top)+n)},n.prototype.isInViewport=function(e){var t=e.getBoundingClientRect();return t.top<(window.innerHeight||document.body.clientHeight)&&t.left<(window.innerWidth||document.body.clientWidth)},n.prototype.setData=function(e){var t,n=this.opts[e+"El"];return n?(t=this.getPercentageInViewPort(n),t-this.data[e].depth>this.opts.changeThreshold?(this.data[e].depth=t,"number"==typeof this.data[e].duration&&(this.data[e].duration=this.timeSince(this.data[e].start)),!0):!1):!1},n.prototype.hasDataChanged=function(){var e=this.setData("page"),t=this.opts.isContent?this.setData("content"):!1;(e||t)&&this.log()},n.prototype.assertScrolling=function(){function e(){t.emit("scrolldepth:inactive")}"number"==typeof this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(e.bind(this),1e3)},n.prototype.log=function(){t.emit("scrolldepth:data",this.data)},n.prototype.init=function(){t.on("window:scroll",e.debounce(this.assertScrolling.bind(this),200)),t.on("scrolldepth:inactive",this.hasDataChanged.bind(this)),t.on("module:clickstream:click",this.hasDataChanged.bind(this))},n}),define("common/utils/scan",["common/utils/_"],function(e){return function(t,n,i){return e.reduce(t,function(t,i){return t.concat(n(e.last(t),i))},[i])}}),define("common/modules/analytics/css-logging",["Promise","common/utils/_","common/utils/config","common/utils/ajax","common/utils/detect","common/utils/url","common/utils/scan","common/utils/mediator","common/modules/analytics/beacon"],function(e,t,n,i,a,o,s,r,c){function l(e){var n=e?e.cssRules||e.rules:null;return n?t.values(n):e}function u(e){return e&&e.selectorText&&e.selectorText.replace(y,"").split(w)}function d(e){var t=e.match(/\.[^\s\.]+\.[^\s]+/g)||[];return t.forEach(function(t){e=e.replace(t,h(t))}),e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")}function h(e){return t.sortBy(e.split(".")).join(".")}function p(e){var n,i,a=t.chain(m()).map(l).flatten().map(l).flatten().map(u).flatten().compact().uniq().map(d).value();return e?a:(i=a.length,n=t.random(0,i),a.slice(n,n+k).concat(i>n+k?[]:a.slice(0,(n+k)%i)))}function m(){return t.chain(document.styleSheets).filter(function(e){return e&&t.values(e.rules||e.cssRules).length>0&&e.ownerNode&&"STYLE"===e.ownerNode.nodeName&&e.ownerNode.className.indexOf(_)>-1}).value()}function f(e){return i({url:e.href,crossOrigin:!0}).then(function(e){var t=document.createElement("style");t.className=_,t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)})}function g(){return e.all(t.chain(document.styleSheets).filter(function(e){return e&&e.href&&e.href.match(/\/\/(localhost|assets\.guim\.co\.uk)/)&&(!e.media||"print"!==e.media.mediaText)&&-1===e.ownerNode.className.indexOf(T)}).forEach(function(e){e.ownerNode.className+=" "+T}).map(f).value())}function v(e){g().then(function(){c.postJson("/css",JSON.stringify({selectors:t.chain(p(e)).reduce(function(e,n){return t.isUndefined(e[n])&&(e[n]=!!document.querySelector(n)),e},{}).value(),contentType:n.page.contentType||"unknown",breakpoint:a.getBreakpoint()||"unknown"}),e)})}function b(e){return t.debounce(function(n){(!n||n.samePage)&&setTimeout(function(){v(e)},e?0:t.random(0,3e3))},500)}var k=500,y=new RegExp(/:+[^\s\,]+/g),w=new RegExp(/\s*,\s*/g),_="js-loggable",T="js-inlined",C=!1;return function(e){var n;e=e||"#csslogging"===window.location.hash,(e||1===t.random(1,2500))&&(n=b(e),n(),C||(r.on("module:clickstream:interaction",n),r.on("module:clickstream:click",n),C=!0))}}),define("common/utils/filterPairs",["common/utils/_"],function(e){return function(t){return e.chain(t).filter(function(e){return e[1]}).map(function(e){return e[0]}).value()}}),define("common/modules/analytics/simple-metrics",["common/utils/filterPairs","common/utils/mediator","common/modules/analytics/beacon"],function(e,t,n){return function(){navigator.sendBeacon&&(n.beaconCounts("sm-page-view"),t.on("module:clickstream:click",function(t){var i=e([["sm-interaction-on-same-page",t.samePage],["sm-another-guardian-page",!t.samePage&&t.sameHost],["sm-clicked-related-content",/related-content/.test(t.tag)],["sm-clicked-series-component",/\| series \|/.test(t.tag)],["sm-clicked-most-popular-component",/\| most popular \|/.test(t.tag)]]);i.length>0&&n.beaconCounts(i)}))}}),define("common/utils/formatters",[],function(){return{integerCommas:function(e){var t,n,i,a=parseInt(e,10);if(!isNaN(a)){for(t=a.toFixed(0).split(""),i=t.length,n=t.length-1;n>=1;n--)(i-n)%3===0&&t.splice(n,0,",");return t.join("")}}}}),define("text!common/views/discussion/comment-count.html",[],function(){return'<a class="fc-trail__count fc-trail__count--commentcount" href="<%=url%>" data-link-name="Comment count"><%=icon%> <%=count%></a>\n'}),define("text!common/views/discussion/comment-count--content.html",[],function(){return'<a href="<%=url%>" data-link-name="Comment count" class="commentcount2 tone-colour">\n    <h3 class="commentcount2__heading"><%=icon%> Comments</h3>\n    <span class="commentcount2__value tone-colour"><%=count%></span>\n</a>\n'}),define("common/modules/discussion/comment-count",["bonzo","fastdom","qwery","common/utils/$","common/utils/_","common/utils/ajax","common/utils/formatters","common/utils/mediator","common/utils/template","common/views/svgs","text!common/views/discussion/comment-count.html","text!common/views/discussion/comment-count--content.html"],function(e,t,n,i,a,o,s,r,c,l,u,d){function h(t){var i=n("["+b+"]",t);return a.groupBy(i,function(t){return e(t).attr(b)})}function p(e){return a.chain(e).keys().uniq().sortBy().join(",").value()}function m(e){var t=e.getElementsByTagName("a")[0];return(t?t.pathname:"")+"#comments"}function f(i,o){i.forEach(function(i){a.forEach(o[i.id],function(a){var o,r,u,d,h=e(a),p=h.attr("data-discussion-url")||m(a);("true"!==h.attr("data-discussion-closed")||0!==i.count)&&(o=h.data("commentcount-format"),d=c(y[o]||w,{url:p,icon:l("commentCount16icon",["inline-tone-fill"]),count:s.integerCommas(i.count)}),u=n(".js-item__meta",a),r=u.length?e(u):h,t.write(function(){r.append(d),h.removeAttr(b),h.removeClass("u-h")}))})}),t.write(function(){r.emit("modules:commentcount:loaded",i)})}function g(e){t.read(function(){var t=h(e||document.body),n=p(t);o({url:k+n,type:"json",method:"get",crossOrigin:!0,success:function(e){e&&e.counts&&f(e.counts,t)}})})}function v(){document.body.querySelector("[data-discussion-id]")&&g(document.body),r.on("modules:related:loaded",g)}var b="data-discussion-id",k="/discussion/comment-counts.json?shortUrls=",y={content:d},w=u;return{init:v,getCommentCounts:g,getContentIds:p,getElementsIndexedById:h}}),define("common/modules/identity/facebook-authorizer",[],function(){function e(e){n=this,this.appId=e,this.onConnected=new t,this.onFBScriptLoaded=new t,this.onUserDataLoaded=new t,this.onNotAuthorized=new t,this.onNotLoggedIn=new t,this.cancelledLogin=new t}function t(){this.callbacks=[]}var n=null,i="facebook-jssdk";return e.DEFAULT_PERMISSIONS={scope:"email,publish_actions,publish_stream"},e.prototype.onConnected=null,e.prototype.onFBScriptLoaded=null,e.prototype.onUserDataLoaded=null,e.prototype.onNotAuthorized=null,e.prototype.onNotLoggedIn=null,e.prototype.cancelledLogin=null,e.accessToken=null,e.userId=null,e.userData=null,e.prototype.login=function(t,n){return(n||!this.accessToken&&!this.loginPending)&&(this.cancelledLogin.reset(),this.onConnected.reset(),this.loginPending=!0,this._loadFacebookAPI().then(function(n){n.login(this._handleGotLoginStatus.bind(this,!0),t||e.DEFAULT_PERMISSIONS)}.bind(this))),this.onConnected},e.prototype.getLoginStatus=function(t){return this.loginStatusPending||(this.loginStatusPending=!0,this._loadFacebookAPI().then(function(n){n.getLoginStatus(this._handleGotLoginStatus.bind(this,!1),t||e.DEFAULT_PERMISSIONS)}.bind(this))),this.onConnected},e.prototype._handleGotLoginStatus=function(e,t){switch(this.loginStatusPending=!1,this.loginPending=!1,t.status){case"connected":this.accessToken=t.authResponse.accessToken,this.userId=t.authResponse.userID,this._getUserData(),this.onConnected.resolve(FB,t.authResponse);break;case"not_authorized":this._getUserData(),this.onNotAuthorized.resolve(this);break;default:e&&this.cancelledLogin.resolve(),this.onNotLoggedIn.resolve()}},e.prototype._getUserData=function(){FB.api("/me",this._handleGotUserData.bind(this))},e.prototype._handleGotUserData=function(e){e&&!e.error&&(this.userData=e,this.onUserDataLoaded.resolve(e))},e.prototype._loadFacebookAPI=function(){return window.FB?this.onFBScriptLoaded.resolve(window.FB):document.getElementById(i)||this._requiredAlready||(this._requiredAlready=!0,this._loadFacebookScript()),this.onFBScriptLoaded},e.prototype._loadFacebookScript=function(){require(["js!facebook.js"],this._handleScriptLoaded.bind(this))},e.prototype._handleScriptLoaded=function(){FB&&(FB.init({appId:this.appId,status:!0,cookie:!0,xfbml:!0}),this.onFBScriptLoaded.resolve(FB))},e.prototype.destroy=function(){n=null},t.prototype.resolve=function(){this.args=Array.prototype.slice.apply(arguments);var e,t=this.callbacks.length;for(e=0;t>e;e++)this.callbacks[e].apply(null,this.args);this.callbacks=[]},t.prototype.then=function(e){void 0!==this.args?e.apply(null,this.args):this.callbacks.push(e)},t.prototype.reset=function(){this.args=void 0},e}),define("common/modules/navigation/profile",["bean","bonzo","fastdom","common/utils/config","common/utils/_","common/utils/ajax","common/utils/mediator","common/modules/identity/api"],function(e,t,n,i,a,o,s,r){function c(e){this.opts=a.assign(this.opts,e),this.dom.container=document.body.querySelector("."+c.CONFIG.classes.container),this.dom.content=this.dom.container.querySelector("."+c.CONFIG.classes.content),this.dom.popup=document.body.querySelector("."+c.CONFIG.classes.popup),this.dom.register=document.body.querySelector("."+c.CONFIG.classes.register)}return c.CONFIG={eventName:"modules:profilenav",classes:{container:"js-profile-nav",content:"js-profile-info",popup:"js-profile-popup",register:"js-profile-register"}},c.prototype.opts={url:"https://profile.theguardian.com"},c.prototype.dom={},c.prototype.init=function(){this.setFragmentFromCookie()},c.prototype.setFragmentFromCookie=function(){var e=r.getUserFromCookie(),i=t(this.dom.container),a=t(this.dom.content),o=t(this.dom.popup),s=t(this.dom.register);e&&(i.hasClass("is-signed-in")||n.write(function(){a.text(e.displayName),i.addClass("is-signed-in"),s.hide()}),o.html('<ul class="popup popup__group popup--profile is-off" data-link-name="Sub Sections" data-test-id="popup-profile">'+this.menuListItem("Comment activity",this.opts.url+"/user/id/"+e.id)+this.menuListItem("Edit profile",this.opts.url+"/public/edit")+this.menuListItem("Email preferences",this.opts.url+"/email-prefs")+this.menuListItem("Change password",this.opts.url+"/password/change")+this.menuListItem("Sign out",this.opts.url+"/signout")+"</ul>")),this.emitLoadedEvent(e)},c.prototype.menuListItem=function(e,t){return'<li class="popup__item"><a href="'+t+'" class="brand-bar__item--action" data-link-name="'+e+'">'+e+"</a></li>"},c.prototype.emitLoadedEvent=function(e){s.emit(c.CONFIG.eventName+":loaded",e)},c.prototype.emitErrorEvent=function(){s.emit(c.CONFIG.eventName+":error")},c}),define("common/modules/ui/toggles",["bean","bonzo","common/utils/$","common/utils/_","common/utils/mediator"],function(e,t,n,i,a){var o=function(){var o,s=this,r=["popup--search"],c="js-toggle-ready";this.init=function(){o=Array.prototype.slice.call(document.body.querySelectorAll("[data-toggle]")),o.forEach(function(n){if(!t(n).hasClass(c)){var i=s.getTarget(n);i&&(n.toggleTarget=i,t(n).addClass(c),e.add(n,"click",function(e){e.preventDefault(),s.toggle(n,o)}))}})},this.reset=function(e){o.filter(function(t){return!(e===t||i.contains(r,n(t).attr("data-toggle")))}).map(s.close)},a.on("module:clickstream:click",function(e){s.reset(e?e.target:null)})};return o.prototype.toggle=function(e,n){var i=this;n.forEach(function(n){n===e?i[t(n).hasClass("is-active")?"close":"open"](n):i.close(n)})},o.prototype.getTarget=function(e){var n=t(e).data("toggle");return n?document.body.querySelector("."+n):void 0},o.prototype.open=function(e){t(e).addClass("is-active"),t(e.toggleTarget).removeClass("is-off")},o.prototype.close=function(e){t(e).removeClass("is-active"),t(e.toggleTarget).addClass("is-off")},o}),define("common/modules/identity/autosignin",["bonzo","common/utils/ajax","common/utils/config","common/utils/time","common/modules/analytics/omniture","common/modules/identity/api","common/modules/identity/facebook-authorizer","common/modules/navigation/profile","common/modules/ui/message","common/modules/ui/toggles"],function(e,t,n,i,a,o,r,c,l,u){function d(){var e=this;e.header=document.body,this.init=function(){if(o.shouldAutoSigninInUser()){var t=n.page.fbAppId,a=new r(t);a.getLoginStatus(),a.onConnected.then(function(t,n){a.onUserDataLoaded.then(function(t){t.email&&e.signin(n,t.name)})}),a.onNotLoggedIn.then(function(){var e=i.currentDate();o.setNextFbCheckTime(e.setDate(e.getDate()+1))}),a.onNotAuthorized.then(function(){var e=i.currentDate();o.setNextFbCheckTime(e.setMonth(e.getMonth()+1))})}},this.signin=function(i,o){t({url:n.page.idWebAppUrl+"/jsapi/facebook/autosignup",cache:!1,crossOrigin:!0,type:"jsonp",data:{signedRequest:i.signedRequest,accessToken:i.accessToken},success:function(t){if(e.welcome(o),"ok"===t.status){var i=new c({url:n.page.idUrl});i.init(),(new u).init(),a.populateEventProperties("Social signin auto"),s.eVar13="facebook auto",s.linkTrackVars+=",eVar13",s.tl(this,"o","Social signin auto")}}})},this.welcome=function(e){var t='<p class="site-message__message" data-test-id="facebook-auto-sign-in-banner">Welcome '+e+', youre signed in to the Guardian using Facebook. <a data-link-name="fb auto : sign out" href="'+n.page.idUrl+'/signout"/>Sign out</a>.</p>';new l("fbauto",{important:!0}).show(t)}}return d}),define("common/modules/navigation/navigation",["bean","qwery","fastdom","common/utils/mediator","common/utils/detect","common/utils/$"],function(e,t,n,i,a,o){var s={init:function(){this.copyMegaNavMenu(),this.enableMegaNavToggle(),this.replaceAllSectionsLink(),a.isIOS()&&a.getUserAgent.version>5&&n.write(function(){o(".navigation__scroll").css({"-webkit-overflow-scrolling":"touch"})})},copyMegaNavMenu:function(){var e=o.create(o(".js-mega-nav").html()),t=o(".js-mega-nav-placeholder");o(".global-navigation",e).addClass("global-navigation--top"),n.write(function(){t.append(e)})},replaceAllSectionsLink:function(){o(".js-navigation-header .js-navigation-toggle").attr("href","#nav-allsections")},enableMegaNavToggle:function(){e.on(document,"click",".js-navigation-toggle",function(e){var t=o("."+e.currentTarget.getAttribute("data-target-nav"));e.preventDefault(),n.write(function(){t.toggleClass("navigation-container--expanded navigation-container--collapsed"),i.emit(t.hasClass("navigation-container--expanded")?"modules:nav:open":"modules:nav:close")})})}};return s}),define("common/modules/ui/smartAppBanner",["common/utils/$","common/utils/cookies","common/utils/detect","common/utils/storage","common/utils/template","common/modules/user-prefs","common/modules/ui/message"],function(e,t,n,i,a,o,s){function r(){return(n.isIOS()||n.isAndroid())&&!n.isFireFoxOSApp()}function c(){return 4>g}function l(){var e=n.isIOS()?"ios":"android",i=new s(e),o=v+("mobile"===n.getBreakpoint()?"":b);i.show(a(o,m[e.toUpperCase()])),t.add(p,g+1)}function u(){r()&&c()&&l()}function d(){return"block"===e(".site-message--android").css("display")||"block"===e(".site-message--ios").css("display")}function h(){return e(".site-message--android").dim().height||e(".site-message--ios").dim().height}var p="GU_SMARTAPPBANNER",m={IOS:{LOGO:"http://assets.guim.co.uk/images/apps/ios-logo.png",SCREENSHOTS:"http://assets.guim.co.uk/images/apps/ios-screenshots.jpg",LINK:"http://ad-x.co.uk/API/click/guardian789057jo/web3537df56ab1f7e",STORE:"on the App Store"},ANDROID:{LOGO:"http://assets.guim.co.uk/images/apps/android-logo-2x.png",SCREENSHOTS:"http://assets.guim.co.uk/images/apps/ios-screenshots.jpg",LINK:"http://ad-x.co.uk/API/click/guardian789057jo/web3537df5992e76b",STORE:"in Google Play"}},f=t.get(p),g=f&&!isNaN(f)?parseInt(f,10):0,v='<img src="<%=LOGO%>" class="app__logo" alt="Guardian App logo" /><div class="app__cta"><h4 class="app__heading">The Guardian app</h4><p class="app__copy">Instant alerts. Offline reading.<br/>Tailored to you.</p><p class="app__copy"><strong>FREE</strong>  <%=STORE%></p></div><a href="<%=LINK%>" class="app__link">View</a>',b='<img src="<%=SCREENSHOTS%>" class="app__screenshots" alt="screenshots" />';return{init:u,isMessageShown:d,getMessageHeight:h}}),define("common/modules/navigation/sticky",["bean","qwery","fastdom","common/utils/$","common/utils/_","common/utils/config","common/utils/detect","common/utils/mediator","common/modules/ui/smartAppBanner"],function(e,t,n,i,a,o,s,r,c){function l(){this.$els={},this.config={showHeaderDepth:.5,showHeaderAppleDepth:.3,showNavigationDepth:150,distance:0,direction:"down",showNavigation:!1,thresholdMobile:400,firstLoadDepth:500,isNavigationLocked:!1},this.breakpoint=s.getBreakpoint(),this.isMobile=a.contains(this.breakpoint,"mobile"),this.isTablet=a.contains(this.breakpoint,"tablet"),this.isAppleCampaign=o.page.hasBelowTopNavSlot,this.isSensitivePage="childrens-books-site"===o.page.section||o.page.shouldHideAdverts}return l.prototype.init=function(){this.$els.header=i("#header"),this.$els.bannerDesktop=i(".top-banner-ad-container--above-nav"),this.$els.bannerMobile=i(".top-banner-ad-container--mobile"),this.$els.bannerBelowNav=i(".top-banner-ad-container--below-nav"),this.$els.main=i("#maincontent"),this.$els.navHeader=i(".js-navigation-header"),this.$els.burgerIcon=i(".js-navigation-toggle",this.$els.navHeader),this.$els.logoWrapper=i(".logo-wrapper",this.$els.navHeader),this.$els.navigation=i(".navigation",this.$els.navHeader),this.$els.window=i(window),n.read(function(){this.headerBigHeight=this.$els.navHeader.dim().height,this.navigationClassList=this.$els.navigation.attr("class")}.bind(this)),this.$els.window.scrollTop()>this.config.firstLoadDepth&&(this.isAppleCampaign?this.updatePositionApple():this.updatePosition()),this.isMobile?r.on("window:scroll",a.throttle(function(){this.updatePositionMobile()}.bind(this),10)):this.isAppleCampaign?r.on("window:scroll",a.throttle(function(){this.updatePositionApple()}.bind(this),10)):r.on("window:scroll",a.throttle(function(){this.updatePosition()}.bind(this),10)),r.on("modules:nav:open",function(){this.lockStickyNavigation()}.bind(this)),r.on("modules:nav:close",function(){this.unlockStickyNavigation()}.bind(this)),r.on("modules:search",function(){i(".js-popup--search").hasClass("is-off")?this.unlockStickyNavigation():this.lockStickyNavigation()}.bind(this))},l.prototype.unlockStickyNavigation=function(){this.config.isNavigationLocked=!1,n.write(function(){i(".js-global-navigation").removeClass("navigation__expandable--sticky").attr("height","auto")})},l.prototype.lockStickyNavigation=function(){this.config.isNavigationLocked=!0,n.read(function(){if(this.$els.header.hasClass("l-header--is-slim")||this.isMobile||this.isTablet){var e=window.innerHeight-i(".js-mega-nav-placeholder")[0].getBoundingClientRect().top;n.write(function(){i(".js-global-navigation").addClass("navigation__expandable--sticky").css("height",e)})}}.bind(this))},l.prototype.setScrollDirection=function(e){this.config.direction=e>this.config.prevScroll?"down":"up",this.config.prevScroll=e},l.prototype.shouldShowNavigation=function(e){"up"===this.config.direction&&0===this.config.distance&&(this.config.distance=e),this.config.showNavigation=Math.abs(e-this.config.distance)>this.config.showNavigationDepth},l.prototype.showNavigation=function(i){this.shouldShowNavigation(i),"up"===this.config.direction&&this.config.showNavigation?n.write(function(){this.isTablet||this.isMobile?this.$els.navigation.removeClass("animate-down-mobile").addClass("animate-up-mobile"):this.isSensitivePage?this.$els.navigation.css("display","block"):this.$els.navigation.removeClass("animate-down-desktop").addClass("animate-up-desktop")}.bind(this)):(this.config.showNavigation&&(this.config.distance=0,this.$els.navHeader.hasClass("navigation-container--expanded")&&e.fire(t(".js-navigation-toggle")[0],"click")),n.write(function(){this.isTablet||this.isMobile?this.$els.navigation.removeClass("animate-up-mobile").addClass("animate-down-mobile"):this.isSensitivePage?this.$els.navigation.css("display","none"):this.$els.navigation.removeClass("animate-up-desktop").addClass("animate-down-desktop")}.bind(this)))},l.prototype.setNavigationDefault=function(){n.write(function(){this.$els.navigation.removeAttr("class"),this.$els.navigation.attr("class",this.navigationClassList)}.bind(this))},l.prototype.updatePosition=function(){n.read(function(){var e=0,t=this.$els.window.scrollTop();this.isSensitivePage||(e=this.$els.bannerDesktop.dim().height||128),this.setScrollDirection(t),t>=this.headerBigHeight+e*this.config.showHeaderDepth&&!this.config.isNavigationLocked?(n.write(function(){this.$els.header.css({position:"fixed",top:0,width:"100%","z-index":"1000","margin-top":0,"-webkit-transform":"translateY(-100%)","-ms-transform":"translateY(-100%)",transform:"translateY(-100%)"}),this.$els.bannerDesktop.css({position:"absolute",width:"100%",top:this.headerBigHeight}),this.$els.main.css("margin-top",this.headerBigHeight+e),this.$els.header.addClass("l-header--is-slim"),this.$els.header.css({"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)"})}.bind(this)),this.config.isNavigationLocked||this.showNavigation(t)):t>=this.headerBigHeight?(n.write(function(){this.$els.bannerDesktop.css({position:"absolute",width:"100%",top:this.headerBigHeight,"z-index":"999"}),this.config.isNavigationLocked||this.$els.header.addClass("l-header--is-slim")}.bind(this)),this.config.isNavigationLocked||n.write("up"===this.config.direction?function(){this.$els.header.css({"-webkit-transform":"translateY(-100%)","-ms-transform":"translateY(-100%)",transform:"translateY(-100%)"})}.bind(this):function(){this.$els.header.css({position:"absolute","margin-top":e,"-webkit-transform":"translateY(-500%)","-ms-transform":"translateY(-500%)",transform:"translateY(-500%)","z-index":"998"}),this.$els.main.css("margin-top",this.headerBigHeight+e)}.bind(this))):(n.write(function(){this.$els.bannerDesktop.css({position:"fixed",top:0,width:"100%","z-index":"999"}),this.$els.header.removeClass("l-header--is-slim"),this.$els.header.css({position:"relative",width:"100%","margin-top":e,"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)","z-index":"998"}),this.$els.main.css("margin-top",0),this.isSensitivePage&&this.$els.navigation.css("display","block")
}.bind(this)),this.setNavigationDefault())}.bind(this))},l.prototype.updatePositionApple=function(){n.read(function(){var e=this.$els.bannerBelowNav.dim().height||336,t=this.$els.window.scrollTop();this.setScrollDirection(t),t>=e*this.config.showHeaderAppleDepth?(n.write(function(){this.$els.header.css({position:"fixed",top:0,width:"100%","z-index":"1000","margin-top":0,"-webkit-transform":"translateY(-100%)","-ms-transform":"translateY(-100%)",transform:"translateY(-100%)"}),this.$els.bannerBelowNav.css({position:"static",top:null,width:"100%","z-index":"999"}),this.$els.header.addClass("l-header--is-slim"),this.$els.header.css({"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)"})}.bind(this)),this.showNavigation(t)):(n.write(function(){this.$els.header.removeClass("l-header--is-slim"),this.$els.header.css({position:"static",width:"100%","margin-top":0,"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)","z-index":"998"})}.bind(this)),this.setNavigationDefault())}.bind(this))},l.prototype.fixedBannerMobile=function(e,t){n.write(function(){this.$els.header.css({position:"fixed",top:e,width:"100%","z-index":"1001","margin-top":0}),this.$els.bannerMobile.css({position:"fixed",top:this.headerBigHeight+e,width:"100%","z-index":"999"}),this.$els.main.css("margin-top",this.headerBigHeight+t)}.bind(this))},l.prototype.updatePositionMobile=function(){n.read(function(){var e=this.$els.bannerMobile.dim().height,t=this.$els.window.scrollTop(),i=c.getMessageHeight();n.write(function(){this.setScrollDirection(t),c.isMessageShown()?i>t?n.write(function(){this.$els.header.css({position:"static",top:null,width:"100%","z-index":"1001","margin-top":0}),this.$els.bannerMobile.css({position:"static",top:null,width:"100%","z-index":"999"}),this.$els.main.css("margin-top",0)}.bind(this)):t>i&&t<this.config.thresholdMobile?(n.write(function(){this.fixedBannerMobile(0,e)}.bind(this)),this.setNavigationDefault()):t>this.config.thresholdMobile&&(n.write(function(){this.$els.bannerMobile.css({position:"absolute",top:this.config.thresholdMobile+this.headerBigHeight})}.bind(this)),this.showNavigation(t)):t<this.config.thresholdMobile?(n.write(function(){this.fixedBannerMobile(0,e)}.bind(this)),this.setNavigationDefault()):(n.write(function(){this.$els.bannerMobile.css({position:"absolute",top:this.config.thresholdMobile+this.headerBigHeight})}.bind(this)),this.showNavigation(t))}.bind(this))}.bind(this))},new l}),define("common/modules/navigation/search",["bean","fastdom","common/utils/_","common/utils/$","common/utils/config","common/utils/detect","common/utils/mediator","common/modules/experiments/ab"],function(e,t,n,i,a,o,s,r){var c=function(){var c,l,u,d,h,p,m=this;a.switches.googleSearch&&a.page.googleSearchUrl&&a.page.googleSearchId&&(l=!0,u=a.page.googleSearchUrl+"?cx="+a.page.googleSearchId,d="identity"===a.page.section?3:10,c=n.throttle(function(){m.load()}),e.on(document,"click",".js-search-toggle",function(e){c(),m.checkResults(),m.focusSearchField(),e.preventDefault(),s.emit("modules:search")})),this.focusSearchField=function(){var e=i("input.gsc-input");e.length>0&&(e.focus(),r.shouldRunTest("Viewability","variant")&&"Interactive"!==a.page.contentType&&(clearInterval(p),p=setInterval(m.checkResults,250)))},this.checkResults=function(){if(i(".gsc-resultsbox-visible").length>0){var e=i(".js-popup--search");t.write(function(){e.css("height","auto"),i(".gsc-results",e).css({height:"auto","overflow-y":"visible"})}),(i(".l-header--is-slim").length>0||"mobile"===o.getBreakpoint())&&t.read(function(){var n=window.innerHeight-e[0].getBoundingClientRect().top;t.write(function(){e.css("height",n),i(".gsc-results",e).css({height:n-150,"overflow-y":"auto"})})}),clearInterval(p)}},this.load=function(){var e,n;if(h=document.body.querySelector(".js-search-placeholder"),window.__gcse={callback:m.focusSearchField},Array.prototype.forEach.call(document.querySelectorAll(".js-search-placeholder"),function(e){e!==h&&t.write(function(){e.innerHTML=""})}),!h.innerHTML){var i=!r.shouldRunTest("Viewability","variant")||"Interactive"===a.page.contentType;t.write(function(){h.innerHTML='<div class="search-box" role="search"><gcse:searchbox enableAutoComplete="'+i+'"></gcse:searchbox></div><div class="search-results" data-link-name="search"><gcse:searchresults webSearchResultSetSize="'+d+'" linkTarget="_self"></gcse:searchresults></div>'}),e=document.createElement("script"),e.async=!0,e.src=u,n=document.getElementsByTagName("script")[0],t.write(function(){n.parentNode.insertBefore(e,n)})}},this.init=function(){}};return c}),define("common/modules/onward/more-tags",["common/utils/$","bean"],function(e,t){function n(){this.init=function(){var n=e(".js-more-tags");0!==n.length&&(n.removeClass("modern-hidden"),t.on(document.querySelector(".js-more-tags__link"),"click",function(){e(".modern-hidden-tag").removeClass("modern-hidden"),n.addClass("modern-hidden")}))}}return n}),define("common/modules/onward/tech-feedback",["bean","fastdom","common/utils/_","common/utils/$"],function(e,t,n,i){function a(e){return n.reduce(e,function(e,t,n){return e+n+": "+t+"\n"},"")}function o(e){return function(){var t=e.attr("href"),n={browser:window.navigator.userAgent,page:window.location,width:window.innerWidth},i="\r\n\r\n\r\n\r\n------------------------------\r\nAdditional technical data about your request - please do not edit:\r\n\r\n"+a(n)+"\r\n\r\n";e.attr("href",t+"?body="+encodeURIComponent(i))}}function s(t){var n=i(t);n.length&&e.on(n[0],"click",o(n))}return function(){s(".js-tech-feedback-mailto"),s(".js-userhelp-mailto")}}),define("common/modules/ui/accessibility-prefs",["common/utils/_","common/utils/$","common/modules/user-prefs"],function(e,t,n){function i(e){var n=e+"(100%)";t("body").css({"-webkit-filter":n,filter:n})}return function(){e.forEach(["sepia","grayscale","invert","contrast","saturate","opacity"],function(e){n.isOn(e)&&i(e)})}}),define("common/modules/ui/clickstream",["bean","common/utils/_","common/utils/mediator","common/modules/experiments/ab"],function(e,t,n,i){var a=function(a){a=a||{};var o=a.filter||[],s=function(e){return o.filter(function(t){return t===e})},r=function(e){var t,n,i,a;return e=e||"",t=e.match(/:\/\/(.[^\/]+)/),t&&(t=t[1],n=e.match(/^(https?:)\/\//),n=n?n[1]:void 0,i=window.location.hostname,a=window.location.protocol),0===e.indexOf("mailto:")?!1:!t||t===i&&n===a},c=function(e,n){if(!e.el)return!1;var i,a=e.el,o=a.tagName.toLowerCase(),l=a.getAttribute("data-link-name");if(l&&e.tag.unshift(l),"body"===o)return e.tag=e.tag.join(" | "),delete e.el,e.validTarget&&a.getAttribute("data-link-test")&&(e.tag=a.getAttribute("data-link-test")+" | "+e.tag),e;var u=JSON.parse(a.getAttribute("data-custom-event-properties")||"{}");return e.customEventProperties=t.merge(u,e.customEventProperties),e.validTarget||(e.validTarget=s(o).length>0||!!n,e.validTarget&&(e.target=a,i=a.getAttribute("href"),e.samePage=i&&0===i.indexOf("#")||"button"===o||a.hasAttribute("data-is-ajax"),e.sameHost=e.samePage||r(i))),!e.linkContext&&a.getAttribute("data-link-context-path")&&(e.linkContextPath=a.getAttribute("data-link-context-path"),e.linkContextName=a.getAttribute("data-link-context-name")),e.el=a.parentNode,c(e)};return a.addListener!==!1&&e.add(document.body,"click",function(e){var a,o={el:e.target,tag:[]};o.target=e.target,o=c(o),a=i.getActiveTestsEventIsApplicableTo(o),void 0!==a&&a.length>0&&(o.tag=t.map(a,function(e){var t=i.getTestVariantId(e);return"AB,"+e+","+t+","+o.tag}).join(",")),n.emit("module:clickstream:click",o)}),{getClickSpec:c}};return a}),define("common/modules/ui/dropdowns",["common/utils/$","bonzo","bean"],function(e,t,n){function i(){n.on(document.body,"click",o.button,function(n){var i=t(e.ancestor(n.currentTarget,o.container.substring(1)));i.toggleClass("dropdown--active"),a(i)})}function a(n){n.each(function(n){var i=t(n).hasClass("dropdown--active");e(o.content,n).attr("aria-hidden",!i),e(o.button,n).attr("aria-expanded",i),e(o.content,n).attr("aria-expanded",i)})}var o={container:".dropdown",button:".dropdown__button",content:".dropdown__content"};return{init:i,updateAria:a}}),define("common/modules/ui/faux-block-link",["bean","bonzo","fastdom","common/utils/$"],function(e,t,n,i){var a=".u-faux-block-link__overlay",o="u-faux-block-link--hover";return function(){e.on(document.body,"mouseenter",a,function(e){n.write(function(){i(e.currentTarget).parent().addClass(o)})}),e.on(document.body,"mouseleave",a,function(e){n.write(function(){i(e.currentTarget).parent().removeClass(o)})})}}),define("common/modules/ui/fonts",["bonzo","qwery","raven","common/utils/$","common/utils/ajax","common/utils/config","common/utils/cookies","common/utils/detect","common/utils/mediator","common/utils/storage"],function(e,t,n,i,a,o,s,r,c,l){function u(){return"off"===s.get("GU_fonts")}var d="gu.fonts.",h=r.getFontFormatSupport(navigator.userAgent);return function(){return!o.switches.webFonts||u()||t(".webfonts").length?!1:(l.local.get(d+"format")||l.local.set(d+"format",h),void i(".webfont:not([data-loaded-from])").each(function(t){var i=e(t),o=i.data("cache-file-"+("Off"===r.fontHinting?"":"hinted-"+r.fontHinting+"-")+h),s=i.data("min-breakpoint");(!s||r.isBreakpoint({min:s}))&&a({url:o,type:"jsonp",jsonpCallbackName:"guFont",success:function(e){if(!e)return void n.captureMessage("Failed to load fonts");var t=o.match(/fonts\/([^/]*?)\/?([^/]*)\.(woff2|woff|tff).json$/),a=t[1],s=t[2];i.text(e.css).attr("data-loaded-from","ajax"),l.local.clearByPrefix(d+s.replace(/(CleartypeHinted|AutoHinted)$/,"")),l.local.set(d+s+"."+a,e.css),c.emit("modules:fonts:loaded",name)}})}))}}),define("common/modules/ui/relativedates",["common/utils/$","common/utils/config","common/utils/mediator","bonzo"],function(e,t,n,i){function a(){return new Date((new Date).getTime()-w)}function o(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]}function s(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e]}function r(e){return 10>e?"0"+e:e}function c(e){var t=a();return e&&e.toDateString()===t.toDateString()}function l(e){var t=a();return e&&e.valueOf()>t.valueOf()-864e5}function u(e,t){var n=a();return e&&e.valueOf()>n.valueOf()-1e3*(t||0)}function d(e){var t=a(),n=a();return n.setDate(t.getDate()-1),e.toDateString()===n.toDateString()}function h(e){var t=a().valueOf()-6048e5;return e.valueOf()>=t}function p(e){return"[object Date]"!==Object.prototype.toString.call(e)?!1:!isNaN(e.getTime())}function m(e,t,n){var i,a={s:{"short":["s"],med:["s ago"],"long":[" second ago"," seconds ago"]},m:{"short":["m"],med:["m ago"],"long":[" minute ago"," minutes ago"]},h:{"short":["h"],med:["h ago"],"long":[" hour ago"," hours ago"]},d:{"short":["d"],med:["d ago"],"long":[" day ago"," days ago"]}};return a[e]?(i=a[e][t],1===n?i[0]:i[i.length-1]):""}function f(e,t){t=t||{};var n,i,r,u,f=new Date(Number(e)),v=a(),b=t.format||"short",k="short"===t.format||"med"===t.format;return p(f)?(u=parseInt((v.getTime()-f)/1e3,10),0>u?!1:t.notAfter&&u>t.notAfter?!1:55>u?u+m("s",b,u):3300>u?(n=Math.round(u/60,10),n+m("m",b,n)):c(f)||k&&l(f)?(i=Math.round(u/3600),i+m("h",b,i)):k&&h(f)?(r=Math.round(u/3600/24),r+m("d",b,r)):d(f)?"Yesterday"+g(f):432e3>u?[o(f.getDay()),f.getDate(),s(f.getMonth()),f.getFullYear()].join(" ")+(t.showTime?g(f):""):[f.getDate(),s(f.getMonth()),f.getFullYear()].join(" ")+(t.showTime?g(f):"")):!1}function g(e){return" "+e.getHours()+":"+r(e.getMinutes())}function v(){return e(".js-timestamp, .js-item__timestamp")}function b(){var t="js-locale-timestamp";e("."+t).each(function(e){var n,a=i(e),o=parseInt(a.attr("data-timestamp"),10);o&&(n=new Date(o),e.innerHTML=r(n.getHours())+":"+r(n.getMinutes()),a.removeClass(t))})}function k(e){e=e||{},v().each(function(t){var n,a=i(t),o=parseInt(a.attr("data-timestamp"),10)||a.attr("datetime"),s=new Date(o),r=f(s.getTime(),{showTime:i(a.parent()).hasClass("block-time"),format:a.attr("data-relativeformat"),notAfter:e.notAfter});r?(n=a[0].querySelector(".timestamp__text")||a[0],n.getAttribute("title")||n.setAttribute("title",i(n).text()),n.innerHTML=r):e.notAfter&&a.addClass("modern-hidden")})}function y(e){k(e),b(e)}var w=t.page&&t.page.renderTime?Math.max(0,new Date-new Date(t.page.renderTime)):0;return["related","autoupdate"].forEach(function(e){n.on("modules:"+e+":render",k)}),{makeRelativeDate:f,isWithinSeconds:u,init:y}}),define("text!common/views/breaking-news.html",[],function(){return'<div class="js-breaking-news__item breaking-news__item" data-breaking-article-id="<%=id%>">\n    <div class="breaking-news__item-content">\n        <div class="breaking-news__item-header">\n            <%=marque36icon%>\n            <em class="breaking-news__item-kicker">Breaking news</em>\n            <div class="breaking-news__item-headline"><%=headline%></div>\n        </div>\n        <div class="breaking-news__item-options">\n            <button class="js-breaking-news__item__close button button--tertiary u-faux-block-link__promote"\n                    aria-label="Dismiss"\n                    data-link-name="close button"><%=closeIcon%></button>\n        </div>\n    </div>\n    <a class="u-faux-block-link__overlay" href="/<%=id%>"></a>\n</div>\n'}),define("common/modules/onward/breaking-news",["bean","bonzo","common/utils/$","fastdom","qwery","common/utils/_","common/utils/ajax","common/utils/config","common/utils/storage","common/utils/template","common/modules/ui/relativedates","common/modules/analytics/omniture","common/views/svgs","text!common/views/breaking-news.html"],function(e,t,n,i,a,o,s,r,c,l,u,d,h,p){function m(e,t){var n={};return o.forEach(e,function(e){n[e]=t[e]||!1}),n}var f,g,v,b,k=1200,y={sport:"sport",football:"sport"},w="/breaking-news/lite.json",_="gu.breaking-news.hidden",T=1;return function(){var C=r.page,E=c.local.get(_)||{};C&&E[C.pageId]!==!0&&s({url:w,type:"json",crossOrigin:!0}).then(function(s){var r,w=(s.collections||[]).filter(function(e){return o.isArray(e.content)&&e.content.length}).map(function(e){return e.href=(e.href||"").toLowerCase(),e}),S="international"===C.internationalEdition,D=S?"intl":(C.edition||"").toLowerCase(),I=y[C.section],M=o.chain([w.filter(function(e){return"global"===e.href}).map(function(e){return e.content}),w.filter(function(e){return e.href===D}).map(function(e){return e.content}),w.filter(function(e){return I&&e.href===I}).map(function(e){return e.content})]).flatten().filter(function(e){var t=e.frontPublicationDate;return t&&u.isWithinSeconds(new Date(t),k)}).value(),L=M.map(function(e){return e.id}),j=3e3;L.indexOf(C.pageId)>-1&&(E[C.pageId]=!0),c.local.set(_,m(L,E)),r=o.chain(M).filter(function(e){return E[e.id]!==!0}).first(T).value(),r.length&&(f=f||t(a(".js-breaking-news-placeholder")),v=h("marque36icon"),b=h("closeCentralIcon"),o.forEach(r,function(a){var o;a.marque36icon=v,a.closeIcon=b,o=t.create(l(p,a)),e.on(n(".js-breaking-news__item__close",o)[0],"click",function(){i.write(function(){n("[data-breaking-article-id]").hide()}),E[a.id]=!0,c.local.set(_,m(L,E))}),i.write(function(){f.append(o)}),E[a.id]===!1&&(j=0)}),setTimeout(function(){var e,n="breaking news alert shown"+(j?"":" 2 or more times");g=g||t(document.body),e=t(t.create(f[0])).addClass("breaking-news--spectre").removeClass("breaking-news--hidden"),i.write(function(){g.append(e)}),j||i.write(function(){f.removeClass("breaking-news--fade-in")}),i.write(function(){f.removeClass("breaking-news--hidden")}),d.trackLink(this,n)},j))})}}),define("text!common/views/international-message.html",[],function(){return'<p class="site-message__message" id="site-message__message">\n    Youre viewing a beta release of the Guardians international edition.\n</p>\n<ul class="site-message__actions u-unstyled">\n    <li class="site-message__actions__item">\n        <i class="i i-arrow-white-right"></i>\n        <a href="https://www.surveymonkey.com/s/ZCPVY5Q" data-link-name="survey">Leave feedback</a>\n    </li>\n    <li class="site-message__actions__item">\n        <i class="i i-back"></i>\n        <a class="js-main-site-link" rel="nofollow" href="/preference/edition/uk" data-link-name="opt-out">Opt out and go to UK edition</a>\n    </li>\n</ul>\n'}),define("text!common/views/international-control-message.html",[],function(){return'<p class="site-message__message" id="site-message__message">\n    We\'re testing an international edition and would love your feedback\n</p>\n<ul class="site-message__actions u-unstyled">\n    <li class="site-message__actions__item">\n        <i class="i i-arrow-white-right"></i>\n        <a class="js-main-site-link" rel="nofollow" href="/preference/edition/intl" data-link-name="opt-in">Preview beta</a>\n    </li>\n</ul>\n'}),define("text!common/views/donot-use-adblock.html",[],function(){return'<p class="site-message__message" id="site-message__message">\n    <%=messageText%></p>\n<ul class="site-message__actions u-unstyled">\n    <li class="site-message__actions__item">\n        <i class="i i-arrow-white-right"></i>\n        <a href="<%=adblockLink%>" target="_blank" data-link-name="read more"><%=linkText%></a>\n    </li>\n</ul>\n'}),define("bootstraps/identity-common",["common/utils/robusts","common/modules/identity/api"],function(e,t){function n(e){t.init(e),t.isUserLoggedIn()&&(document.documentElement.className=document.documentElement.className.replace(/\bid--signed-out\b/,"id--signed-in"))}return function(){e([["i-css-class",n]])}}),define("bootstraps/common",["bean","bonzo","fastclick","qwery","common/utils/$","common/utils/config","common/utils/cookies","common/utils/detect","common/utils/mediator","common/utils/template","common/utils/url","common/utils/robusts","common/utils/storage","common/modules/analytics/foresee-survey","common/modules/analytics/livestats","common/modules/analytics/media-listener","common/modules/analytics/omniture","common/modules/analytics/register","common/modules/analytics/scrollDepth","common/modules/analytics/css-logging","common/modules/analytics/simple-metrics","common/modules/commercial/user-ad-targeting","common/modules/discussion/comment-count","common/modules/experiments/ab","common/modules/identity/autosignin","common/modules/navigation/navigation","common/modules/navigation/sticky","common/modules/navigation/profile","common/modules/navigation/search","common/modules/onward/history","common/modules/onward/more-tags","common/modules/onward/tech-feedback","common/modules/ui/accessibility-prefs","common/modules/ui/clickstream","common/modules/ui/dropdowns","common/modules/ui/faux-block-link","common/modules/ui/fonts","common/modules/ui/message","common/modules/ui/relativedates","common/modules/ui/smartAppBanner","common/modules/ui/tabs","common/modules/ui/toggles","common/modules/user-prefs","common/modules/onward/breaking-news","text!common/views/international-message.html","text!common/views/international-control-message.html","text!common/views/donot-use-adblock.html","bootstraps/identity-common"],function(e,t,n,i,a,o,s,r,c,l,u,d,h,p,m,f,g,v,b,k,y,w,_,T,C,E,S,D,I,M,L,j,x,N,A,O,P,V,F,R,B,U,H,q,$,K,z,G){var Y={initFastClick:function(){(o.tests.jspmTest?n:n.attach)(document.body)},initialiseTopNavItems:function(){var e,t=new I,n=document.getElementById("header");n&&o.switches.idProfileNavigation&&(e=new D({url:o.page.idUrl}),e.init()),t.init(n)},initialiseNavigation:function(){E.init()},initialiseStickyHeader:function(){T.shouldRunTest("Viewability","variant")&&"Interactive"!==o.page.contentType&&S.init()},showTabs:function(){var e=new B;["modules:popular:loaded","modules:geomostpopular:ready"].forEach(function(t){c.on(t,function(t){e.init(t)})})},showToggles:function(){var e=new U;e.init(document),e.reset(),A.init()},showRelativeDates:function(){var e=F;e.init(),c.on("fragment:ready:dates",function(t){e.init(t)})},initClickstream:function(){new N({filter:["a","button"]})},showAdblockMessage:function(){var e=h.local.get("alreadyVisited")||0,t="https://membership.theguardian.com/about/supporter?INTCMP=adb-mv";"mobile"!==r.getBreakpoint()&&r.adblockInUse&&o.switches.adblock&&e&&new V("adblock",{pinOnHide:!1,siteMessageLinkName:"adblock message variant",siteMessageCloseBtn:"hide"}).show(l(z,{adblockLink:t,messageText:"We notice you've got an ad-blocker switched on. Perhaps you'd like to support the Guardian another way?",linkText:"Become a supporter today"})),h.local.set("alreadyVisited",e+1)},logLiveStats:function(){m.log()},loadAnalytics:function(){g.go(),o.switches.ophan&&require(["ophan/ng"],function(e){o.switches.scrollDepth&&(c.on("scrolldepth:data",e.record),new b({isContent:/Article|LiveBlog/.test(o.page.contentType)}))})},cleanupCookies:function(){s.cleanUp(["mmcore.pd","mmcore.srv","mmid","GU_ABFACIA","GU_FACIA","GU_ALPHA","GU_ME","at"])},updateHistory:function(){"Network Front"!==o.page.contentType&&M.logSummary(o.page),"Video"===o.page.contentType&&M.logHistory(o.page)},showHistoryInMegaNav:function(){o.switches.historyTags&&c.once("modules:nav:open",function(){M.showInMegaNav()})},initAutoSignin:function(){o.switches.facebookAutosignin&&"mobile"!==r.getBreakpoint()&&(new C).init()},windowEventListeners:function(){["resize","scroll","orientationchange"].forEach(function(t){e.on(window,t,c.emit.bind(c,"window:"+t))})},checkIframe:function(){window.self!==window.top&&a("html").addClass("iframed")},runForseeSurvey:function(){o.switches.foresee&&p.load()},startRegister:function(){o.page.isSSL||v.initialise()},showMoreTagsLink:function(){(new L).init()},initDiscussion:function(){o.switches.discussion&&_.init()},testCookie:function(){var e=u.getUrlVars();e.test&&s.addSessionCookie("GU_TEST",encodeURIComponent(e.test))},adTestCookie:function(){var e=u.getUrlVars();"clear"===e.adtest?s.remove("adtest"):e.adtest&&s.add("adtest",encodeURIComponent(e.adtest),10)},initOpenOverlayOnClick:function(){var n;e.on(document.body,"click","[data-open-overlay-on-click]",function(e){var i=t(e.currentTarget).data("open-overlay-on-click");n=document.body.scrollTop,t(document.body).addClass("has-overlay"),a("#"+i).addClass("overlay--open").appendTo(document.body)}),e.on(document.body,"click",".js-overlay-close",function(e){var i=a.ancestor(e.target,"overlay");i&&t(i).removeClass("overlay--open"),t(document.body).removeClass("has-overlay"),n&&window.setTimeout(function(){document.body.scrollTop=n,n=null},1)})},loadBreakingNews:function(){o.switches.breakingNews&&"identity"!==o.page.section&&q()},runCssLogging:function(){o.switches.cssLogging&&k()},initPublicApi:function(){window.guardian.api={logCss:k}},internationalSignposting:function(){"internationalEdition"in o.page&&("international"===o.page.internationalEdition&&"international"===o.page.pageId?new V("international-with-survey-new",{pinOnHide:!0}).show(l($,{})):"control"===o.page.internationalEdition&&"uk"===o.page.pageId&&new V("international",{pinOnHide:!0}).show(l(K,{})))}};return{init:function(){d([["c-fonts",P],["c-identity",G],["c-adverts",w.requestUserSegmentsFromId],["c-discussion",Y.initDiscussion],["c-fast-click",Y.initFastClick],["c-test-cookie",Y.testCookie],["c-ad-cookie",Y.adTestCookie],["c-event-listeners",Y.windowEventListeners],["c-breaking-news",Y.loadBreakingNews],["c-block-link",O],["c-iframe",Y.checkIframe],["c-tabs",Y.showTabs],["c-top-nav",Y.initialiseTopNavItems],["c-init-nav",Y.initialiseNavigation],["c-sticky-header",Y.initialiseStickyHeader],["c-toggles",Y.showToggles],["c-dates",Y.showRelativeDates],["c-clickstream",Y.initClickstream],["c-history",Y.updateHistory],["c-sign-in",Y.initAutoSignin],["c-history-nav",Y.showHistoryInMegaNav],["c-forsee",Y.runForseeSurvey],["c-start-register",Y.startRegister],["c-tag-links",Y.showMoreTagsLink],["c-smart-banner",R.init],["c-adblock",Y.showAdblockMessage],["c-log-stats",Y.logLiveStats],["c-analytics",Y.loadAnalytics],["c-cookies",Y.cleanupCookies],["c-overlay",Y.initOpenOverlayOnClick],["c-css-logging",Y.runCssLogging],["c-public-api",Y.initPublicApi],["c-simple-metrics",y],["c-tech-feedback",j],["c-media-listeners",f],["c-accessibility-prefs",x],["c-international-signposting",Y.internationalSignposting]]),window.console&&window.console.log&&!o.page.isDev&&window.console.log("##::::: ##: ########::::::: ###:::: ########:: ########:::: ##:::: ##: ####: ########:: ####: ##::: ##:: ######::\n##: ##: ##: ##.....::::::: ## ##::: ##.... ##: ##.....::::: ##:::: ##:. ##:: ##.... ##:. ##:: ###:: ##: ##... ##:\n##: ##: ##: ##::::::::::: ##:. ##:: ##:::: ##: ##:::::::::: ##:::: ##:: ##:: ##:::: ##:: ##:: ####: ##: ##:::..::\n##: ##: ##: ######:::::: ##:::. ##: ########:: ######:::::: #########:: ##:: ########::: ##:: ## ## ##: ##:: ####\n##: ##: ##: ##...::::::: #########: ##.. ##::: ##...::::::: ##.... ##:: ##:: ##.. ##:::: ##:: ##. ####: ##::: ##:\n##: ##: ##: ##:::::::::: ##.... ##: ##::. ##:: ##:::::::::: ##:::: ##:: ##:: ##::. ##::: ##:: ##:. ###: ##::: ##:\n ###. ###:: ########:::: ##:::: ##: ##:::. ##: ########:::: ##:::: ##: ####: ##:::. ##: ####: ##::. ##:. ######::\n\nEver thought about joining us?\nhttp://developers.theguardian.com/join-the-team.html")}}}),define("common/utils/defer-to-analytics",["common/utils/mediator"],function(e){function t(t){n?t():e.on("analytics:ready",function(){t()})}var n=!1;return e.on("analytics:ready",function(){n=!0}),t}),define("common/modules/analytics/omnitureMedia",["common/utils/_","common/utils/config","qwery"],function(e,t,n){function i(i){function a(e){return i.el().getAttribute(e)}var o,r,c=a("data-embed-path")||t.page.pageId,l=n("audio",i.el()).length?"audio":"video",u=!1,d=!1,h=!!guardian.isEmbed,p={"video:request":"event98","preroll:request":"event97","preroll:play":"event59","preroll:skip":"event99","preroll:end":"event64","video:play":"event17","audio:play":"event19","video:25":"event21","video:50":"event22","video:75":"event23","video:end":"event18","audio:end":"event20","video:fullscreen":"event96",duration:"event57"};this.getDuration=function(){return parseInt(a("data-duration"),10)||void 0},this.getPosition=function(){return i.currentTime()},this.play=function(){"video"===l&&u&&this.startDurationEventTimer()},this.pause=function(){"video"===l&&this.stopDurationEventTimer()},this.sendEvent=function(t,n,i){s.eVar74=i?l+" ad":l+" content",s.eVar43=s.prop43=l.charAt(0).toUpperCase()+l.slice(1),s.eVar44=s.prop44=c,d&&(s.prop41="PrerollMilestone"),s.linkTrackVars="events,eVar11,prop41,eVar43,prop43,eVar44,prop44,prop9,channel",s.linkTrackEvents=e.values(p).join(","),s.events=t,s.tl(!0,"o",n||t),s.prop41=s.eVar44=s.prop44=s.eVar43=s.prop43=void 0},this.sendNamedEvent=function(e,t){this.sendEvent(p[e],e,t)},this.omnitureInit=function(){s.loadModule("Media"),s.Media.autoTrack=!1,s.Media.trackWhilePlaying=!1,s.Media.trackVars="events,eVar7,eVar43,eVar44,prop44,eVar47,eVar61,channel",s.Media.trackEvents="event17,event18,event19,event20,event21,event22,event23,event57,event59,event64,event96,event97,event98",s.Media.segmentByMilestones=!1,s.Media.trackUsingContextData=!1,s.eVar11=s.prop11=h?"Embedded":t.page.sectionName||"",s.eVar7=s.pageName,s.Media.open(c,this.getDuration(),"HTML5 Video"),"video"===l&&this.sendNamedEvent("video:request")},this.getDurationWatched=function(){var e=0,t=new Date,n=(t-o)/1e3;return r&&u&&n>1&&(e=Math.round(n)),o=t,e},this.baseDurationEvent=function(){var e=[],t=this.getDurationWatched();return t&&e.push(p.duration+"="+t),e},this.sendSegment=function(e){var t=this.baseDurationEvent();t.push(e),this.sendEvent(t.join(","))},this.sendDurationEvent=function(){var e=this.baseDurationEvent();e&&e.length>0&&this.sendEvent(e.join(","))},this.startDurationEventTimer=function(){this.stopDurationEventTimer(),o=new Date,r=window.setInterval(this.sendDurationEvent.bind(this),1e4)},this.stopDurationEventTimer=function(){this.sendDurationEvent(),r&&window.clearInterval(r),r=!1},this.onContentPlay=function(){u=!0,this.sendNamedEvent("video:play"),this.startDurationEventTimer()},this.onPrerollPlay=function(){d=!0,this.sendNamedEvent("preroll:play",!0)},this.init=function(){this.omnitureInit(),i.on("play",this.play.bind(this)),i.on("pause",this.pause.bind(this)),i.one("video:preroll:request",this.sendNamedEvent.bind(this,"preroll:request",!0)),i.one("video:preroll:play",this.onPrerollPlay.bind(this)),i.one("video:preroll:end",this.sendNamedEvent.bind(this,"preroll:end",!0)),i.one("video:content:play",this.onContentPlay.bind(this)),i.one("audio:content:play",this.sendNamedEvent.bind(this,"audio:play")),i.one("video:play:25",this.sendNamedEvent.bind(this,"video:25")),i.one("video:play:50",this.sendNamedEvent.bind(this,"video:50")),i.one("video:play:75",this.sendNamedEvent.bind(this,"video:75")),i.one("video:content:end",this.sendNamedEvent.bind(this,"video:end")),i.one("audio:content:end",this.sendNamedEvent.bind(this,"audio:end")),i.on("player:fullscreen",this.sendNamedEvent.bind(this,"video:fullscreen"))}}return i}),define("text!common/views/ui/video-ads-skip-overlay.html",[],function(){return'<div class="js-ads-skip vjs-ads-skip">\n    <span class="vjs-ads-skip__countdown">You may skip this advert in <span class="js-skip-remaining-time"><%=skipTimeout%></span> seconds</span>\n</div>\n'}),define("common/modules/video/events",["bean","qwery","raven","common/utils/$","common/utils/_","common/utils/config","common/utils/detect","common/utils/template","common/modules/analytics/omnitureMedia","common/modules/onward/history","text!common/views/ui/video-ads-skip-overlay.html"],function(e,t,n,i,a,o,s,r,c,l,u){function d(e){return E?"video":e.guMediaType}function h(e){return C&&!l.isRevisit(o.page.pageId)&&e.guAutoplay}function p(e,t){return d(t)+":"+e}function m(e,t,n){var i=E?"ophan/embed":"ophan/ng";e&&require([i],function(i){var a={};a[d(n)]={id:e,eventType:t.type},i.record(a)})}function f(e,t){D.concat(S.map(function(e){return"play:"+e})).forEach(function(n){e.one(p(n,e),function(n){m(t,n,e)})})}function g(e){new c(e).init()}function v(e){var t={end:function(){e.trigger(p("preroll:end",e)),e.removeClass("vjs-ad-playing--vpaid"),b(e,!0)},start:function(){var n=e.duration();n?e.trigger(p("preroll:play",e)):e.one("durationchange",t.start)},vpaidStarted:function(){e.addClass("vjs-ad-playing--vpaid")},ready:function(){e.trigger(p("preroll:ready",e)),e.one("adstart",t.start),e.one("adend",t.end),e.one("Vpaid::AdStarted",t.vpaidStarted),h(e)&&e.play()}};e.one("adsready",t.ready),e.one("adtimeout",function(){e.trigger("adscanceled"),b(e)})}function b(e){var t={end:function(){e.trigger(p("content:end",e))},play:function(){var n=e.duration();n?e.trigger(p("content:play",e)):e.one("durationchange",t.play)},timeupdate:function(){var t=Math.round(parseInt(e.currentTime()/e.duration()*100,10));S.reverse().some(function(n){return t>=n?(e.trigger(p("play:"+n,e)),!0):!1})},ready:function(){e.trigger(p("content:ready",e)),e.one("play",t.play),e.on("timeupdate",a.throttle(t.timeupdate,1e3)),e.one("ended",t.end),h(e)&&e.play()}};t.ready()}function k(t){t.on("playing",function(){e.fire(document.body,"videoPlaying")}),t.on("pause",function(){e.fire(document.body,"videoPause")}),t.on("ended",function(){e.fire(document.body,"videoEnded")})}function y(n){var a,o={update:function(){var s=this.ima.getAdsManager(),r=s.getCurrentAd().getDuration()-s.getRemainingTime(),c=parseInt((n-r).toFixed(),10);c>0?i(".js-skip-remaining-time",this.el()).text(c):(window.clearInterval(a),i(".js-ads-skip",this.el()).html('<button class="js-ads-skip-button vjs-ads-skip__button" data-link-name="Skip video advert"><i class="i i-play-icon-grey skip-icon"></i><i class="i i-play-icon-gold skip-icon"></i>Skip advert</button>'),e.on(t(".js-ads-skip-button")[0],"click",o.skip.bind(this)))},skip:function(){i(".js-ads-skip",this.el()).hide(),this.trigger(p("preroll:skip",this)),this.ima.onAdComplete_(),this.ima.onContentResumeRequested_(),this.ima.getAdsManager().stop()},init:function(){var e=r(u,{skipTimeout:n});i(this.el()).append(e),a=setInterval(o.update.bind(this),250),this.one(p("content:play",this),function(){i(".js-ads-skip",this.el()).hide(),window.clearInterval(a)
})}};this.one(p("preroll:play",this),o.init.bind(this))}function w(e){e&&"message"in e&&"code"in e&&n.captureException(new Error(e.message),{tags:{feature:"player",vjsCode:e.code}})}function _(e){var t=e.error();return null!==t?(w(t),4===t.code):!1}function T(e){e.on("error",function(){w(e.error()),i(".vjs-big-play-button").hide()})}var C=s.isBreakpoint({min:"desktop"}),E=!!guardian.isEmbed,S=[25,50,75],D=["preroll:request","preroll:ready","preroll:play","preroll:end","content:ready","content:play","content:end"];return{constructEventName:p,bindContentEvents:b,bindPrerollEvents:v,bindGlobalEvents:k,initOphanTracking:f,initOmnitureTracking:g,adSkipCountdown:y,handleInitialMediaError:_,bindErrorHandler:T}}),define("common/modules/video/fullscreener",["bean","bonzo"],function(e,t){function n(){var n=this,i=t.create('<div class="vjs-fullscreen-clickbox"></div>')[0],a={click:function(e){this.paused()?this.play():this.pause(),e.stop()},dblclick:function(e){e.stop(),this.isFullScreen()?this.exitFullscreen():this.requestFullscreen()}};t(i).appendTo(n.contentEl()),e.on(i,"click",a.click.bind(n)),e.on(i,"dblclick",a.dblclick.bind(n)),n.on("fullscreenchange",function(){this.isFullScreen()&&n.trigger("player:fullscreen")})}return n}),define("common/modules/video/supportedBrowsers",["bean","common/utils/$","common/utils/_","common/utils/detect","common/utils/config"],function(e,t,n,i,a){function o(n){e.on(t("."+r)[0],"click",function(){n.error(null)})}var s={Firefox:"25",Chrome:"28",IE:"9",Opera:"14",Safari:"6"},r="vjs-error-display__close",c=i.getUserAgent,l='Your browser is no longer supported. <a href="http://whatbrowser.org" target="_blank">Update your browser?</a> <button class="'+r+'">close</button>';return function(e){var t=n.some(s,function(e,t){return c.browser===t&&c.version<e});t&&a.switches.mediaPlayerSupportedBrowsers&&(e.error(l),o(e))}}),define("common/modules/video/tech-order",["common/utils/$","common/utils/_","common/utils/config"],function(e,t,n){function i(t){return e("source",t).map(function(e){var t=e.getAttribute("type");return o[t]?o[t]:t})}function a(e){return t.chain(i(e)).map(function(t){return e.canPlayType(t)}).compact().contains("probably").value()}var o={"video/m3u8":'video/m3u8; codecs="avc1.42C01e, mp4a.40.2"',"video/mp4":'video/mp4; codecs="avc1.42C01e, mp4a.40.2"',"video/3gp:large":'video/3gp:large; codecs="avc1.42C01e, mp4a.40.2"',"video/3gp:small":'video/3gp:small; codecs="avc1.42C01e, mp4a.40.2"',"video/webm":'video/webm; codecs="vp8, vorbis"'};return function(e){var t=["flash","html5"];return n.switches.html5MediaCompatibilityCheck&&"canPlayType"in e&&a(e)?t.reverse():t}}),define("text!common/views/ui/loading.html",[],function(){return'<div class="pamplemousse">\n    <div class="pamplemousse__pip"><i></i></div>\n    <div class="pamplemousse__pip"><i></i></div>\n    <div class="pamplemousse__pip"><i></i></div>\n</div>\n'}),define("bootstraps/media",["bean","bonzo","fastdom","raven","common/utils/$","common/utils/_","common/utils/config","common/utils/defer-to-analytics","common/utils/detect","common/utils/mediator","common/utils/url","common/modules/analytics/beacon","common/modules/commercial/build-page-targeting","common/modules/component","common/modules/video/events","common/modules/video/fullscreener","common/modules/video/supportedBrowsers","common/modules/video/tech-order","text!common/views/ui/loading.html"],function(e,t,n,i,a,o,s,r,c,l,u,d,h,p,m,f,g,v,b){function k(){var e={ad_rule:1,correlator:(new Date).getTime(),cust_params:encodeURIComponent(u.constructQuery(h())),env:"vp",gdfp_req:1,impl:"s",iu:s.page.adUnit,output:"xml_vast2",scp:encodeURIComponent("slot=video"),sz:"400x300",unviewed_position_start:1};return"http://"+s.page.dfpHost+"/gampad/ads?"+u.constructQuery(e)}function y(e){e.loadingSpinner.contentEl().innerHTML=b}function w(e){a(".vjs-tech",e.el()).attr("aria-hidden",!0),a(".vjs-big-play-button",e.el()).attr("aria-hidden",!0),a(".vjs-current-time",e.el()).attr("aria-hidden",!0),a(".vjs-time-divider",e.el()).attr("aria-hidden",!0),a(".vjs-duration",e.el()).attr("aria-hidden",!0),a(".vjs-embed-button",e.el()).attr("aria-hidden",!0),a(".vjs-play-control",e.el()).attr("aria-label","video play"),a(".vjs-mute-control",e.el()).attr("aria-label","video mute"),a(".vjs-fullscreen-control",e.el()).attr("aria-label","video fullscreen")}function _(e,n){var i=videojs(e,n),o=a(e),s=parseInt(o.attr("data-duration"),10);return isNaN(s)||(i.duration(s),i.trigger("timeupdate")),i.guAutoplay="true"===a(e).attr("data-auto-play"),i.height(t(i.el()).parent().dim().height),i.width(t(i.el()).parent().dim().width),m.handleInitialMediaError(i)&&(i.dispose(),n.techOrder=v(e).reverse(),i=videojs(e,n)),i}function T(e){return e.target.firstChild&&e.target.firstChild.id&&e.target.firstChild.id.indexOf("flash_api")>0}function C(i){n.read(function(){a(".js-video-play-button",i).each(function(i){var o=t(i);e.on(i,"click",function(){var e,s,r;r=t(i).parent().parent(),e=a(".js-video-placeholder",r),s=a(".js-video-player",r),n.write(function(){e.removeClass("media__placeholder--active").addClass("media__placeholder--hidden"),s.removeClass("media__container--hidden").addClass("media__container--active"),o.removeClass("media__placeholder--active").addClass("media__placeholder--hidden")}),S(a("video",s).get(0),!0)}),n.write(function(){o.removeClass("media__placeholder--hidden").addClass("media__placeholder--active")})})})}function E(){s.page.videoJsFlashSwf&&(videojs.options.flash.swf=s.page.videoJsFlashSwf),videojs.plugin("adSkipCountdown",m.adSkipCountdown),videojs.plugin("fullscreener",f),n.read(function(){a(".js-gu-media--enhance").each(function(e){S(e,!1)})}),C(document.body),l.on("modules:related:loaded",C),l.on("page:media:moreinloaded",C)}function S(e,n){var a,l,u=e.tagName.toLowerCase(),h=t(e).addClass("vjs vjs-tech-"+videojs.options.techOrder[0]),p=h.attr("data-media-id"),f="true"===h.attr("data-block-video-ads"),b="true"===h.attr("data-show-end-slate"),C=h.attr("data-end-slate"),E=h.attr("data-embed-path"),S=v(e);s.page.videoJsVpaidSwf&&s.switches.vpaidAdverts&&(S=["vpaid"].concat(S),videojs.options.vpaid={swf:s.page.videoJsVpaidSwf}),a=_(e,{techOrder:S,controls:!0,autoplay:n,preload:"auto",plugins:{embed:{embeddable:!s.page.isFront&&s.switches.externalVideoEmbeds&&("Video"===s.page.contentType||"true"===h.attr("data-embeddable")),location:s.page.externalEmbedHost+"/embed/video/"+(E?E:s.page.pageId)}}}),m.bindErrorHandler(a),a.guMediaType=u,a.ready(function(){var e;y(a),m.bindGlobalEvents(a),w(a),g(a),a.one("playing",function(e){d.counts(T(e)?"video-tech-flash":"video-tech-html5")}),e=a.volume(),e&&(a.volume(0),a.volume(e)),a.persistvolume({namespace:"gu.vjs"}),r(function(){m.initOmnitureTracking(a),m.initOphanTracking(a,p),"video"===u?(a.fullscreener(),!s.switches.videoAdverts||f||s.page.isPreview?m.bindContentEvents(a):i.wrap({tags:{feature:"media"}},function(){m.bindPrerollEvents(a),a.adSkipCountdown(10),require(["js!http://imasdk.googleapis.com/js/sdkloader/ima3.js"],function(){a.ima({id:p,adTagUrl:k()}),a.trigger(m.constructEventName("preroll:request",a)),a.ima.requestAds()})})(),b&&c.isBreakpoint({min:"desktop"})&&D(a,C)):(a.playlist({mediaType:"audio",continuous:!1}),m.bindContentEvents(a))})}),l=o.debounce(function(){a.removeClass("vjs-mousemoved")},500),a.on("mousemove",function(){a.addClass("vjs-mousemoved"),l()})}function D(e,n){var i=new p,a="vjs-has-ended";i.endpoint=n,i.fetch(e.el(),"html"),e.one(m.constructEventName("content:play",e),function(){e.on("ended",function(){t(e.el()).addClass(a)})}),e.on("playing",function(){t(e.el()).removeClass(a)})}function I(){if(s.isMedia&&s.page.showRelatedContent){var e=s.page.contentType.toLowerCase(),t=new p,n=a(".js-onward")[0],i="/"+e+"/section/"+s.page.section;"seriesId"in s.page&&(i+="/"+s.page.seriesId),i+=".json?shortUrl="+s.page.shortUrl,"video"===e&&(i+="&exclude-tag=guardian-professional/guardian-professional"),t.endpoint=i,t.fetch(n).then(function(){l.emit("page:media:moreinloaded",n),l.emit("page:new-content",n)})}}function M(){if(s.isMedia){var e=s.page.contentType.toLowerCase(),t=new p,n=a("video"===e?".js-video-components-container":".js-media-popular")[0],i="/"+(s.page.isPodcast?"podcast":e)+"/most-viewed.json";t.manipulationType="video"===e?"append":"html",t.endpoint=i,t.fetch(n,"html").then(function(){l.emit("page:new-content")})}}function L(){s.switches.enhancedMediaPlayer&&require(["bootstraps/video-player"],i.wrap({tags:{feature:"media"}},E)),I(),M()}return{init:L}}),define("bootstraps/sport",["common/utils/$","common/utils/config","common/modules/component"],function(e,t,n){function i(){var i,a,o=t.page.cricketMatch;o&&(i=new n,a=e(".js-cricket-score")[0],i.endpoint="/sport/cricket/match/"+o+".json",i.fetch(a,"summary"))}return{init:i}}),define("bootstraps/app",["qwery","raven","common/utils/config","common/utils/detect","common/utils/mediator","common/utils/user-timing","bootstraps/common","bootstraps/media","bootstraps/sport","common/modules/experiments/tests/save-for-later"],function(e,t,n,i,a,o,s,r,c,l){var u=function(e,n){t.context({tags:{feature:e}},n.init,[])},d=function(){o.mark("App Begin"),n.switches.abSaveForLater&&"identity"===n.page.section&&"/saved-for-later"===n.page.pageId&&(new l).variants[0].test(),u("common",s),n.page.isFront&&require(["bootstraps/facia"],function(e){u("facia",e)}),"lifeandstyle"===n.page.section&&"Sudoku"===n.page.series&&require(["bootstraps/sudoku"],function(e){u("sudoku",e)}),"Article"===n.page.contentType&&require(["bootstraps/article","bootstraps/image-content"],function(e,t){u("article",e),u("article : image-content",t)}),"LiveBlog"===n.page.contentType&&require(["bootstraps/liveblog","bootstraps/image-content"],function(e,t){u("liveBlog",e),u("liveBlog : image-content",t)}),(n.isMedia||"Interactive"===n.page.contentType)&&require(["bootstraps/trail"],function(e){u("media : trail",{init:e})}),(n.isMedia||e("video, audio").length)&&u("media",r),"Gallery"===n.page.contentType&&require(["bootstraps/gallery","bootstraps/image-content"],function(e,t){u("gallery",e),u("gallery : image-content",t)}),"ImageContent"===n.page.contentType&&require(["bootstraps/image-content"],function(e){u("image-content",e)}),"football"===n.page.section&&require(["bootstraps/football"],function(e){u("football",e)}),"sport"===n.page.section&&u("sport",c),"identity"===n.page.section&&require(["bootstraps/profile"],function(e){u("profile",e)}),n.page.isPreferencesPage&&require(["bootstraps/preferences"],function(e){u("preferences",e)}),"help/accessibility-help"===n.page.pageId&&require(["bootstraps/accessibility"],function(e){u("accessibility",e)}),o.mark("App End")};return{go:d}});
//# sourceMappingURL=app.js.map